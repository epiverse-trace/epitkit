<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="es" data-bs-theme="auto">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>Curso en ciencia de datos en salud pública y modelamiento de enfermedades infecciosas: Todo en una sola página</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="assets/styles.css">
<script src="assets/scripts.js" type="text/javascript"></script><!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-XZ471458FQ"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-XZ471458FQ');
    </script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="favicons/epitkit/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicons/epitkit/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="favicons/epitkit/favicon-16x16.png">
<link rel="manifest" href="favicons/epitkit/site.webmanifest">
<link rel="mask-icon" href="favicons/epitkit/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="white">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="black">
</head>
<body>
    <header id="top" class="navbar navbar-expand-md top-nav epitkit"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Ir al contenido principal</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="epitkit-logo" alt="epitkit" src="assets/images/epitkit-logo.svg"><span class="badge text-bg-danger" style="background-color: #FF4955; border-radius: 5px">
          <abbr title="Esta lección se encuentra en la fase pre-alfa, lo que significa que está en las primeras etapas de desarrollo, pero aún no se ha enseñado.">
            <a href="https://docs.carpentries.org/resources/curriculum/lesson-life-cycle.html" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-octagon" style="border-radius: 5px"></i>
              Pre-Alfa
            </a>
            <span class="visually-hidden">Esta lección se encuentra en la fase pre-alfa, lo que significa que está en las primeras etapas de desarrollo, pero aún no se ha enseñado.</span>
          </abbr>
        </span>

      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text">
<li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul>
</li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Vista de estudiante <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
<li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/aio.html';">Vista de la instructora</button></li>
        </ul>
</div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav epitkit" aria-label="Navegación principal"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Alternar navegación">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menú</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="epitkit" src="assets/images/epitkit-logo-sm.svg">
</div>
    <div class="lesson-title-md">
      Curso en ciencia de datos en salud pública y modelamiento de enfermedades infecciosas
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Buscar en la página All In One" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class="nav-item">
          <span class="lesson-title">
            Curso en ciencia de datos en salud pública y modelamiento de enfermedades infecciosas
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Puntos Clave</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glosario</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Perfiles de estudiante</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            Más <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
<li><a class="dropdown-item" href="reference.html">Glosario de términos</a></li>
          </ul>
</li>
      </ul>
</div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Buscar en la página All In One"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="aio.html" role="button" aria-label="Buscar en la página All In One">Buscar en la página All In One</a>
  </div>
<!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Curso en ciencia de datos en salud pública y modelamiento de enfermedades infecciosas
</div>

<aside class="col-md-12 lesson-progress"><div style="width: %" class="percentage">
    %
  </div>
  <div class="progress epitkit">
    <div class="progress-bar epitkit" role="progressbar" style="width: %" aria-valuenow="" aria-label="Progreso de la lección" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="Cerrar menú" alt="Cerrar menú" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Cerrar " data-episodes="Episodios ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text">
<li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul>
</li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Vista de estudiante
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/aio.html">Vista de la instructora</a>
                      </div>
                    </div>
                  </div>
<!--/div.accordion-item-->
                </div>
<!--/div.accordion-flush-->
              </div>
<!--div.sidenav-view-selector -->
            </div>
<!--/div.col -->

            <hr>
</div>
<!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODIOS
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Resumen y configuración</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="Taller-R-RStudio.html">1. Introducción a R y Rstudio</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="Visualizacion.html">2. Introduccion a la visualizacion de datos en R con ggplot2.</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="Reporte.html">3. Reporte e informes tecnicos en R Markdown</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="limpieza.html">4. Limpieza de datos epidemiológicos</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="zika.html">5. Construyendo un modelo deterministico simple</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="estadistica.html">6. Statistics and Probability Unit</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="Banco_errores.html">7. Banco de preguntas y errores frecuentes</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width">
<div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RECURSOS
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul>
<li>
                        <a href="key-points.html">Puntos Clave</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">Glosario</a>
                      </li>
                      <li>
                        <a href="profiles.html">Perfiles de estudiante</a>
                      </li>
                      <li><a href="reference.html">Glosario de términos</a></li>
                    </ul>
</div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources">
<a href="aio.html">Todo en una sola página</a>


            <hr class="d-none d-sm-block d-md-none">
<div class="d-grid gap-1">

            </div>
          </div>
<!-- /div.accordion -->
        </div>
<!-- /div.sidebar-inner -->
      </nav>
</div>
<!-- /div.sidebar -->
  </div>
<!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-extra.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <main id="main-content" class="main-content"><div class="container lesson-content">
        
        
<section id="aio-Taller-R-RStudio"><p>Content from <a href="Taller-R-RStudio.html">Introducción a R y Rstudio</a></p>
<hr>
<p>Última actualización: 2025-06-06 |

        <a href="https://github.com/epiverse-trace/epitkit/edit/main/episodes/Taller-R-RStudio.Rmd" class="external-link">Mejora esta página <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Mostrar todas las soluciones " data-collapse="Cerrar todas las soluciones "> Mostrar todas las soluciones <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Hoja de ruta</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Preguntas</h3>
<ul>
<li>¿Cómo se utilizan R y RStudio en el análisis de datos y la salud
pública?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objetivos</h3>
<p>Al final de este taller usted podrá:</p>
<ul>
<li>Reconocer y hacer uso de R y RStudio.</li>
<li>Conocer los tipos de datos y operados básicos en R.</li>
<li>Comprender las estructuras básicas de datos en R tales como vectores
y tablas de datos.</li>
<li>Comprender el proceso de creación de funciones.</li>
<li>Reconocer el proceso de importación, exportación y transformación de
bases de datos con Tidyverse.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="prereq1" class="callout prereq">
<div class="callout-square">
<i class="callout-icon" data-feather="check"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Pre requisito</h3>
<div class="callout-content">
<p>Esta unidad no tiene prerequisitos</p>
</div>
</div>
</div>
<div id="tabla-de-contenido" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="tabla-de-contenido" class="callout-inner">
<h3 class="callout-title">Tabla de contenido</h3>
<div class="callout-content">
<ul>
<li>Módulo: Ciencia de datos en salud pública
<ul>
<li>Unidad: Introducción a R y RStudio
<ul>
<li>Tema 1: Introducción</li>
<li>Tema 2: Instalación de R y RStudio</li>
<li>Tema 3: Ambiente de RStudio</li>
<li>Tema 4: Configuración de un proyecto en RStudio</li>
<li>Tema 5: Tipos de datos y operadores en R</li>
<li>Tema 6: Estructuras de datos en R</li>
<li>Tema 7: Funciones</li>
<li>Tema 8: Manipulación de datos con Tidyverse</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>
<section><h2 class="section-heading" id="tema-1-introducción">Tema 1: Introducción<a class="anchor" aria-label="anchor" href="#tema-1-introducci%C3%B3n"></a>
</h2>
<hr class="half-width">
<p>R es un lenguaje de programación especializado para análisis de
datos, es de uso gratuito y software libre. Por otra parte, RStudio es
un editor de R también disponible de manera gratuita. La diferencia
entre R y RStudio radica en que en R es el lenguaje de programación en
el que escribimos el código y RStudio es el ambiente de desarrollo que
permite trabajar con R de manera más fácil y amigable.</p>
<p>En los últimos años el uso de R ha crecido en el ámbito académico y
de la industria. R, además de ser un lenguaje de programación, es
también un entorno para computación estadística y creación de
visualizaciones. R y RStudio son herramientas esenciales para el
estudio, análisis y toma de decisiones en salud pública, ya que permiten
realizar análisis estadísticos detallados, modelar la propagación de
enfermedades, visualizar datos de manera efectiva y automatizar tareas.
Estas herramientas facilitan la manipulación y preparación de datos,
fomentan la colaboración en proyectos de ciencia de datos, y la toma de
decisiones basadas en evidencia. Además, son útiles en la formación y
educación en análisis de datos para profesionales de la salud, áreas
STEM y toma de decisiones.</p>
</section><section><h2 class="section-heading" id="tema-2-instalación-de-r-y-rstudio">Tema 2: Instalación de R y RStudio<a class="anchor" aria-label="anchor" href="#tema-2-instalaci%C3%B3n-de-r-y-rstudio"></a>
</h2>
<hr class="half-width">
<p>Para instalar R y RStudio debemos ir a nuestro navegador de
confianza. Allí vamos a buscar r-project, que es la página oficial de R
(<a href="https://www.r-project.org/" class="external-link uri">https://www.r-project.org/</a>). Recordemos que este es un
software de uso libre, no hay que hacer ningún pago por su descarga o
uso.</p>
<figure><img src="fig/pagina_r.png" class="figure mx-auto d-block"></figure><p>Busca la opción de descarga “download R” y sigue las
instrucciones.</p>
<p>Para instalar Rstudio debemos ir a <a href="https://posit.co/download/rstudio-desktop/" class="external-link uri">https://posit.co/download/rstudio-desktop/</a> y buscar
donde diga Install RSudio. Si tenemos Windows podemos dar click en el
recuadro azul. Si es otro sistema operativo abajo encontraremos una
lista con las diferentes opciones. Para instalar, sigue las
instrucciones.</p>
<figure><img src="fig/instalar_r.png" class="figure mx-auto d-block"></figure><p>Recuerda ejecutar el archivo que se descargó siguiendo los pasos. Es
recomendable que en el momento de la instalación elijamos la opción de
dejar un acceso directo en el escritorio.</p>
<p>Para comprobar que la instalación fue satisfactoria y en general para
hacer uso de R y RStudio debemos buscar en la ubicación que hayamos
elegido en la instalación donde quedó Rstudio y dar doble clic o clic
derecho y abrir. Lo primero que vemos al momento de abrir Rstudio es la
siguiente pantalla:</p>
<figure><img src="fig/pantalla_r.png" class="figure mx-auto d-block"></figure><p>Escribe 2+2 donde aparece el cursor y da enter, si te aparece el
resultado 4 ¡Está todo listo para empezar!</p>
<figure><img src="fig/2mas2.png" class="figure mx-auto d-block"></figure></section><section><h2 class="section-heading" id="tema-3-ambiente-de-rstudio">Tema 3: Ambiente de RStudio<a class="anchor" aria-label="anchor" href="#tema-3-ambiente-de-rstudio"></a>
</h2>
<hr class="half-width">
<p>RStudio está compuesto por 4 secciones principales:</p>
<figure><img src="fig/partes_pantalla.png" class="figure mx-auto d-block"></figure><ol style="list-style-type: decimal">
<li><p><strong>Editor (sección superior izquierda)</strong>: en esta
sección escribimos y editamos el código a través de la creación de
Scripts . Esta sección es fundamental para la reproducibilidad del
código. Este editor permite guardar el código para que sea usado en
futuras ocasiones. El código puede ser ejecutado en esta sección
posicionando el cursor de texto al final de la línea de código que se
ejecutará; otra opción es seleccionando la misma y empleando el comando
<code>Control+Enter</code> para Windows o <code>Command+Enter</code>
para Mac.</p></li>
<li><p><strong>Entorno (sección superior derecha)</strong>: en esta
sección se pueden visualizar los objetos, datos y funciones creados o
importados en el codigo que escribimos en los Scripts por ejemplo
objetos como vectores, arreglos, <code>data.frames</code> o tablas de
datos, objetos gráficos de <code>ggplot</code> , entre otros.</p></li>
<li><p><strong>Consola (sección inferior izquierda)</strong>: esta
sección es donde se ejecuta el código. No solo se ejecuta el código que
hemos escrito en el editor, sino que también el código puede escribirse
y ejecutarse aquí directamente presionando <code>Enter</code>. Sin
embargo, cuando el código se ejecuta directamente en la consola, no se
almacenan los comandos que ejecutamos, cuando se cierra la sesión de R
se pierde.</p></li>
<li><p><strong>Visualizador (sección inferior derecha)</strong>: en esta
sección se pueden visualizar los archivos en “<code>Files</code>”, los
gráficos en “<code>Plots</code>”, los paquetes que ya están instalados
en “<code>Packages</code>”, la ayuda de R con información de los
paquetes y el funcionamiento en “<code>Help</code>”, y páginas web en
“<code>Viewer</code>”.</p></li>
</ol></section><section><h2 class="section-heading" id="tema-4-configuración-de-un-proyecto-en-rstudio">Tema 4: Configuración de un proyecto en RStudio<a class="anchor" aria-label="anchor" href="#tema-4-configuraci%C3%B3n-de-un-proyecto-en-rstudio"></a>
</h2>
<hr class="half-width">
<p>Una de las grandes ventajas de usar RStudio es la posibilidad de usar
los Proyectos en R (R Project)(indicado por un archivo
<code>.Rproj</code>) lo que permite organizar el espacio de trabajo, el
historial y los documentos fuente. Para crear un Proyecto en R, es
importante seguir los siguientes pasos:</p>
<div id="discussion1" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Desafío</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li>Abrir RStudio y, en la esquina superior izquierda, seleccionar la
pestaña <strong>File (Archivo)</strong> -&gt; <strong>New Project…
(Proyecto Nuevo)</strong>.</li>
</ol>
<figure><img src="fig/file_new_project.png" class="figure mx-auto d-block"></figure><ol start="2" style="list-style-type: decimal">
<li>Se desplegará una ventana con encabezado <strong>New Project
Wizard</strong>: <strong>Create Project</strong>, ahora se debe
seleccionar <strong>New Directory (Directorio Nuevo)</strong>.</li>
</ol>
<figure><img src="fig/proyecto_r.png" class="figure mx-auto d-block"></figure><ol start="3" style="list-style-type: decimal">
<li><p>En la ventana con encabezado <strong>New Project
Wizard</strong>:<strong>Project Type</strong>, se debe seleccionar
<strong>New Project</strong> <img src="fig/tipo_projecto.png" class="figure"></p></li>
<li><p>En la ventana con encabezado <strong>New Project
Wizard</strong>:<strong>Create New Project</strong>. En la casilla
<strong>Directory Name (Nombre del Directorio)</strong> coloque el
nombre deseado para su proyecto (e.g. “<code>IntroR</code>”).<br><img src="fig/projectoR_introR.png" class="figure"></p></li>
<li><p>Hacemos clic en el botón <strong>Browse….</strong> Para buscar la
ubicación dentro del computador donde deseamos guardar el proyecto <img src="fig/browse.png" class="figure"></p></li>
<li><p>Creamos una nueva carpeta con el mismo nombre del proyecto (e.g.
“<code>IntroR</code>”), así como las subcarpetas que necesitamos para
organizar nuestro trabajo y resultados: datos, scripts y figuras. Al
final, el proyecto debería parecerse a esta imagen:</p></li>
</ol>
<figure><img src="fig/proyecto_r_revision.png" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="tema-5-tipos-de-datos-y-operadores-en-r">Tema 5: Tipos de datos y operadores en R<a class="anchor" aria-label="anchor" href="#tema-5-tipos-de-datos-y-operadores-en-r"></a>
</h2>
<hr class="half-width">
<div id="tipos-de-datos" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="tipos-de-datos" class="callout-inner">
<h3 class="callout-title">Tipos de datos</h3>
<div class="callout-content">
<p>R tiene la capacidad de almacenar y procesar distintos tipos de
datos. Entre estos se encuentran:</p>
<ul>
<li>Numéricos decimales<code>(double. Ej: 3.3)</code>
</li>
<li>Enteros <code>(integer. Ej: 3)</code>
</li>
<li>Caracteres
<code>(character. Ej: Municipio, sexo o nombre.)</code>
</li>
<li>Booleanos o lógicos <code>(logic. Ej: FALSE, TRUE)</code>
</li>
<li>Tipo fechas <code>(date. Ej: 01/01/2022)</code>
</li>
<li>Datos <code>NA</code>, <code>NAN</code> e <code>Inf</code>. La
diferencia entre <code>NA</code>, <code>NAN</code> e <code>Inf</code> es
que <code>NA</code> indica que hay dato faltante “missing”,
<code>NAN</code> significa “not a number”; es decir, hay información,
pero es un error y el resultado no es numérico, por ejemplo
<code>0/0</code>. Inf indica que hay operaciones cuyo resultado es
infinito como por ejemplo <code>1/0</code>. Si se hace operaciones entre
tipos variables se pueden obtener <code>Inf</code>.</li>
</ul>
</div>
</div>
</div>
<div id="operadores-matemáticos-y-lógicos" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="operadores-matemáticos-y-lógicos" class="callout-inner">
<h3 class="callout-title">Operadores matemáticos y lógicos</h3>
<div class="callout-content">
<p>Los operadores son herramientas matemáticas que nos permiten realizar
diferentes tareas con los datos que tenemos disponibles; por ejemplo,
con el operador <code>+</code> podemos efectuar una suma o incrementar
un índice. Algunos de los operadores más utilizados en R son los
siguientes:<br>
1. Operadores aritméticos (Ej: <code>+</code>, <code>-</code>,
<code>*</code>, que corresponden a suma, resta y multiplicación
respectivamente)<br>
2. Operadores de comparación
<code>(Ej: &lt;, &gt;, ==, &gt;=, &lt;=, !=)</code> 3. Operadores
booleanos <code>(&amp; (and), | (or), ! (not))</code></p>
</div>
</div>
</div>
<div class="section level3">
<h3 id="operadores-de-asignación---y">Operadores de asignación &lt;- y =<a class="anchor" aria-label="anchor" href="#operadores-de-asignaci%C3%B3n---y"></a>
</h3>
<p>&lt;- Este es un operador común en R para asignar un determinado
valor a una variable y el alcance está dentro de la función y también
fuera de ella.</p>
<p><em>Ejemplo</em></p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nombre</span> <span class="op">&lt;-</span> <span class="st">"Laura"</span></span></code></pre>
</div>
<p>Se abra creado un objeto en el ambiente global (ubiquelo en la
sección lateral derecha superior): <img src="fig/nombrelaura.png" class="figure"></p>
<p>= Este operador se utiliza para establecer un parámetro en un valor
dentro de una función. El alcance está solo dentro de la función. La
variable todavía contiene su valor original fuera de la función.</p>
</div>
</section><section><h2 class="section-heading" id="tema-6-funciones">Tema 6: Funciones<a class="anchor" aria-label="anchor" href="#tema-6-funciones"></a>
</h2>
<hr class="half-width">
<p>Imaginemos una función como una especie de “caja mágica” que recibe
ciertos datos o información como entrada y produce un resultado o
respuesta específica como salida. Es como seguir una receta que toma
ingredientes y como resultado tenemos un plato delicioso.</p>
<p>Para qué podamos utilizar una función debemos proporcionar unos datos
de entrada (<em>input</em>) que entran a la caja (la función) y de ahí
sale un resultado o datos de salida (<em>output</em>). La función puede
ser suma, resta, regresión logística o un modelo matemático. Entran
datos y salen otros que son producto de las operaciones en la
función.</p>
<div id="componentes-básicos-de-una-función" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="componentes-básicos-de-una-función" class="callout-inner">
<h3 class="callout-title">Componentes básicos de una función</h3>
<div class="callout-content">
<p>Los componentes básicos de una función son:</p>
<ul>
<li><p><strong><code>name</code> (nombre)</strong>: es el nombre que se
da a la función (Por ejemplo: myfun).</p></li>
<li><p><strong><code>formals</code> (argumentos)</strong>: son la serie
de elementos que controlan cómo llamar a la función.</p></li>
<li><p><strong><code>body</code> (cuerpo)</strong>: es la serie de
operaciones o modificaciones a los argumentos.</p></li>
<li><p><strong><code>output</code> (salida o resultado)</strong>: son
los resultados después de modificar los argumentos. Si esta salida
corresponde a una serie de datos, podemos extraerla usando el comando
<code>return</code>.</p></li>
</ul>
</div>
</div>
</div>
<p><strong>Ejemplo</strong>: con una base de datos queremos generar una
variable que es producto de una operación, por ejemplo, IMC (índice masa
corporal).</p>
<p>La función del IMC es conocida (<span class="math display">\[peso/(talla^2 )\]</span>) , y sus argumentos son
peso y talla.</p>
<p>Recordemos que en esta fórmula el peso debe estar en kg y la talla en
metros.</p>
<p>Para este ejemplo el input, o datos de entrada son el peso y la
variable talla, y el output sería el índice de masa corporal. Si tenemos
que el peso es 50kg y la talla 1.5m, el IMC será igual a 22.2.</p>
<figure><img src="fig/ilustracion_imc.png" class="figure mx-auto d-block"></figure><p>(Ilustración adaptada por Maria Paula Forero)</p>
<p>En R podemos producir la función IMC mediante el siguiente
código:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">IMC</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">peso_kg</span>, <span class="va">talla_m</span><span class="op">)</span> <span class="op">{</span> <span class="co"># Aquí van los argumentos o input</span></span>
<span>    <span class="va">resultado</span> <span class="op">&lt;-</span> <span class="va">peso_kg</span><span class="op">/</span> <span class="va">talla_m</span><span class="op">^</span><span class="fl">2</span>  <span class="co"># Esta es el cuerpo u operación       </span></span>
<span>    <span class="kw">return</span><span class="op">(</span><span class="va">resultado</span><span class="op">)</span>           <span class="co"># Este es el output o resultado</span></span>
<span> <span class="op">}</span></span></code></pre>
</div>
<p>Ahora, utilicemos la función para calcular el IMC de una persona de
talla 1.75 cm y peso 80 kg, mediante el siguiente código</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">IMC</span><span class="op">(</span>peso_kg <span class="op">=</span> <span class="fl">80</span>, talla_m <span class="op">=</span> <span class="fl">1.75</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 26.12245</code></pre>
</div>
<p>Como se puede ver, para usar la función una vez establecida solo se
requiere el nombre y los argumentos.</p>
<div id="discussion2" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Desafío</h3>
<div class="callout-content">
<p><strong>Reto</strong>: Usando la misma función calcula tu IMC.</p>
</div>
</div>
</div>
<p>En general, una función consiste en una secuencia de instrucciones
con el fin de llevar a cabo una tarea. De esta forma, por medio del uso
de funciones es posible sistematizar procesos complejos que se realizan
de manera rutinaria.</p>
<div class="section level3">
<h3 id="paquetes-o-librerías">Paquetes o librerías<a class="anchor" aria-label="anchor" href="#paquetes-o-librer%C3%ADas"></a>
</h3>
<p>En R, los paquetes, también llamados “librerías” se refieren a
conjuntos de funciones organizadas de manera lógica que pueden ser
utilizadas para llevar a cabo diversas tareas, como análisis, limpieza y
visualización de datos, ente otros.</p>
<div id="las-librerías-más-usadas-en-r-son" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="las-librerías-más-usadas-en-r-son" class="callout-inner">
<h3 class="callout-title">Las librerías más usadas en R son:</h3>
<div class="callout-content">
<ul>
<li>
<strong><code>ggplot2</code></strong>: sirve para la creación de
gráficos y visualizaciones de datos de alta calidad.</li>
<li>
<strong><code>dplyr</code></strong>: permite la manipulación y
transformación eficiente de datos.</li>
<li>
<strong><code>tidyr</code></strong>: utilizada para organizar y
reorganizar datos en un formato tabular ordenado.</li>
<li>
<strong><code>readr</code></strong>: sirve para leer y escribir
datos en formatos como <code>CSV</code>, <code>TSV</code> y otros.</li>
<li>
<strong><code>plyr</code></strong>: funciona para dividir, aplicar y
combinar datos de manera eficiente.</li>
</ul>
</div>
</div>
</div>
<p>A su vez, hay meta-librerías, es decir, aquellas que combinan varias
librerías. Un ejemplo de estas es la librería
<code>tidyverse</code>.</p>
</div>
</section><section><h2 class="section-heading" id="tema-7-estructuras-en-r">Tema 7: Estructuras en R<a class="anchor" aria-label="anchor" href="#tema-7-estructuras-en-r"></a>
</h2>
<hr class="half-width">
<div class="section level3">
<h3 id="vector">Vector<a class="anchor" aria-label="anchor" href="#vector"></a>
</h3>
<p>En R, un vector es una estructura de datos indexada que permite
almacenar varios elementos del mismo tipo en una única estructura. Por
ejemplo, podríamos tener un vector que contenga las edades de varias
personas, o un vector que contenga los nombres de diferentes
ciudades.</p>
<p>Los vectores en R son útiles porque permiten realizar operaciones y
cálculos con facilidad. Los elementos del vector se pueden sumar,
restar, multiplicar o dividir, y sus elementos son accesibles por medio
posición o índice.</p>
<p>En resumen, un vector en R es una colección ordenada de elementos del
mismo tipo de datos (ver Tema 5) que permite almacenar y manipular datos
de manera eficiente.</p>
<p>Para crear un vector en el código o script se escribe el nombre con
el que se va a reconocer (por ejemplo, edad o ciudad) y luego se debe
escribir el símbolo <code>&lt;-</code> (que da la orden a R para crear
el vector). Luego se escribe letra c que es la asignación que permite
inicializar el vector. Cada componente debe ir separado por comas, si
son caracteres debe ir entre comillas (si son números no), si es dato
booleano (falso o verdadero) tampoco va en comillas.</p>
<div id="discussion3" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Desafío</h3>
<div class="callout-content">
<p>Así, los vectores se pueden crear ejecutando el comando
<code>c()</code>, como se puede visualizar a continuación:</p>
<p>Ejemplos</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nombre</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">"Emilia"</span>, <span class="st">"Maximo"</span>, <span class="st">"Axel"</span>, <span class="st">"Diana"</span><span class="op">)</span> <span class="co"># Nombre de las personas</span></span>
<span></span>
<span><span class="va">ciudad</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">"La Plata"</span>,<span class="st">"Concepción"</span>, <span class="st">"Cuzco"</span>, <span class="st">"Bogota"</span><span class="op">)</span> <span class="co"># Ciudad de residencia</span></span>
<span></span>
<span><span class="va">edad</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">18</span>, <span class="fl">20</span>, <span class="fl">37</span>, <span class="fl">42</span><span class="op">)</span>  <span class="co"># Edad de las personas</span></span>
<span></span>
<span><span class="va">vacunado</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># Estado de vacunación</span></span>
<span></span>
<span><span class="va">dosis</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">2L</span>, <span class="fl">0L</span>, <span class="fl">1L</span>, <span class="fl">2L</span><span class="op">)</span> <span class="co"># Número de dosis recibidas`</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="callout1" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Aviso</h3>
<div class="callout-content">
<p>Nota: <em>El uso del símbolo <code>#</code> permite comentar el
código, es decir poner notas que expliquen una o más líneas del
código.</em></p>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="data-frame-tabla-de-datos">Data.frame (Tabla de datos)<a class="anchor" aria-label="anchor" href="#data-frame-tabla-de-datos"></a>
</h3>
<p>Imaginemos un <code>data.frame</code> como una tabla con filas y
columnas, similar a una hoja de cálculo en Excel. Cada columna
representa un tipo de información específica (un vector) o variable (Por
ejemplo, la edad, el departamento o el nombre). En este ejemplo, cada
fila corresponde al registro de esas variables para un individuo. Es
importante tener en cuenta que los <code>data.frame</code> (Tabla de
datos) están compuestos por vectores cuyas dimensiones deben ser
iguales, es decir que todas las columnas deben tener el mismo número de
filas. Siguiendo la analogía de Excel, podemos pensar que cada vector es
una columna de una hoja de Excel.</p>
<p>Una ventaja de trabajar con <code>Data.frame</code> en R en vez de
una hoja de excel es que a medida que el tamaño de la tabla va
aumentando, en R se puede trabajar más rápido y eficientemente.</p>
<p>Para crear una tabla de datos se debe ejecutar el comando
<code>data.frame()</code>. Por ejemplo, utilizando los vectores que
definimos en la sección anterior:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos_vacunas</span> <span class="op">&lt;-</span> <span class="fu">data.frame</span><span class="op">(</span></span>
<span>  nombre <span class="op">=</span> <span class="va">nombre</span>, </span>
<span>  ciudad <span class="op">=</span> <span class="va">ciudad</span>,</span>
<span>  edad <span class="op">=</span> <span class="va">edad</span>,</span>
<span>  vacunado <span class="op">=</span> <span class="va">vacunado</span>,</span>
<span>  dosis <span class="op">=</span> <span class="va">dosis</span><span class="op">)</span></span></code></pre>
</div>
<p>Ahora observemos cómo quedó la tabla de datos</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos_vacunas</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  nombre     ciudad edad vacunado dosis
1 Emilia   La Plata   18     TRUE     2
2 Maximo Concepción   20    FALSE     0
3   Axel      Cuzco   37    FALSE     1
4  Diana     Bogota   42     TRUE     2</code></pre>
</div>
<div id="parte-de-un-data.frame" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="parte-de-un-data.frame" class="callout-inner">
<h3 class="callout-title">Parte de un data.frame</h3>
<div class="callout-content">
<p>Algunas funciones que permiten conocer características como nombres o
tamaños de las filas o columnas del <code>data.frame</code> son:</p>
<ul>
<li><p><code>colnames()</code>: nombres de las columnas</p></li>
<li><p><code>rownames()</code>: nombres de las filas</p></li>
<li><p><code>nrow()</code>: número de filas</p></li>
<li><p><code>ncol()</code>: número de columnas</p></li>
<li><p><code>length()</code>: longitud de la tabla de datos</p></li>
</ul>
</div>
</div>
</div>
<p>Ahora, para acceder a la descripción de la estructura general de una
tabla de datos (y en general cualquier objeto de R) usamos el comando
<code>str</code>, en este caso escribimos:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">str</span><span class="op">(</span><span class="va">datos_vacunas</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>'data.frame':	4 obs. of  5 variables:
 $ nombre  : chr  "Emilia" "Maximo" "Axel" "Diana"
 $ ciudad  : chr  "La Plata" "Concepción" "Cuzco" "Bogota"
 $ edad    : num  18 20 37 42
 $ vacunado: logi  TRUE FALSE FALSE TRUE
 $ dosis   : int  2 0 1 2</code></pre>
</div>
<p>Esto nos indica que la estructura (<code>datos_vacunas</code>)
corresponde a un <code>data.frame</code> con 4 observaciones y 5
variables.</p>
<p>Si usamos el comando <code>str(datos_vacunas$nombre)</code> podemos
ver la estructura de esa variable, que en este caro es un vector de
caracteres con longitud de 1 a 4.</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">str</span><span class="op">(</span><span class="va">datos_vacunas</span><span class="op">$</span><span class="va">nombre</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> chr [1:4] "Emilia" "Maximo" "Axel" "Diana"</code></pre>
</div>
<p>Para acceder a los diferentes componentes de la tabla de datos usamos
la sintaxis <code>[,]</code>, donde la primera dimensión corresponde a
filas y la segunda dimensión a columnas.</p>
<div id="discussion4" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Discusión</h3>
<div class="callout-content">
<p>Por ejemplo, si queremos saber cuántas dosis de vacunas se aplicó
Maximo ¿qué debemos hacer?</p>
</div>
</div>
</div>
<p>Veamos a qué fila y columna corresponde este dato:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos_vacunas</span></span></code></pre>
</div>
<figure><img src="fig/maximo.png" class="figure mx-auto d-block"></figure><p>Vemos que Maximo está en la fila 2 y las dosis en la columna 5. Por
lo tanto, la intersección de estas dos variables nos dará el número de
dosis que tiene Maximo.</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos_vacunas</span><span class="op">[</span><span class="fl">2</span>, <span class="fl">5</span><span class="op">]</span> </span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 0</code></pre>
</div>
</div>
<div class="section level3">
<h3 id="crear-y-abrir-tablas-de-datos">Crear y abrir tablas de datos<a class="anchor" aria-label="anchor" href="#crear-y-abrir-tablas-de-datos"></a>
</h3>
<p>R nos permite no solo crear tablas de datos sino también abrir
archivos que las contengan. De hecho, la mayoría de las veces no se
crean directamente los <code>data.frame</code> en R sino que se importa
un <code>data.frame</code> de alguna fuente de datos, por ejemplo, la
base de datos del sistema de vigilancia de algún evento de interés.</p>
<div id="fuentes-de-conjunto-de-datos" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="fuentes-de-conjunto-de-datos" class="callout-inner">
<h3 class="callout-title">Fuentes de conjunto de datos</h3>
<div class="callout-content">
<p>Para esto, en R hay tres fuentes de conjuntos de datos que podemos
utilizar:</p>
<ul>
<li>Tabla de datos importada (desde los formatos <code>.xlsx</code>,
<code>.csv</code>, <code>.stata</code>, o <code>.RDS</code>, entre
otros)</li>
<li>Tabla de datos que forma parte de un paquete en R (Ej.
<code>MASS</code>, <code>islands</code>, etc)</li>
<li>Tabla de datos creada durante la sesión en R (Ej. las estructuras de
los primeros ejercicios)</li>
</ul>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="importar-una-tabla-de-datos">Importar una tabla de datos<a class="anchor" aria-label="anchor" href="#importar-una-tabla-de-datos"></a>
</h3>
<p>Para importar una tabla de datos de diferentes fuentes necesitamos
emplear diferentes tipos de funciones.</p>
<p>Aquí algunos ejemplos del tipo de datos, y la librería que es
necesario cargar y la función a utilizar.</p>
<table class="table"><tbody>
<tr class="odd">
<td><strong>Tipo de datos</strong></td>
<td><strong>Función</strong></td>
<td><strong>Paquete</strong></td>
</tr>
<tr class="even">
<td>csv</td>
<td><code>read_csv</code></td>
<td><code>readr</code></td>
</tr>
<tr class="odd">
<td>xls</td>
<td><code>read_excel, read_xls,read_xlsx</code></td>
<td><code>readxl</code></td>
</tr>
<tr class="even">
<td>RDS</td>
<td><code>readRDS</code></td>
<td><code>base</code></td>
</tr>
<tr class="odd">
<td>dta</td>
<td><code>read_dta</code></td>
<td><code>haven</code></td>
</tr>
<tr class="even">
<td>sas</td>
<td><code>read_sas</code></td>
<td><code>haven</code></td>
</tr>
</tbody></table>
<div id="callout2" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Aviso</h3>
<div class="callout-content">
<p><strong>Recordatorio</strong>: Si se desea almacenar los datos en un
objeto se debe usar el operador de asignación.</p>
<p>Ejemplo:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="st">"paquete que contiene la función"</span><span class="op">)</span></span>
<span><span class="va">datos</span> <span class="op">&lt;-</span> <span class="fu">funcion_read</span><span class="op">(</span><span class="st">"direccion_de_los_datos.formato"</span><span class="op">)</span></span></code></pre>
</div>
<center>
<p><a href="https://epiverse-trace.github.io/epitkit/Banco_errores.html" class="external-link"><img src="fig/dudas.png" width="100" class="figure"></a></p>
</center>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="tema-8-manipulación-de-datos-con-tidyverse">Tema 8: Manipulación de datos con <code>tidyverse</code>
<a class="anchor" aria-label="anchor" href="#tema-8-manipulaci%C3%B3n-de-datos-con-tidyverse"></a>
</h2>
<hr class="half-width">
<p><code>tidyverse</code> es una meta-librería que combina varias
librerías. <code>tidyverse</code> viene de la palabra “tidy” que en
inglés hacer referencia a ordenar, limpiar y arreglar, en este caso
hacer estas acciones, pero para los datos. Por tanto,
<code>tidyverse</code> es una manera de referirse al universo de estas
acciones en R.</p>
<p><code>tidyverse</code> al ser una meta-librería va a cargar
automáticamente varias librerías como (<code>dplyr</code>,
<code>tidyr</code>, <code>tibble</code>, <code>readr</code>,
<code>purr</code>, entre otros) que son útiles para la manipulación de
datos.</p>
<p>Para instalar una librería usamos el comando
<code>install.packages</code>. Esto sólo lo debemos hacer una vez en
nuestro computador. Veamos cómo podemos utilizarlo para instalar
tidyverse:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">install.packages</span><span class="op">(</span><span class="st">'tidyverse'</span><span class="op">)</span></span></code></pre>
</div>
<p>Para llamar o importar una librería ya instalada usamos el comando
<code>library</code>. Este en comando debemos ejecutarlo cada vez que
re-iniciamos R o abrimos RStudio.</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">tidyverse</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.1     ✔ tibble    3.2.1
✔ lubridate 1.9.4     ✔ tidyr     1.3.1
✔ purrr     1.0.4
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<center>
<p><a href="https://epiverse-trace.github.io/epitkit/Banco_errores.html" class="external-link"><img src="fig/dudas.png" width="100" class="figure"></a></p>
</center>
<div class="section level3">
<h3 id="abrir-y-explorar-una-tabla-de-datos-importados-de-excel">Abrir y explorar una tabla de datos importados de Excel<a class="anchor" aria-label="anchor" href="#abrir-y-explorar-una-tabla-de-datos-importados-de-excel"></a>
</h3>
<div id="callout3" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Aviso</h3>
<div class="callout-content">
<p>Este es el conjunto de datos para esta práctica: <a href="https://raw.githubusercontent.com/TRACE-LAC/TRACE-LAC-data/main/datos_covid.xlsx" class="external-link">datos_covid.xlsx</a></p>
<p>Dentro del directorio en el que estamos trabajando actualmente,
debemos crear una carpeta llamada <em>data</em>.<br>
Ahora debemos guardar la tabla de datos descargado en la carpeta data
que acabamos de crear.</p>
</div>
</div>
</div>
<p>Para importar tablas de datos desde <code>RDS</code>, se puede usar
la función <code>read_excel</code>, que está en el paquete
<code>readxl</code> vinculado a <code>tidyverse</code>. Sin embargo,
todavía es necesario cargar la biblioteca <code>readxl</code>, ya que no
es un paquete <code>tidyverse</code> principal. Para esto, escribimos en
la consola:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">readxl</span><span class="op">)</span> </span>
<span> </span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu">read_excel</span><span class="op">(</span><span class="st">"data/datos_covid.xlsx"</span><span class="op">)</span></span></code></pre>
</div>
<p>Ahora se ha creado un objeto tipo <code>data.frame</code>. <img src="fig/read_excel.png" class="figure"></p>
<p>A continuación, veremos algunas de las funciones más utilizadas de
<code>tidyverse</code>.</p>
</div>
<div class="section level3">
<h3 id="operador-tubería-pipe">Operador tubería (<em>pipe</em>)<a class="anchor" aria-label="anchor" href="#operador-tuber%C3%ADa-pipe"></a>
</h3>
<p>El operador tubería (<em>pipe</em>) <code>%&gt;%</code> es un
operador clave en <code>tidyverse</code>, el cual permite al usuario
enfatizar una secuencia de acciones en un objeto. Además, el uso de este
operador reduce la cantidad de código y mejora el desempeño.</p>
<p><strong>Ejemplo 1:</strong> En el siguiente diagrama podemos ver el
funcionamiento de la función pipe que permite en este caso aplicar
diferentes funciones a un conjunto de datos y sus resultados.</p>
<figure><img src="fig/pipe.png" class="figure mx-auto d-block"></figure><p>(Ilustración adaptada por Maria Paula Forero)</p>
<p>Vamos a comparar el código cuando usamos vs cuando no usamos el pipe.
Para esto, debemos cargar la librería dplyr y vamos a hacer una tabla de
datos de ejemplo</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">dplyr</span><span class="op">)</span> <span class="co"># Esta librería se carga automáticamente con tidyverserse </span></span>
<span></span>
<span><span class="va">datos</span> <span class="op">&lt;-</span> <span class="fu">data.frame</span><span class="op">(</span>edad <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">12</span>, <span class="fl">23</span>, <span class="fl">32</span>, <span class="fl">60</span><span class="op">)</span>, dosis <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>El código del diagrama anterior sin el uso del operador <em>pipe</em>
sería el siguiente :</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos_filtrados</span> <span class="op">&lt;-</span> <span class="fu">filter</span><span class="op">(</span><span class="va">datos</span>, <span class="va">edad</span> <span class="op">&gt;</span> <span class="fl">18</span><span class="op">)</span> </span>
<span></span>
<span><span class="va">datos_con_esquema</span> <span class="op">&lt;-</span> <span class="fu">mutate</span><span class="op">(</span><span class="va">datos_filtrados</span>, </span>
<span>                            esquema <span class="op">=</span> <span class="fu">ifelse</span><span class="op">(</span><span class="va">dosis</span> <span class="op">&gt;</span> <span class="fl">2</span>, <span class="st">"Completo"</span>, <span class="st">"Incompleto"</span><span class="op">)</span><span class="op">)</span> </span>
<span></span>
<span><span class="va">datos_agrupados</span> <span class="op">&lt;-</span> <span class="fu">group_by</span><span class="op">(</span><span class="va">datos_con_esquema</span>, <span class="va">esquema</span><span class="op">)</span></span>
<span></span>
<span><span class="va">datos_por_esquema</span> <span class="op">&lt;-</span> <span class="fu">summarise</span><span class="op">(</span><span class="va">datos_agrupados</span>, personas <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>Ahora, con la ayuda de una tubería o <em>pipe</em>, tenemos:</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos_por_esquema</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">datos</span>, <span class="va">edad</span> <span class="op">&gt;</span> <span class="fl">18</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span> esquema <span class="op">=</span> <span class="fu">ifelse</span><span class="op">(</span><span class="va">dosis</span> <span class="op">&gt;</span> <span class="fl">2</span>, <span class="st">"Completo"</span>, <span class="st">"Incompleto"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">esquema</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">summarise</span><span class="op">(</span>personas <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div id="funciones-básicas-de-tidyverse" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="funciones-básicas-de-tidyverse" class="callout-inner">
<h3 class="callout-title">Funciones básicas de
<code>tidyverse</code>
</h3>
<div class="callout-content">
<ul>
<li><p><strong><code>glimpse()</code></strong>: utilizado para explorar
rápidamente una tabla de datos.</p></li>
<li><p><strong><code>group_by()</code></strong>: crea grupos dentro de
una tabla de datos.</p></li>
<li><p><strong><code>summarise()</code></strong>: devuelve una fila para
cada combinación de variables que han sido agrupadas</p></li>
<li><p><strong><code>select()</code></strong>: selecciona columnas de
una tabla de datos.</p></li>
<li><p><strong><code>filter()</code></strong>: filtra filas de una tabla
de datos según una condición de valores.</p></li>
<li><p><strong><code>arrange()</code></strong>: ordena filas de una
tabla de datos por el valor de una variable particular si es numérico, o
por orden alfabético si es un carácter.</p></li>
<li><p><strong><code>mutate()</code></strong>: genera una nueva
variable</p></li>
<li><p><strong><code>rename()</code></strong>: cambia el nombre de la
variable</p></li>
</ul>
</div>
</div>
</div>
<p>Veamos en más detalle las funciones más comunes del paquete
<code>dyplr</code> dentro de <code>tidyverse</code>.</p>
<ul>
<li>
<p><strong><code>glimpse</code></strong>
<strong>(parpadeo)</strong></p>
<p>Esta función se utiliza para dar un vistazo rápido o parpadeo a
nuestros datos y explorar información como: número de filas (que en este
caso sería el número de observaciones o datos de nuestra población),
número de columnas y sus nombres (que en este caso serían el número de
variables y sus nombres). Entre “&lt; &gt;” encontraremos el tipo de
dato (<code>dbl</code> para double, <code>chr</code> para character,
entre otros) y un breve listado de algunos de los primeros valores de
los datos. Por ejemplo, la función <code>glimpse</code> se puede aplicar
sobre el elemento <em>dat</em> (que se cargó arriba), así:</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat</span> <span class="op">%&gt;%</span> <span class="fu">glimpse</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Rows: 50,000
Columns: 19
$ fecha_reporte_web                     &lt;dttm&gt; 2021-07-14, 2021-04-24, 2021-05…
$ id_de_caso                            &lt;dbl&gt; 4565159, 2747373, 2963299, 15526…
$ fecha_de_notificacion                 &lt;dttm&gt; 2021-07-07, 2021-04-21, 2021-05…
$ edad                                  &lt;dbl&gt; 23, 15, 11, 39, 25, 8, 53, 29, 4…
$ sexo                                  &lt;chr&gt; "masculino", "femenino", "mascul…
$ tipo_de_contagio                      &lt;chr&gt; "Comunitaria", "Relacionado", "R…
$ ubicacion_del_caso                    &lt;chr&gt; "Casa", "Casa", "Casa", "Casa", …
$ estado                                &lt;chr&gt; "Leve", "Leve", "Leve", "Leve", …
$ recuperado                            &lt;chr&gt; "Recuperado", "Recuperado", "Rec…
$ fecha_de_inicio_de_sintomas           &lt;dttm&gt; 2021-06-22, 2021-04-16, 2021-04…
$ fecha_de_muerte                       &lt;dttm&gt; NA, NA, NA, NA, NA, NA, NA, NA,…
$ fecha_de_diagnostico                  &lt;dttm&gt; 2021-07-07, 2021-04-23, 2021-05…
$ fecha_de_recuperacion                 &lt;dttm&gt; 2021-07-15, 2021-05-05, 2021-05…
$ fecha_de_nacimiento                   &lt;dttm&gt; 1975-06-23, 1975-07-01, 1975-07…
$ nombre_del_pais                       &lt;chr&gt; "Argentina", "Paraguay", "Ecuado…
$ sintomas                              &lt;chr&gt; "Leve", "Leve", "Leve", "Leve", …
$ numero_de_hospitalizaciones_recientes &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0,…
$ tension_sistolica                     &lt;dbl&gt; 105, 122, 121, 101, 101, 134, 10…
$ tension_diastolica                    &lt;dbl&gt; 83, 72, 85, 69, 101, 80, 85, 67,…</code></pre>
</div>
</li>
<li>
<p><strong><code>summarise</code> (resumir)</strong></p>
<p>La función <code>summarise</code> nos permite aplicar ciertas
operaciones de interés sobre una tabla de datos. Por ejemplo, para
calcular la media de la edad, utilizamos la función <code>mean()</code>
y para el conteo total de casos la función <code>n()</code>:</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat</span> <span class="op">%&gt;%</span> <span class="fu">summarise</span><span class="op">(</span>media <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">edad</span><span class="op">)</span>, casos<span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 1 × 2
  media casos
  &lt;dbl&gt; &lt;int&gt;
1  40.1 50000</code></pre>
</div>
</li>
<li><p><strong><code>group_by</code> (agrupar)</strong></p></li>
</ul>
<p>La función <code>group_by</code> no tiene un uso evidente si es
empleada sola, dado que ocurre un proceso interno de agrupación de los
datos. Pero, al ser usada con otras funciones como por ejemplo
<code>summarise</code> es posible ver su efecto. Por ejemplo, el
siguiente comando agrupa los datos por sexo y calcula, para cada grupo
el conteo de casos y su correspondiente media de la edad:</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat</span> <span class="op">%&gt;%</span> <span class="fu">group_by</span><span class="op">(</span><span class="va">sexo</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">summarise</span><span class="op">(</span>casos <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span>, media_edad <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">edad</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 2 × 3
  sexo      casos media_edad
  &lt;chr&gt;     &lt;int&gt;      &lt;dbl&gt;
1 femenino  26799       40.3
2 masculino 23201       39.9</code></pre>
</div>
<ul>
<li>
<p><strong><code>select</code> (seleccionar)</strong></p>
<p>La función <code>select</code> es útil en caso de querer seleccionar
una o varias columnas de un <code>data.frame</code> o tabla de datos.
Por ejemplo, se pueden seleccionar las variables edad y sexo de
<em>dat</em> mediante el siguiente comando:</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat</span> <span class="op">%&gt;%</span> <span class="fu">select</span><span class="op">(</span><span class="va">edad</span>, <span class="va">sexo</span><span class="op">)</span> <span class="co">#empleando el nombre de la columna</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 50,000 × 2
    edad sexo
   &lt;dbl&gt; &lt;chr&gt;
 1    23 masculino
 2    15 femenino
 3    11 masculino
 4    39 femenino
 5    25 masculino
 6     8 femenino
 7    53 masculino
 8    29 masculino
 9    41 femenino
10    61 masculino
# ℹ 49,990 more rows</code></pre>
</div>
</li>
<li><p><strong><code>filter</code> (filtrar)</strong></p></li>
</ul>
<p>Esta función se puede usar para filtrar una tabla de datos a partir
de una condición lógica del valor de sus filas. Por ejemplo, para
filtrar los registros menores de 28 años, usamos:</p>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat</span> <span class="op">%&gt;%</span> <span class="fu">filter</span><span class="op">(</span><span class="va">edad</span> <span class="op">&lt;</span> <span class="fl">28</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 13,235 × 19
   fecha_reporte_web   id_de_caso fecha_de_notificacion  edad sexo
   &lt;dttm&gt;                   &lt;dbl&gt; &lt;dttm&gt;                &lt;dbl&gt; &lt;chr&gt;
 1 2021-07-14 00:00:00    4565159 2021-07-07 00:00:00      23 masculino
 2 2021-04-24 00:00:00    2747373 2021-04-21 00:00:00      15 femenino
 3 2021-05-07 00:00:00    2963299 2021-05-04 00:00:00      11 masculino
 4 2020-10-26 00:00:00    1018415 2020-10-23 00:00:00      25 masculino
 5 2020-08-09 00:00:00     380193 2020-07-25 00:00:00       8 femenino
 6 2020-09-25 00:00:00     798355 2020-09-25 00:00:00      13 femenino
 7 2022-07-07 00:00:00    6184438 2022-07-03 00:00:00      23 masculino
 8 2020-11-26 00:00:00    1276271 2020-11-11 00:00:00      26 femenino
 9 2020-12-27 00:00:00    1592983 2020-12-13 00:00:00      25 femenino
10 2022-01-26 00:00:00    5798751 2022-01-22 00:00:00      18 femenino
# ℹ 13,225 more rows
# ℹ 14 more variables: tipo_de_contagio &lt;chr&gt;, ubicacion_del_caso &lt;chr&gt;,
#   estado &lt;chr&gt;, recuperado &lt;chr&gt;, fecha_de_inicio_de_sintomas &lt;dttm&gt;,
#   fecha_de_muerte &lt;dttm&gt;, fecha_de_diagnostico &lt;dttm&gt;,
#   fecha_de_recuperacion &lt;dttm&gt;, fecha_de_nacimiento &lt;dttm&gt;,
#   nombre_del_pais &lt;chr&gt;, sintomas &lt;chr&gt;,
#   numero_de_hospitalizaciones_recientes &lt;dbl&gt;, tension_sistolica &lt;dbl&gt;, …</code></pre>
</div>
<p>Como se puede observar, el resultado contiene todas las variables de
la tabla, pero los datos se limitan a aquellos que en edad sean menores
de 28 años. Ahora, filtremos por los registros que tengan una edad menor
a 28 años y con sexo femenino. En este caso, al pedir que se incluyan
adicionalmente los registros de 28 años también ya no se emplea
únicamente el signo “&lt;” sino que se lo acompaña del símbolo “=”:</p>
<p>Veamos un ejemplo con doble fitro:</p>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat</span> <span class="op">%&gt;%</span> <span class="fu">filter</span><span class="op">(</span><span class="va">sexo</span> <span class="op">==</span> <span class="st">"F"</span>, <span class="va">edad</span> <span class="op">&lt;=</span> <span class="fl">28</span><span class="op">)</span> <span class="co">#Ahora sabe como filtrar el sexo</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="co"># A tibble: 0 × 19</span></span>
<span><span class="co"># ℹ 19 variables: fecha_reporte_web &lt;dttm&gt;, id_de_caso &lt;dbl&gt;,</span></span>
<span><span class="co">#   fecha_de_notificacion &lt;dttm&gt;, edad &lt;dbl&gt;, sexo &lt;chr&gt;,</span></span>
<span><span class="co">#   tipo_de_contagio &lt;chr&gt;, ubicacion_del_caso &lt;chr&gt;, estado &lt;chr&gt;,</span></span>
<span><span class="co">#   recuperado &lt;chr&gt;, fecha_de_inicio_de_sintomas &lt;dttm&gt;,</span></span>
<span><span class="co">#   fecha_de_muerte &lt;dttm&gt;, fecha_de_diagnostico &lt;dttm&gt;,</span></span>
<span><span class="co">#   fecha_de_recuperacion &lt;dttm&gt;, fecha_de_nacimiento &lt;dttm&gt;,</span></span>
<span><span class="co">#   nombre_del_pais &lt;chr&gt;, sintomas &lt;chr&gt;, …</span></span></code></pre>
</div>
<ul>
<li><strong><code>arrange</code> (organizar)</strong></li>
</ul>
<p>Para los casos donde se necesita organizar los datos por una o más
variables, se puede emplear la función <code>arrange</code>. Por
ejemplo, para organizar los datos por edad, o por edad y sexo:</p>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat</span> <span class="op">%&gt;%</span> <span class="fu">arrange</span><span class="op">(</span><span class="va">edad</span><span class="op">)</span> </span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 50,000 × 19
   fecha_reporte_web   id_de_caso fecha_de_notificacion  edad sexo
   &lt;dttm&gt;                   &lt;dbl&gt; &lt;dttm&gt;                &lt;dbl&gt; &lt;chr&gt;
 1 2021-06-19 00:00:00    3896591 2021-06-17 00:00:00       1 femenino
 2 2021-04-11 00:00:00    2525260 2021-04-07 00:00:00       1 femenino
 3 2022-07-28 00:00:00    6264159 2022-07-25 00:00:00       1 masculino
 4 2022-01-03 00:00:00    5184827 2021-12-26 00:00:00       1 masculino
 5 2022-02-19 00:00:00    6039958 2022-02-16 00:00:00       1 femenino
 6 2021-10-07 00:00:00    4967494 2021-09-24 00:00:00       1 masculino
 7 2022-01-13 00:00:00    5410872 2021-12-30 00:00:00       1 masculino
 8 2021-06-23 00:00:00    4006796 2021-06-18 00:00:00       1 masculino
 9 2020-09-02 00:00:00     628110 2020-08-21 00:00:00       1 masculino
10 2021-07-09 00:00:00    4453365 2021-06-29 00:00:00       1 femenino
# ℹ 49,990 more rows
# ℹ 14 more variables: tipo_de_contagio &lt;chr&gt;, ubicacion_del_caso &lt;chr&gt;,
#   estado &lt;chr&gt;, recuperado &lt;chr&gt;, fecha_de_inicio_de_sintomas &lt;dttm&gt;,
#   fecha_de_muerte &lt;dttm&gt;, fecha_de_diagnostico &lt;dttm&gt;,
#   fecha_de_recuperacion &lt;dttm&gt;, fecha_de_nacimiento &lt;dttm&gt;,
#   nombre_del_pais &lt;chr&gt;, sintomas &lt;chr&gt;,
#   numero_de_hospitalizaciones_recientes &lt;dbl&gt;, tension_sistolica &lt;dbl&gt;, …</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat</span> <span class="op">%&gt;%</span> <span class="fu">arrange</span><span class="op">(</span><span class="va">edad</span>,<span class="va">sexo</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 50,000 × 19
   fecha_reporte_web   id_de_caso fecha_de_notificacion  edad sexo
   &lt;dttm&gt;                   &lt;dbl&gt; &lt;dttm&gt;                &lt;dbl&gt; &lt;chr&gt;
 1 2021-06-19 00:00:00    3896591 2021-06-17 00:00:00       1 femenino
 2 2021-04-11 00:00:00    2525260 2021-04-07 00:00:00       1 femenino
 3 2022-02-19 00:00:00    6039958 2022-02-16 00:00:00       1 femenino
 4 2021-07-09 00:00:00    4453365 2021-06-29 00:00:00       1 femenino
 5 2020-12-28 00:00:00    1596742 2020-12-24 00:00:00       1 femenino
 6 2021-08-29 00:00:00    4905206 2021-08-12 00:00:00       1 femenino
 7 2022-07-28 00:00:00    6263673 2022-07-24 00:00:00       1 femenino
 8 2020-10-14 00:00:00     929871 2020-10-02 00:00:00       1 femenino
 9 2021-03-28 00:00:00    2381786 2021-03-25 00:00:00       1 femenino
10 2021-01-06 00:00:00    1708679 2021-01-04 00:00:00       1 femenino
# ℹ 49,990 more rows
# ℹ 14 more variables: tipo_de_contagio &lt;chr&gt;, ubicacion_del_caso &lt;chr&gt;,
#   estado &lt;chr&gt;, recuperado &lt;chr&gt;, fecha_de_inicio_de_sintomas &lt;dttm&gt;,
#   fecha_de_muerte &lt;dttm&gt;, fecha_de_diagnostico &lt;dttm&gt;,
#   fecha_de_recuperacion &lt;dttm&gt;, fecha_de_nacimiento &lt;dttm&gt;,
#   nombre_del_pais &lt;chr&gt;, sintomas &lt;chr&gt;,
#   numero_de_hospitalizaciones_recientes &lt;dbl&gt;, tension_sistolica &lt;dbl&gt;, …</code></pre>
</div>
<p>Por configuración predeterminada la función organiza los valores de
menor a mayor; en caso de querer organizarlos de mayor a menor se puede
emplear <code>desc</code> al interior de la función
<code>arrange</code>.</p>
<div class="codewrapper sourceCode" id="cb40">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat</span> <span class="op">%&gt;%</span> <span class="fu">arrange</span><span class="op">(</span><span class="fu">desc</span><span class="op">(</span><span class="va">edad</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 50,000 × 19
   fecha_reporte_web   id_de_caso fecha_de_notificacion  edad sexo
   &lt;dttm&gt;                   &lt;dbl&gt; &lt;dttm&gt;                &lt;dbl&gt; &lt;chr&gt;
 1 2021-06-27 00:00:00    4128658 2021-06-25 00:00:00     101 femenino
 2 2022-02-03 00:00:00    5928342 2022-01-28 00:00:00     101 femenino
 3 2021-04-17 00:00:00    2625780 2021-04-16 00:00:00     101 femenino
 4 2021-07-14 00:00:00    4557691 2021-07-09 00:00:00     101 femenino
 5 2022-06-30 00:00:00    6153260 2022-06-22 00:00:00     100 femenino
 6 2020-10-16 00:00:00     942890 2020-10-13 00:00:00     100 femenino
 7 2022-02-10 00:00:00    6000702 2022-01-16 00:00:00     100 masculino
 8 2021-07-19 00:00:00    4650913 2021-07-05 00:00:00      99 femenino
 9 2021-06-11 00:00:00    3680598 2021-06-07 00:00:00      99 femenino
10 2021-02-24 00:00:00    2236252 2021-02-23 00:00:00      99 masculino
# ℹ 49,990 more rows
# ℹ 14 more variables: tipo_de_contagio &lt;chr&gt;, ubicacion_del_caso &lt;chr&gt;,
#   estado &lt;chr&gt;, recuperado &lt;chr&gt;, fecha_de_inicio_de_sintomas &lt;dttm&gt;,
#   fecha_de_muerte &lt;dttm&gt;, fecha_de_diagnostico &lt;dttm&gt;,
#   fecha_de_recuperacion &lt;dttm&gt;, fecha_de_nacimiento &lt;dttm&gt;,
#   nombre_del_pais &lt;chr&gt;, sintomas &lt;chr&gt;,
#   numero_de_hospitalizaciones_recientes &lt;dbl&gt;, tension_sistolica &lt;dbl&gt;, …</code></pre>
</div>
<ul>
<li>
<p><strong><code>mutate</code> (mudar)</strong></p>
<p>Para crear una nueva columna con datos en un <code>data.frame</code>
de una ya existente resulta de utilidad la función <code>mutate</code>.
Esta función requiere el nombre de la columna a crear y de la columna de
la que queremos copiar los datos. La columna nueva por configuración
predeterminada se ubicará al final de las variables en la tabla de
datos. En este ejemplo, vamos a crear una variable llamada pais en la
cual usamos la variable <code>nombre_pais</code> pero en forma de
mayúsculas con <code>toupper</code></p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat</span> <span class="op">%&gt;%</span> <span class="fu">mutate</span><span class="op">(</span>SEXO<span class="op">=</span> <span class="fu">toupper</span><span class="op">(</span><span class="va">sexo</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">select</span><span class="op">(</span><span class="va">SEXO</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 50,000 × 1
   SEXO
   &lt;chr&gt;
 1 MASCULINO
 2 FEMENINO
 3 MASCULINO
 4 FEMENINO
 5 MASCULINO
 6 FEMENINO
 7 MASCULINO
 8 MASCULINO
 9 FEMENINO
10 MASCULINO
# ℹ 49,990 more rows</code></pre>
</div>
</li>
<li><p><strong><code>rename</code> (renombrar)</strong></p></li>
</ul>
<p>En caso de que no queramos crear una nueva variable sino renombrar
una ya existente, conviene usar la función <code>rename</code>. Por
ejemplo, para cambiar el nombre <code>nombre_del_pais</code> por el
nombre <code>pais</code> usamos:</p>
<div class="codewrapper sourceCode" id="cb44">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat</span> <span class="op">%&gt;%</span> <span class="fu">rename</span><span class="op">(</span>edad_años <span class="op">=</span> <span class="va">edad</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 50,000 × 19
   fecha_reporte_web   id_de_caso fecha_de_notificacion edad_años sexo
   &lt;dttm&gt;                   &lt;dbl&gt; &lt;dttm&gt;                    &lt;dbl&gt; &lt;chr&gt;
 1 2021-07-14 00:00:00    4565159 2021-07-07 00:00:00          23 masculino
 2 2021-04-24 00:00:00    2747373 2021-04-21 00:00:00          15 femenino
 3 2021-05-07 00:00:00    2963299 2021-05-04 00:00:00          11 masculino
 4 2020-12-24 00:00:00    1552683 2020-12-21 00:00:00          39 femenino
 5 2020-10-26 00:00:00    1018415 2020-10-23 00:00:00          25 masculino
 6 2020-08-09 00:00:00     380193 2020-07-25 00:00:00           8 femenino
 7 2021-06-04 00:00:00    3503818 2021-06-02 00:00:00          53 masculino
 8 2021-05-26 00:00:00    3270945 2021-05-14 00:00:00          29 masculino
 9 2021-02-16 00:00:00    2201217 2021-02-13 00:00:00          41 femenino
10 2020-10-30 00:00:00    1056515 2020-10-26 00:00:00          61 masculino
# ℹ 49,990 more rows
# ℹ 14 more variables: tipo_de_contagio &lt;chr&gt;, ubicacion_del_caso &lt;chr&gt;,
#   estado &lt;chr&gt;, recuperado &lt;chr&gt;, fecha_de_inicio_de_sintomas &lt;dttm&gt;,
#   fecha_de_muerte &lt;dttm&gt;, fecha_de_diagnostico &lt;dttm&gt;,
#   fecha_de_recuperacion &lt;dttm&gt;, fecha_de_nacimiento &lt;dttm&gt;,
#   nombre_del_pais &lt;chr&gt;, sintomas &lt;chr&gt;,
#   numero_de_hospitalizaciones_recientes &lt;dbl&gt;, tension_sistolica &lt;dbl&gt;, …</code></pre>
</div>
<ul>
<li><strong><code>slice</code></strong></li>
</ul>
<p>Ya se vio previamente cómo seleccionar columnas por medio de la
función <code>select</code>. En caso de requerir seleccionar filas
específicas de un <code>data.frame</code>, la función slice resulta de
gran utilidad. Por ejemplo, para seleccionar de la fila 10 a la 15:</p>
<div class="codewrapper sourceCode" id="cb46">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat</span> <span class="op">%&gt;%</span> <span class="fu">slice</span><span class="op">(</span><span class="fl">10</span><span class="op">:</span><span class="fl">15</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 6 × 19
  fecha_reporte_web   id_de_caso fecha_de_notificacion  edad sexo
  &lt;dttm&gt;                   &lt;dbl&gt; &lt;dttm&gt;                &lt;dbl&gt; &lt;chr&gt;
1 2020-10-30 00:00:00    1056515 2020-10-26 00:00:00      61 masculino
2 2020-09-25 00:00:00     798355 2020-09-25 00:00:00      13 femenino
3 2021-01-04 00:00:00    1680221 2020-12-29 00:00:00      57 masculino
4 2022-07-07 00:00:00    6184438 2022-07-03 00:00:00      23 masculino
5 2022-01-16 00:00:00    5535687 2022-01-15 00:00:00      29 masculino
6 2021-05-27 00:00:00    3294426 2021-05-15 00:00:00      52 masculino
# ℹ 14 more variables: tipo_de_contagio &lt;chr&gt;, ubicacion_del_caso &lt;chr&gt;,
#   estado &lt;chr&gt;, recuperado &lt;chr&gt;, fecha_de_inicio_de_sintomas &lt;dttm&gt;,
#   fecha_de_muerte &lt;dttm&gt;, fecha_de_diagnostico &lt;dttm&gt;,
#   fecha_de_recuperacion &lt;dttm&gt;, fecha_de_nacimiento &lt;dttm&gt;,
#   nombre_del_pais &lt;chr&gt;, sintomas &lt;chr&gt;,
#   numero_de_hospitalizaciones_recientes &lt;dbl&gt;, tension_sistolica &lt;dbl&gt;,
#   tension_diastolica &lt;dbl&gt;</code></pre>
</div>
<p>Si se desea modificar un objeto ya creado con estas funciones,
también se debe usar el operador de asignación. Ejemplo:</p>
<div class="codewrapper sourceCode" id="cb48">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">objeto</span> <span class="op">&lt;-</span> <span class="va">objeto</span> <span class="op">%&gt;%</span> <span class="fu">mutate</span><span class="op">(</span>nueva_columna <span class="op">=</span> <span class="va">contenido_nuevo</span><span class="op">)</span></span></code></pre>
</div>
<p>Si se realiza sin asignación el cambio solo se verá reflejado en la
consola. Recuerde tener seguridad de querer guardar el cambio (esta
acción podría ser irreversible). Si quiere conocer más sobre errores
frecuentes y como prevenirlos visite nuestro banco de errores.</p>
<center>
<p><a href="https://epiverse-trace.github.io/epitkit/Banco_errores.html" class="external-link"><img src="fig/dudas.png" width="100" class="figure"></a></p>
</center>
<div id="actividad-de-afianzamiento" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="actividad-de-afianzamiento" class="callout-inner">
<h3 class="callout-title">Actividad de afianzamiento:</h3>
<div class="callout-content">
<p>Para esta actividad, debemos cargar un tipo diferente de datos. En el
siguiente link podrás descargarlos <a href="https://github.com/TRACE-LAC/TRACE-LAC-data/raw/refs/heads/main/otros/datos_limpios_covid.RDS" class="external-link">datos_reto</a>.
Los datos pueden ser cargados desde el computador o desde una ubicación
en internet. Para cargar los datos <code>datos_limpios_covid.RDS</code>
directamente desde internet se deben usar los comandos:</p>
<div class="codewrapper sourceCode" id="cb49">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">url</span> <span class="op">&lt;-</span> <span class="st">"https://github.com/TRACE-LAC/TRACE-LAC-data/raw/refs/heads/main/otros/datos_limpios_covid.RDS"</span></span>
<span></span>
<span><span class="va">covid19</span> <span class="op">&lt;-</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu">read_rds</span><span class="op">(</span><span class="va">url</span><span class="op">)</span></span></code></pre>
</div>
<p>Después de cargar los datos debe realizar lo siguiente:</p>
<ol style="list-style-type: decimal">
<li>Explorar los datos</li>
<li>Agrupar los datos por <code>nombre_del_pais</code> y cuenta los
casos por cada uno.</li>
<li>Filtra los datos para Perú (Tip: observa cómo está escrito el nombre
del país en la variable “<code>nombre_del_pais</code>”).</li>
<li>Agrupa los datos por <code>sexo</code> y cuenta los casos por cada
uno.</li>
<li>Agrupa los datos por <code>nombre_del_pais</code> y calcula la media
de edad de cada uno.</li>
<li>Cambia el nombre de “<code>estado</code>” por
“<code>gravedad</code>”.</li>
<li>Ordena los datos por <code>sexo</code> y selecciona las 5 primeras
filas de cada uno.</li>
<li>Realiza una tabla que muestre cuántas personas de cada
<code>sintoma</code> aparecen en la base ubicados en Colombia.</li>
<li>Selecciona las 5 primeras filas de solo el número de identificación
del caso (<code>id_de_caso</code>).</li>
</ol>
</div>
</div>
</div>
<center>
<p><a href="https://epiverse-trace.github.io/epitkit/Banco_errores.html" class="external-link"><img src="fig/dudas.png" width="100" class="figure"></a></p>
</center>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Puntos Clave</h3>
<div class="callout-content">
<p>Revise si al final de esta lección adquirió estas competencias:</p>
<ul>
<li>Reconocer y hacer uso de R y RStudio.</li>
<li>Conocer los tipos de datos y operados básicos en R.</li>
<li>Comprender las estructuras básicas de datos en R tales como vectores
y tablas de datos.</li>
<li>Comprender el proceso de creación de funciones.</li>
<li>Reconocer el proceso de importación, exportación y transformación de
bases de datos con Tidyverse.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="contribuciones">Contribuciones<a class="anchor" aria-label="anchor" href="#contribuciones"></a>
</h3>
<ul>
<li>Zulma M. Cucunuba: Versión inicial</li>
<li>Zhian N. Kamvar: Ediciones menores</li>
<li>Kelly A. Charniga: Ediciones menores</li>
<li>José M. Velasco-España: Traducción de Inglés a Español y
edición</li>
<li>Andree Valle-Campos: Ediciones menores</li>
<li>Miguel E. Gámez López: Ediciones menores</li>
<li>Nicolás T. Domínguez: Ediciones menores</li>
<li>Laura Gómez-Bermeo: Ediciones menores</li>
<li>Geraldine Gomez: Ediciones menores</li>
<li>Jaime A. Pavlich-Mariscal: Edición</li>
</ul>
</div>
<div class="section level3">
<h3 id="asuntos-legales">Asuntos legales<a class="anchor" aria-label="anchor" href="#asuntos-legales"></a>
</h3>
<p><strong>Copyright</strong>: Zulma M. Cucunuba, 2019</p>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div>
</section></section><section id="aio-Visualizacion"><p>Content from <a href="Visualizacion.html">Introduccion a la visualizacion de datos en R con ggplot2.</a></p>
<hr>
<p>Última actualización: 2025-06-06 |

        <a href="https://github.com/epiverse-trace/epitkit/edit/main/episodes/Visualizacion.Rmd" class="external-link">Mejora esta página <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Mostrar todas las soluciones " data-collapse="Cerrar todas las soluciones "> Mostrar todas las soluciones <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Hoja de ruta</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Preguntas</h3>
<ul>
<li>¿Cómo visualizar datos epidemiologicos con ggplot2?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objetivos</h3>
<p>Al final de este taller usted podrá:</p>
<ul>
<li>Reconocer las funciones que componen el paquete ggplot2.</li>
<li>Realizar gráficos básicos con la estructura de ggplot2</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="prereq1" class="callout prereq">
<div class="callout-square">
<i class="callout-icon" data-feather="check"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Pre requisito</h3>
<div class="callout-content">
<p>Esta unidad tiene como prerequisitos:</p>
<ul>
<li>Introducción a R y RStudio</li>
</ul>
</div>
</div>
</div>
<div id="tabla-de-contenido" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="tabla-de-contenido" class="callout-inner">
<h3 class="callout-title">Tabla de contenido</h3>
<div class="callout-content">
<ul>
<li>Módulo: Ciencia de datos en salud pública
<ul>
<li>Unidad: Introducción a la visualización de datos en R con ggplot2
<ul>
<li>Tema 1: Principios de la gramática de gráficos con
<code>ggplot2</code>
</li>
<li>Tema 2: Gramática de gráficos
<ul>
<li>Datos (Data)</li>
<li>Estética (Aesthetics)</li>
<li>Geometría (Geometry)</li>
<li>Escala (Scale)</li>
<li>Facetas (Facets)</li>
<li>Temas (Themes)</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>
<p><strong>Desarrollo del contenido</strong> (desarrolle cada uno de los
temas teniendo en cuenta la tabla de contenido)</p>
<section><h2 class="section-heading" id="introducción">Introducción<a class="anchor" aria-label="anchor" href="#introducci%C3%B3n"></a>
</h2>
<hr class="half-width">
<p>En el ámbito de la ciencia de datos y la toma de decisiones, la
habilidad para transformar datos en información comprensible y que
genere impacto es esencial. Esta unidad brindará una introducción a las
herramientas necesarias para convertir conjuntos de datos en gráficos.
En esta unidad haremos uso de ggplot2, una poderosa librería de gráficos
de R basada en la gramática de gráficos, para crear visualizaciones
impactantes.</p>
</section><section><h2 class="section-heading" id="tema-1-principios-de-la-gramática-de-gráficos-con-ggplot2">Tema 1: Principios de la gramática de gráficos con
<code>ggplot2</code>
<a class="anchor" aria-label="anchor" href="#tema-1-principios-de-la-gram%C3%A1tica-de-gr%C3%A1ficos-con-ggplot2"></a>
</h2>
<hr class="half-width">
<p><code>ggplot2</code> es un paquete de R basado en la gramática de
gráficos que permite visualizar datos de una manera consistente y
estructurada.</p>
<p><code>ggplot2</code>recibe su nombre precisamente de la abreviación
del término gramática de gráficos (gg). La gramática de gráficos se
refiere a un enfoque conceptual propuesto y desarrollado por Leland
Wilkinson para la creación de gráficos, el cual sirvió como base para el
desarrollo de <code>ggplot2</code> a manos de Hadley Wickham.</p>
<p>La gramática de gráficos proporciona un marco conceptual para pensar
sobre cómo construir y entender visualizaciones de datos de una manera
coherente y estructurada. En términos simples, la gramática de gráficos
descompone un gráfico en sus componentes fundamentales y define cómo se
combinan estos componentes para representar datos.</p>
<div id="estos-componentes-básicos-son" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="estos-componentes-básicos-son" class="callout-inner">
<h3 class="callout-title">Estos componentes básicos son:</h3>
<div class="callout-content">
<p><strong>1. Datos (Data):</strong> representan los datos que queremos
visualizar. Puede ser una tabla de datos (data.frame) en R u otra fuente
de datos.</p>
<p><strong>2. Estética (Aesthetics):</strong> definen cómo se mapean los
atributos de los datos a propiedades visuales del gráfico, como posición
en el eje X (x), posición en el eje Y (y), color, forma, tamaño, etc.
Esto se especifica mediante la función <code>aes()</code> en
<code>ggplot2</code>.</p>
<p><strong>3. Geometría (Geometry):</strong> representa la forma en que
los datos se visualizan en el gráfico, como puntos, líneas, barras,
áreas, etc. Cada tipo de gráfico tiene su función correspondiente
en<code>ggplot2</code>, como geom_point() para un gráfico de dispersión
o geom_bar() para un gráfico de barras.</p>
<p><strong>4. Escala (Scale):</strong> define cómo se mapean los valores
de los datos a los valores visuales, como el rango de colores o el rango
de los ejes. <code>ggplot2</code>ajusta automáticamente las escalas,
pero también podemos <code>ggplot2</code>ajusta automáticamente las
escalas, pero también podemos personalizarlas con funciones como
<code>scale_log10()</code>, <code>scale_x_continuous()</code> o
<code>scale_color_manual()</code>.</p>
<p><strong>5. Facetas (Facets):</strong> permiten dividir los datos en
subconjuntos y mostrarlos en paneles múltiples (facetas) según ciertas
variables. Podemos usar facet_wrap() o <code>facet_grid()</code> en
<code>ggplot2</code>para implementar Podemos usar facet_wrap() o
<code>facet_grid()</code> en <code>ggplot2</code>para implementar esta
funcionalidad.</p>
<p><strong>6. Temas (Themes):</strong> controlan la apariencia visual
general del gráfico, como títulos, etiquetas de ejes, fondos, etc.
Podemos gráfico, como títulos, etiquetas de ejes, fondos, etc. Podemos
personalizar el tema con la función <code>theme()</code> en
<code>ggplot2</code>.</p>
<p>Por ejemplo, una estructura clásica de un gráfico de puntos será:</p>
<pre><code>ggplot(data, \# Los datos

   aes(x, y) \# La estética
)+
   geom_point() \# la geometría</code></pre>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="tema-2-ejemplos-del-uso-de-la-gramática-de-gráficos-con-ggplot">Tema 2: Ejemplos del uso de la gramática de gráficos con ggplot<a class="anchor" aria-label="anchor" href="#tema-2-ejemplos-del-uso-de-la-gram%C3%A1tica-de-gr%C3%A1ficos-con-ggplot"></a>
</h2>
<hr class="half-width">
<p>Aquí vamos a ir explicando cómo puedes hacer uso de esta herramienta
en tu computador. A medida que avanzas trata de ir replicando los
ejercicios.</p>
<div id="nota." class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="nota." class="callout-inner">
<h3 class="callout-title"><strong>NOTA.</strong></h3>
<div class="callout-content">
<p>Para hacer más versátil su uso, se recomienda conocer el
funcionamiento del paquete dplyr y el uso de tuberías (pipes
<code>%&gt;%</code>), puedes repasar estos temas en la Unidad 1 de este
módulo “Introducción a R y RStudio”. Por su parte, <code>ggplot2</code>
está contenido dentro de la librería Tidyverse. Además, Tidiverse
incluye otras librerías como dplyr que, a su vez, incluye las pipes
(<code>%&gt;%</code>). Para más detalles sobre Tidyverse consulta la
unidad de “Introducción a R y RStudio”.</p>
</div>
</div>
</div>
<p>Para los ejercicios prácticos de esta unidad es necesario cargar las
siguientes librerías:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">ggplot2</span><span class="op">)</span> </span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">tidyverse</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ lubridate 1.9.4     ✔ tibble    3.2.1
✔ purrr     1.0.4     ✔ tidyr     1.3.1
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<p>Ahora, veremos cada uno de los componentes para realizar gráficos de
datos con <code>ggplot2</code> a través de un ejercicio práctico. Se
requiere una tabla de datos (una estructura con filas y columnas) para
poder ser usada en la estética de los gráficos. Previo al uso de
<code>ggplot2</code>, suele ser necesario realizar un proceso de
limpieza y organización de los datos. Para este ejercicio práctico
usaremos una base de datos limpia, que nos permita hacer las
visualizaciones sin la necesidad de pre-procesar los datos.</p>
<div id="callout2" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Aviso</h3>
<div class="callout-content">
<p>La tabla de datos para este ejercicio puedes encontrarla en: <a href="https://github.com/TRACE-LAC/TRACE-LAC-data/blob/main/otros/muestra_covid.RDS?raw=true" class="external-link uri">https://github.com/TRACE-LAC/TRACE-LAC-data/blob/main/otros/muestra_covid.RDS?raw=true</a></p>
</div>
</div>
</div>
<p>Cuando ya tengas los datos descargados en tu computador y en la
carpeta de data de tu proyecto puedes ejecutar el siguiente comando:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid19</span> <span class="op">&lt;-</span> <span class="fu">readRDS</span><span class="op">(</span><span class="st">"data/muestra_covid.RDS"</span><span class="op">)</span></span></code></pre>
</div>
<p>Una vez obtenida la tabla de datos vamos a explorar los datos para
conocer el estado actual y revisar qué variables podríamos usar para las
visualizaciones. Para esto utilizamos una de las funciones vistas en la
unidad de “Introducción a R y RStudio” llamada
<code>glimpse.</code>Úsala y verifica la estructura de la tabla de
datos</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">glimpse</span><span class="op">(</span><span class="va">covid19</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Rows: 100,000
Columns: 19
$ fecha_reporte_web                     &lt;date&gt; 2021-04-09, 2021-03-18, 2022-01…
$ id_de_caso                            &lt;dbl&gt; 2493495, 2318883, 5290100, 43526…
$ fecha_de_notificacion                 &lt;date&gt; 2021-03-27, 2021-03-06, 2022-01…
$ edad                                  &lt;dbl&gt; 45, 38, 34, 64, 24, 16, 25, 72, …
$ sexo                                  &lt;fct&gt; femenino, masculino, masculino, …
$ tipo_de_contagio                      &lt;chr&gt; "Comunitaria", "Comunitaria", "C…
$ ubicacion_del_caso                    &lt;chr&gt; "Casa", "Casa", "Casa", "Casa", …
$ estado                                &lt;fct&gt; Leve, Leve, Leve, Leve, Leve, Le…
$ recuperado                            &lt;fct&gt; Recuperado, Recuperado, Recupera…
$ fecha_de_inicio_de_sintomas           &lt;date&gt; 2021-03-24, 2021-03-03, 2022-01…
$ fecha_de_muerte                       &lt;date&gt; NA, NA, NA, NA, NA, NA, NA, NA,…
$ fecha_de_diagnostico                  &lt;date&gt; 2021-04-07, 2021-03-17, 2022-01…
$ fecha_de_recuperacion                 &lt;date&gt; 2021-04-10, 2021-03-19, 2022-01…
$ fecha_de_nacimiento                   &lt;date&gt; 1975-06-01, 1975-06-08, 1975-06…
$ nombre_del_pais                       &lt;chr&gt; "Colombia", "Cuba", "Nicaragua",…
$ sintomas                              &lt;fct&gt; Leve, Leve, Leve, Leve, Leve, Le…
$ numero_de_hospitalizaciones_recientes &lt;dbl&gt; 0, 2, 1, 0, 0, 0, 0, 0, 0, 0, 1,…
$ tension_sistolica                     &lt;dbl&gt; 107, 126, 107, 134, 126, 156, 14…
$ tension_diastolica                    &lt;dbl&gt; 87, 64, 73, 76, 83, 96, 76, 87, …</code></pre>
</div>
<div class="section level3">
<h3 id="estética-aesthetics">Estética (Aesthetics)<a class="anchor" aria-label="anchor" href="#est%C3%A9tica-aesthetics"></a>
</h3>
<p>En el contexto de la gramática de gráficos, la estética (aesthetics)
se refiere a cómo mapeamos los atributos de nuestros datos a propiedades
visuales en el gráfico. Estas propiedades visuales pueden ser elementos
tales como la posición en el eje X (x), la posición en el eje Y (y), el
color (color), la forma(shape), el tamaño(size), etc. Al mapear estos
atributos podemos crear visualizaciones que nos permiten comprender y
comunicar patrones y relaciones en los datos de manera efectiva.</p>
<p>En <code>ggplot2</code> la función principal para especificar la
estética es <code>aes()</code>. A continuación algunos ejemplos para
ilustrar cómo usar la estética en <code>ggplot2</code>.</p>
<div class="section level4">
<h4 id="ejemplo-1-gráfico-de-dispersión-scatter-plot">Ejemplo 1: Gráfico de dispersión (scatter plot)<a class="anchor" aria-label="anchor" href="#ejemplo-1-gr%C3%A1fico-de-dispersi%C3%B3n-scatter-plot"></a>
</h4>
<p>Supongamos que tenemos una tabla que cuenta con las variables x e
y<em>.</em> Queremos crear un gráfico de dispersión donde la variable x
se mapea en el eje X y la variable y en el eje Y. Además, queremos que
los puntos se coloreen según la variable grupo. Mediante la función
<code>aes()</code> de <code>ggplot2</code> es posible asignar estas
variables a los correspondientes atributos visuales del gráfico, como
veremos en el ejemplo a continuación.</p>
<p>Consideremos la base covid19 que cargamos previamente. El
requerimiento es realizar un gráfico de dispersión que muestre el número
de casos por fecha de reporte y desagregados por sexo. Para esto,
primero organizamos los datos para lograr una tabla resumen con la
información que queremos graficar, usando las funciones vistas en la
unidad de “Introducción a R y RStudio” de la siguiente manera:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid19_resumen</span> <span class="op">&lt;-</span> <span class="va">covid19</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">fecha_reporte_web</span>, <span class="va">sexo</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">summarise</span><span class="op">(</span>casos <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>`summarise()` has grouped output by 'fecha_reporte_web'. You can override using
the `.groups` argument.</code></pre>
</div>
<p>Luego, podemos usar la estética de los gráficos de
<code>ggplot2</code> indicando las variables a usar en cada dimensión,
en este caso en el eje X tendremos la variable de tiempo
(fecha_reporte_web) y en el eje Y el número de casos (casos). Para ver
la desagregación por sexo haremos uso de uno de los atributos como el
color. Estas instrucciones pueden seguirse a través del siguiente
código:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">covid19_resumen</span>,</span>
<span>       <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">fecha_reporte_web</span>, y <span class="op">=</span> <span class="va">casos</span>, colour <span class="op">=</span> <span class="va">sexo</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p>La visualización que generamos es la siguiente:</p>
<figure><img src="fig/Visualizacion-rendered-unnamed-chunk-7-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure>
</div>
</div>
<div class="section level3">
<h3 id="geometría-geometry">Geometría (Geometry)<a class="anchor" aria-label="anchor" href="#geometr%C3%ADa-geometry"></a>
</h3>
<p>La geometría representa la forma en que los datos se visualizan en el
gráfico; como puntos, líneas, barras, áreas, etc. Cada tipo de gráfico
tiene su función correspondiente en <code>ggplot2</code>; por ejemplo
<code>geom_point()</code> para un gráfico de dispersión o
<code>geom_bar()</code> para un gráfico de barras.</p>
<div id="checklist3" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Lista de verificación</h3>
<div class="callout-content">
<p>En la siguiente tabla se muestran algunos ejemplos de los distintos
tipos de geometrías más usados en <code>ggplot2</code> con su
correspondiente comando:</p>
<figure><img src="fig/tipogeom.png" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
<div class="section level4">
<h4 id="ejemplo-2-gráfico-de-líneas">Ejemplo 2: Gráfico de líneas<a class="anchor" aria-label="anchor" href="#ejemplo-2-gr%C3%A1fico-de-l%C3%ADneas"></a>
</h4>
<p>Supongamos que queremos visualizar la evolución del número de casos
de covid-19 a lo largo del tiempo. Para esto, primero debemos preparar
el conjunto de datos que formarán el gráfico:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid19_fecha</span> <span class="op">&lt;-</span> <span class="va">covid19</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">fecha_reporte_web</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">summarise</span><span class="op">(</span>casos <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>Una vez el conjunto de datos esté listo, procedemos a usar la
geometría de <code>ggplot2</code>:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">covid19_fecha</span>, </span>
<span>       <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">fecha_reporte_web</span>, y <span class="op">=</span> <span class="va">casos</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p>Y obtenemos el siguiente gráfico:</p>
<figure><img src="fig/Visualizacion-rendered-unnamed-chunk-10-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure>
</div>
<div class="section level4">
<h4 id="ejemplo-3-gráfico-de-barras">Ejemplo 3: Gráfico de barras<a class="anchor" aria-label="anchor" href="#ejemplo-3-gr%C3%A1fico-de-barras"></a>
</h4>
<p>Ahora, hagamos una visualización en forma de gráfico de barras del
total de casos positivos por sexo, para esto utilizamos el comando
<code>geom_bar()</code> así:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">covid19</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">sexo</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/Visualizacion-rendered-unnamed-chunk-11-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>En este ejemplo podemos observar que <code>ggplot2</code>
automáticamente calcula el eje Y.</p>
</div>
<div class="section level4">
<h4 id="ejemplo-4--gráfico-de-barras-más-complejo">Ejemplo 4. Gráfico de barras más complejo<a class="anchor" aria-label="anchor" href="#ejemplo-4--gr%C3%A1fico-de-barras-m%C3%A1s-complejo"></a>
</h4>
<p>Primero vamos a preparar los datos en una tabla de datos que permita
contar el número de casos por ubicación del caso:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid19_ubicacion</span> <span class="op">&lt;-</span> <span class="va">covid19</span> <span class="op">%&gt;%</span>  </span>
<span><span class="fu">group_by</span><span class="op">(</span><span class="va">ubicacion_del_caso</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">summarise</span><span class="op">(</span>casos <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>Ahora, por medio de la geometría de <code>ggplot</code>, hacemos la
visualización usando el argumento <code>stat = "identity"</code> que
calcula la suma de la variable <code>y = casos</code> agrupando por la
variable <code>x = ubicacion_del_caso</code>:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">covid19_ubicacion</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">ubicacion_del_caso</span>, y <span class="op">=</span> <span class="va">casos</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span><span class="op">)</span></span></code></pre>
</div>
<p>Se obtendrá la siguiente gráfica:</p>
<figure><img src="fig/Visualizacion-rendered-unnamed-chunk-14-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>En este caso tenemos las barras en orientación vertical. Si
desearamos poner las barras en orientación horizontal podemos lograrlo,
usando al final el comando <code>coord_flip</code> de la siguiente
manera:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">covid19_ubicacion</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">ubicacion_del_caso</span>, y <span class="op">=</span> <span class="va">casos</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">coord_flip</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p>Obteniendo como resultado:</p>
<figure><img src="fig/Visualizacion-rendered-unnamed-chunk-16-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Si queremos ordenar la ubicación del caso por el número de casos,
podemos utilizar el comando <code>reorder</code> en el eje donde está la
ubicación del caso. La función <code>reorder</code> tiene dos
argumentos: el primero es la variable a ordenar y el segundo es la
variable que otorga el orden. En este caso sería
<code>reorder(ubicacion_del_caso, +casos)</code> si queremos ordenar de
mayor a menor cantidad de casos. El código sería el siguiente:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span><span class="va">covid19_ubicacion</span>, </span>
<span>       <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="fu">reorder</span><span class="op">(</span><span class="va">ubicacion_del_caso</span>, <span class="op">+</span><span class="va">casos</span><span class="op">)</span>, y <span class="op">=</span> <span class="va">casos</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">coord_flip</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p>Y la gráfica queda así:</p>
<figure><img src="fig/Visualizacion-rendered-unnamed-chunk-18-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><div id="discussion1" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Desafío</h3>
<div class="callout-content">
<p>Pregunta ¿cómo produciría esta misma gráfica, pero en orden
ascendente?</p>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="escala">Escala<a class="anchor" aria-label="anchor" href="#escala"></a>
</h3>
<p>En la gramática de gráficos en <code>ggplot2</code>, la escala se
refiere a la forma en que los valores de los datos se traducen en
propiedades visuales. La elección adecuada de las escalas es esencial
para que los gráficos sean interpretables y precisos.</p>
<p>A continuación, veremos algunos de los diferentes tipos de escalas
disponibles en <code>ggplot2</code> y sus funciones:</p>
<div id="para-datos-de-tipo-continuo-o-numéricos-tenemos-escalas-continuas-como" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="para-datos-de-tipo-continuo-o-numéricos-tenemos-escalas-continuas-como" class="callout-inner">
<h3 class="callout-title">1. Para <strong>datos de tipo continuo o
numéricos</strong> tenemos <strong>escalas continuas como:</strong>
</h3>
<div class="callout-content">
<ul>
<li><p><code>scale_x_continuous()</code> y
<code>scale_y_continuous()</code> : para el eje x y el eje y,
respectivamente.</p></li>
<li><p><code>scale_color_continuous()</code>: asigna colores a los
valores continuos.</p></li>
<li><p><code>scale_size_continuous()</code>: asigna tamaño a los
valores.</p></li>
</ul>
</div>
</div>
</div>
<div id="para-datos-categóricos-o-de-carácter-tenemos-escalas-discretas-como" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="para-datos-categóricos-o-de-carácter-tenemos-escalas-discretas-como" class="callout-inner">
<h3 class="callout-title">2. Para <strong>datos categóricos o de
carácter</strong> tenemos escalas discretas como:</h3>
<div class="callout-content">
<ul>
<li><p><code>scale_x_discrete()</code> y
<code>scale_y_discrete()</code>: para el eje x y el eje y,
respectivamente.</p></li>
<li><p><code>scale_color_discrete()</code>: asigna colores a los valores
discretos.</p></li>
<li><p><code>scale_shape_discrete()</code>: asigna diferentes formas a
los diferentes valores discretos.</p></li>
</ul>
</div>
</div>
</div>
<div id="para-datos-de-fecha-tenemos-escalas-de-fechas-como" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="para-datos-de-fecha-tenemos-escalas-de-fechas-como" class="callout-inner">
<h3 class="callout-title">3. Para <strong>datos de fecha</strong>
tenemos escalas de fechas como:</h3>
<div class="callout-content">
<ul>
<li>
<code>scale_x_date()</code> y <code>scale_y_date()</code>: para el
eje x y el eje y, respectivamente cuando se tengan datos de fecha.</li>
</ul>
</div>
</div>
</div>
<div id="para-hacer-uso-de-escalas-personalizadas-se-hace-uso-de-escalas-manuales-en-las-que-podemos-especificar-nuestros-propios-valores." class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="para-hacer-uso-de-escalas-personalizadas-se-hace-uso-de-escalas-manuales-en-las-que-podemos-especificar-nuestros-propios-valores." class="callout-inner">
<h3 class="callout-title">4. Para hacer uso de escalas personalizadas se hace uso de escalas manuales en las que podemos especificar nuestros
propios valores.</h3>
<div class="callout-content">
<ul>
<li><p><code>scale_color_manual()</code>: se especifica manualmente los
colores para los valores.</p></li>
<li><p><code>scale_shape_manual()</code>: se especifica manualmente las
formas para los valores.</p></li>
</ul>
</div>
</div>
</div>
<div id="otras-escalas" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="otras-escalas" class="callout-inner">
<h3 class="callout-title">5. Otras escalas:</h3>
<div class="callout-content">
<ul>
<li><p><code>scale_fill_*</code>: se usa similar a las escalas de color
pero para colores que queramos con relleno.</p></li>
<li><p><code>scale_size_area()</code>: Asigna los valores al área en
lugar del diámetro, lo que puede ser útil para los puntos.</p></li>
<li><p><code>scale_linetype()</code>: para diferente tipos de
línea</p></li>
<li><p><code>scale_y_log10()</code>: para hacer uso de escala
logarítmica en eje y.</p></li>
<li><p><code>scale_colour_gradient()</code>: crea un degradé de color
entre bajo y alto o <code>scale_colour_gradient2()</code> en bajo, medio
y alto.</p></li>
</ul>
<p>A continuación, veremos algunos ejemplos de cómo usar la escala en
<code>ggplot2</code>con el <code>data.frame</code> previamente cargada
<code>covid19</code>.</p>
</div>
</div>
</div>
<center>
<p><a href="https://epiverse-trace.github.io/epitkit/Banco_errores.html" class="external-link"><img src="fig/dudas.png" width="100" class="figure"></a></p>
</center>
<div class="section level4">
<h4 id="ejemplo-5--gráfico-con-escala-logarítmica">Ejemplo 5. Gráfico con escala logarítmica<a class="anchor" aria-label="anchor" href="#ejemplo-5--gr%C3%A1fico-con-escala-logar%C3%ADtmica"></a>
</h4>
<p>Usaremos exactamente el mismo ejemplo anterior, pero en este caso al
final agregamos la escala <code>logarítmica scale_y_log10()</code>
así:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span><span class="va">covid19_ubicacion</span>, </span>
<span>       <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="fu">reorder</span><span class="op">(</span><span class="va">ubicacion_del_caso</span>, <span class="op">-</span><span class="va">casos</span><span class="op">)</span>, y <span class="op">=</span> <span class="va">casos</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">coord_flip</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_y_log10</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Casos Confirmados (escala log)"</span><span class="op">)</span></span></code></pre>
</div>
<p>De esta manera, el nuevo gráfico se vería así:</p>
<figure><img src="fig/Visualizacion-rendered-unnamed-chunk-20-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><div id="discussion2" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Discusión</h3>
<div class="callout-content">
<p>¿Qué diferencias ve con la última gráfica del Ejemplo 4.?</p>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="facetas">Facetas<a class="anchor" aria-label="anchor" href="#facetas"></a>
</h3>
<p>Las Facetas (<code>Facets</code>) en la gramática de gráficos son una
forma de dividir los datos en subconjuntos y representarlos en múltiples
paneles dentro del mismo gráfico. Esto nos permite visualizar diferentes
aspectos de los datos o comparar grupos de manera más efectiva. En
<code>ggplot2</code>, podemos usar la función <code>facet_wrap()</code>
o <code>facet_grid()</code> para implementar las facetas, dependiendo
del número de variables a usar para la creación de los paneles.</p>
<div class="section level4">
<h4 id="ejemplo-5--gráfico-con-facet-wrap">Ejemplo 5. Gráfico con facet wrap<a class="anchor" aria-label="anchor" href="#ejemplo-5--gr%C3%A1fico-con-facet-wrap"></a>
</h4>
<p>Primero vamos a preparar los datos en una tabla de datos que permita
contar el número de casos por <code>edad</code> y <code>sexo</code>:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid19_sexo</span> <span class="op">&lt;-</span> <span class="va">covid19</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">edad</span>, <span class="va">sexo</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">summarise</span><span class="op">(</span>casos <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>`summarise()` has grouped output by 'edad'. You can override using the
`.groups` argument.</code></pre>
</div>
<p>Usando los datos de <code>covid-19</code>, vamos a representar la
variable <code>casos</code> por <code>edad</code> en dos paneles por
<code>sexo</code> usando <code>facet_wrap</code> así:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">covid19_sexo</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">edad</span>, y <span class="op">=</span> <span class="va">casos</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">facet_wrap</span><span class="op">(</span><span class="op">~</span><span class="va">sexo</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/Visualizacion-rendered-unnamed-chunk-22-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><div id="challenge1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Desafío</h3>
<div class="callout-content">
<p>De acuerdo con lo aprendido anteriormente, piense cómo podría hacer
que cada faceta quede de un color diferente, es decir, asignando color a
la variable <code>sexo</code> ¿cómo cambiaría el código?</p>
<p>El gráfico que debe producir es el siguiente:</p>
<figure><img src="fig/Visualizacion-rendered-unnamed-chunk-23-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Mostrar la solución </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">covid19_sexo</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">edad</span>, y <span class="op">=</span> <span class="va">casos</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>colour <span class="op">=</span> <span class="va">sexo</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">facet_wrap</span><span class="op">(</span><span class="op">~</span><span class="va">sexo</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Agregando una escala de color degradé tenemos:</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span><span class="va">covid19_sexo</span>, <span class="fu">aes</span><span class="op">(</span><span class="va">edad</span>, <span class="va">casos</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>colour <span class="op">=</span> <span class="va">casos</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_colour_gradient2</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">facet_wrap</span><span class="op">(</span><span class="op">~</span><span class="va">sexo</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/Visualizacion-rendered-unnamed-chunk-25-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure>
</div>
</div>
<div class="section level3">
<h3 id="tema">Tema<a class="anchor" aria-label="anchor" href="#tema"></a>
</h3>
<p>En la gramática de gráficos, el tema se refiere a la personalización
de la apariencia visual general del gráfico; como los títulos, etiquetas
de ejes, fondos, colores, tamaños de fuente, entre otros elementos. Con
los temas, podemos mejorar la legibilidad y estética de los gráficos,
asegurando que la información se comunique de manera efectiva y
atractiva.</p>
<p>En <code>ggplot2</code>, podemos aplicar un tema predeterminado
utilizando la función <code>theme()</code>. A continuación,
proporcionamos algunos ejemplos de cómo utilizar los temas en
<em><code>ggplot2</code></em> con la base de datos covid19.</p>
<p>Usando la misma gráfica del ejemplo anterior, comparemos dos temas:
<code>theme_classic()</code> y <code>theme_dark()</code>.</p>
<div id="discussion3" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Discusión</h3>
<div class="callout-content">
<p>¿Qué diferencias encuentra?</p>
</div>
</div>
</div>
<div class="section level4">
<h4 id="ejemplo-6--usando-theme-classic">Ejemplo 6. Usando theme classic<a class="anchor" aria-label="anchor" href="#ejemplo-6--usando-theme-classic"></a>
</h4>
<p>Para usar el tema clásico tenemos:</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">covid19_sexo</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">edad</span>, y <span class="op">=</span> <span class="va">casos</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">facet_wrap</span><span class="op">(</span><span class="op">~</span><span class="va">sexo</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_classic</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/Visualizacion-rendered-unnamed-chunk-26-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure>
</div>
<div class="section level4">
<h4 id="ejemplo-7--usando-theme-classic">Ejemplo 7. Usando theme classic<a class="anchor" aria-label="anchor" href="#ejemplo-7--usando-theme-classic"></a>
</h4>
<p>Para este tema tendríamos lo siguiente:</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">covid19_sexo</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">edad</span>, y <span class="op">=</span> <span class="va">casos</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">facet_wrap</span><span class="op">(</span><span class="op">~</span><span class="va">sexo</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_dark</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/Visualizacion-rendered-unnamed-chunk-27-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><div id="callout3" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Aviso</h3>
<div class="callout-content">
<p>Para revisar la lista de <code>theme()</code> que tiene disponible
<code>ggplot2</code>, puede consultarse en <a href="https://%60ggplot2%60.tidyverse.org/reference/ggtheme.html" class="external-link uri">https://ggplot2.tidyverse.org/reference/ggtheme.html</a></p>
</div>
</div>
</div>
<p>Finalmente, veamos un ejemplo de cómo modificar los themes
manualmente.</p>
</div>
<div class="section level4">
<h4 id="ejemplo-8--cambiando-títulos-subtítulos-y-ejes">Ejemplo 8. Cambiando títulos, subtítulos y ejes<a class="anchor" aria-label="anchor" href="#ejemplo-8--cambiando-t%C3%ADtulos-subt%C3%ADtulos-y-ejes"></a>
</h4>
<p>Podemos usar comandos como <code>xlab</code>, <code>ylab</code> para
cambiar los nombres de los ejes. Igualmente, comandos como title y
subtitle de la siguiente forma:</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">covid19_sexo</span>, </span>
<span>       <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">edad</span>, y <span class="op">=</span> <span class="va">casos</span>, colour <span class="op">=</span> <span class="va">sexo</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">facet_wrap</span><span class="op">(</span><span class="op">~</span><span class="va">sexo</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span></span>
<span>    y <span class="op">=</span> <span class="st">"Casos diarios"</span>, x <span class="op">=</span> <span class="st">"Edad en años"</span>,</span>
<span>    colour <span class="op">=</span> <span class="st">"Sexo"</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"Distribución de casos de COVID-19 por edad y sexo en Latinoamerica"</span></span>
<span>  <span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/Visualizacion-rendered-unnamed-chunk-28-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Puntos Clave</h3>
<div class="callout-content">
<p>Revise si al final de esta lección adquirió estas competencias:</p>
<ul>
<li>Reconocer las funciones que componen el paquete ggplot2.</li>
<li>Realizar gráficos básicos con la estructura de ggplot2.</li>
</ul>
</div>
</div>
</div>
<center>
<p><a href="https://epiverse-trace.github.io/epitkit/Banco_errores.html" class="external-link"><img src="fig/dudas.png" width="100" class="figure"></a></p>
</center>
</div>
</div>
<div class="section level3">
<h3 id="contribuciones">Contribuciones<a class="anchor" aria-label="anchor" href="#contribuciones"></a>
</h3>
<ul>
<li>Zulma M. Cucunuba: Versión inicial</li>
<li>Geraldine Gomez: Edición</li>
<li>Andree Valle: Ediciones menores</li>
<li>Laura Gómez-Bermeo: Ediciones menores</li>
<li>José M. Velasco-España: Ediciones menores</li>
</ul>
</div>
<div class="section level3">
<h3 id="asuntos-legales">Asuntos legales<a class="anchor" aria-label="anchor" href="#asuntos-legales"></a>
</h3>
<p><strong>Copyright</strong>: Zulma M. Cucunuba, 2023</p>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div>
</section></section><section id="aio-Reporte"><p>Content from <a href="Reporte.html">Reporte e informes tecnicos en R Markdown</a></p>
<hr>
<p>Última actualización: 2025-06-06 |

        <a href="https://github.com/epiverse-trace/epitkit/edit/main/episodes/Reporte.Rmd" class="external-link">Mejora esta página <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Mostrar todas las soluciones " data-collapse="Cerrar todas las soluciones "> Mostrar todas las soluciones <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Hoja de ruta</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Preguntas</h3>
<ul>
<li>¿Cómo se utilizan R markdown para presentar un reporte?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objetivos</h3>
<p>Al final de este taller usted podrá:</p>
<ul>
<li>Reconocer la importancia de generar informes en R Markdown<br>
</li>
<li>Aprender a utilizar R markdown de forma básica</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="prereq1" class="callout prereq">
<div class="callout-square">
<i class="callout-icon" data-feather="check"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Pre requisito</h3>
<div class="callout-content">
<p>Esta unidad tiene como prerequisitos:</p>
<ul>
<li>Introducción a R y RStudio</li>
</ul>
</div>
</div>
</div>
<div id="tabla-de-contenido" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="tabla-de-contenido" class="callout-inner">
<h3 class="callout-title">Tabla de contenido</h3>
<div class="callout-content">
<ul>
<li>Módulo: Ciencia de datos en salud pública
<ul>
<li>Unidad: Reporte e informes técnicos en R Markdown
<ul>
<li>Tema 1: ¿Qué es R Markdown?</li>
<li>Tema 2: Estructura de R Markdown</li>
<li>Tema 3: Paso a Paso en R Markdown</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>
<section><h2 class="section-heading" id="introducción">Introducción<a class="anchor" aria-label="anchor" href="#introducci%C3%B3n"></a>
</h2>
<hr class="half-width">
<p>En esta unidad aprenderemos sobre el uso del formato R Markdown, el
cual permite integrar código en la generación de informes sin la
necesidad de importar gráficas o crear tablas manualmente. De esta
manera, el formato R Markdown facilita la generación automática,
actualización y redacción de informes técnicos al combinar la sintaxis
del formato Markdown con código en R incrustado en el documento.</p>
</section><section><h2 class="section-heading" id="tema-1-qué-es-r-markdown">
<strong>Tema 1: ¿Qué es R Markdown?</strong><a class="anchor" aria-label="anchor" href="#tema-1-qu%C3%A9-es-r-markdown"></a>
</h2>
<hr class="half-width">
<p>R Markdown es una extensión del formato Markdown que permite combinar
texto con código R incrustado en el documento. De esta manera, los
análisis y visualizaciones generados por medio del código se pueden
incorporar de manera natural en el texto.</p>
<p>R Markdown es ampliamente utilizado por científicos de datos,
analistas, investigadores y profesionales que necesitan presentar sus
análisis y resultados de manera clara y reproducible. Además, es una
herramienta muy valiosa para generar informes automatizados y documentos
técnicos interactivos</p>
</section><section><h2 class="section-heading" id="tema-2-estructura-de-r-markdown">
<strong>Tema 2: Estructura de R Markdown</strong><a class="anchor" aria-label="anchor" href="#tema-2-estructura-de-r-markdown"></a>
</h2>
<hr class="half-width">
<p>Un documento de R Markdown consta de tres tipos principales de
elementos:</p>
<p>1.      <strong>Yaml:</strong> Corresponde a especificaciones del
estilo del documento, título, fecha, autores, etc.</p>
<p>2.      <strong>Texto:</strong> Texto enriquecido con formato y
explicaciones.</p>
<p>3.      <strong>Chunk:</strong> Bloque de código R en donde se
ejecutan y se muestran sus resultados.</p>
<figure><img src="fig/partes_reporte.png" class="figure mx-auto d-block"></figure></section><section><h2 class="section-heading" id="tema-3-paso-a-paso-en-r-markdown">
<strong>Tema 3: Paso a Paso en R Markdown</strong><a class="anchor" aria-label="anchor" href="#tema-3-paso-a-paso-en-r-markdown"></a>
</h2>
<hr class="half-width">
<p>A continuación, seguiremos un paso a paso para crear un R
Markdown.</p>
<div class="section level3">
<h3 id="paso-1--abrir-r-studio-desde-r-project">
<strong>Paso 1.</strong> Abrir R Studio desde R Project<a class="anchor" aria-label="anchor" href="#paso-1--abrir-r-studio-desde-r-project"></a>
</h3>
<p>De acuerdo a lo aprendido en la unidad de Introducción a R y Rstudio,
es recomendable tener un R project donde quedará alojado el informe de R
Markdown. Abre un R Project y sigue con el Paso 2.</p>
</div>
<div class="section level3">
<h3 id="paso-2--crear-un-nuevo-archivo-r-markdown">
<strong>Paso 2. Crear un nuevo archivo R Markdown</strong><a class="anchor" aria-label="anchor" href="#paso-2--crear-un-nuevo-archivo-r-markdown"></a>
</h3>
<p>Siguiendo la ruta <strong>File</strong>&gt;<strong>New
File</strong>&gt;<strong>R Markdown</strong> podemos crear un archivo de
R Markdown definiendo: título, autor(es) y con formato de salida
preferido (html, pdf o word).</p>
<p>Siga los pasos, que también pueden verse en la imagen, y cree su
archivo R Markdown con tu nombre y el título de Reporte.</p>
<figure><img src="fig/crea_reporte.png" class="figure mx-auto d-block"></figure>
</div>
<div class="section level3">
<h3 id="paso-3--editar-el-archivo-de-r-markdown-y-el-código">
<strong>Paso 3. Editar el archivo de R Markdown y el
código</strong><a class="anchor" aria-label="anchor" href="#paso-3--editar-el-archivo-de-r-markdown-y-el-c%C3%B3digo"></a>
</h3>
<div id="callout1" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Aviso</h3>
<div class="callout-content">
<p>Es importante recordar que R Markdown tiene tres secciones, todas
editables: Yaml, Texto y Chunk de código.</p>
</div>
</div>
</div>
<p>Al haber creado su archivo de R Markdown podrá observar e identificar
las diferentes secciones que se muestran en la imagen.</p>
<figure><img src="fig/partes_reporte.png" class="figure mx-auto d-block"></figure><p>A continuación, veremos cómo editar cada una de estas partes:</p>
<div class="section level4">
<h4 id="cómo-editar-el-texto">
<strong>¿Cómo editar el texto?</strong><a class="anchor" aria-label="anchor" href="#c%C3%B3mo-editar-el-texto"></a>
</h4>
<ul>
<li><p>Para incluir el título de una sección se escribe el símbolo
numeral # y a continuación el nombre de la sección en una línea
única.</p></li>
<li><p>Para poner subtítulos se utiliza dos símbolos numeral
##.</p></li>
<li>
<p>Para cada subtítulo en la estructura se agrega otro símbolo
numeral</p>
<ol style="list-style-type: decimal"><li>
</li></ol>
</li>
<li><p>Para escribir palabra en negritas use dos asteriscos a cada lado
**palabra**</p></li>
<li><p>Para escribir una palabra en cursiva use un asterisco a cada lado
*palabra*(uno a cada lado)</p></li>
<li><p>Para situar el texto en un bloque aparte, se antecede este texto
con el símbolo &gt; en una línea única.</p></li>
</ul>
</div>
<div class="section level4">
<h4 id="cómo-editar-el-chunk-de-código">
<strong>¿Cómo editar el <em>chunk</em> de código?</strong><a class="anchor" aria-label="anchor" href="#c%C3%B3mo-editar-el-chunk-de-c%C3%B3digo"></a>
</h4>
<p>Para incluir código en R, es necesario introducir un <em>chunk</em>
en el documento marcando en la barra de herramientas el icono +C de
color verde como se muestra en la siguiente imagen.</p>
<p>Al dar click en este ícono, aparecerá un espacio delimitado por los
siguientes símbolos que corresponde al <em>chunk:</em></p>
<p><code>```{r}</code></p>
<p><code>```</code></p>
<p>Luego que haya creado el chunk debemos cargar las librerías para esta
práctica. En el chunk cargamos las librerías a utilizar en R. En este
caso, necesitaremos dos</p>
<p><code>```{r}</code></p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">tidyverse</span><span class="op">)</span></span>
<span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">knitr</span><span class="op">)</span></span></code></pre>
</div>
<p><code>```</code></p>
<p>Ahora debemos correr el Chunk dando click en el ícono de
“<code>Run</code>” y seleccionando el Chunk que queremos correr.</p>
<figure><img src="fig/run_siguiente.png" class="figure mx-auto d-block"></figure><p>Otra opción es dar click al ícono de play verde que se encuentra en
la parte superior derecha de cada Chunk.</p>
<figure><img src="fig/run_actual.png" class="figure mx-auto d-block"></figure>
</div>
<div class="section level4">
<h4 id="especificar-configuración-del-chunk">
<strong>Especificar configuración del <em>chunk</em></strong><a class="anchor" aria-label="anchor" href="#especificar-configuraci%C3%B3n-del-chunk"></a>
</h4>
<p>Dentro de un “chunk”, podemos elegir si queremos que el código se
muestre en el reporte impreso o no; utilizando los comandos
“<code>echo = FALSE</code>” (para ocultarlo) o
“<code>echo = TRUE</code>” (para mostrarlo).</p>
<p>La siguiente tabla incluye otras opciones que se pueden utilizar para
configurar un <em>chunk.</em> En la tabla se muestra que tipo de salidas
quedan suprimidas al especificar cada opción como
<code>FALSE</code>:</p>
<figure><img src="fig/tabla_bloque.png" class="figure mx-auto d-block"></figure><p>Por ejemplo, en nuestra práctica especificaremos que se ejecute el
código, como se muestra aquí.</p>
<p><code>```{r, eval = TRUE}</code></p>
<p><code>```</code></p>
</div>
<div class="section level4">
<h4 id="hacer-tablas-en-r-markdown">
<strong>Hacer tablas en R Markdown</strong><a class="anchor" aria-label="anchor" href="#hacer-tablas-en-r-markdown"></a>
</h4>
<div id="callout2" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Aviso</h3>
<div class="callout-content">
<p>La tabla de datos para esta práctica será la misma de la Unidad de
Introducción a la visualización de datos en R con <code>ggplot2</code>.
Puede encontrarla en: <a href="https://github.com/TRACE-LAC/TRACE-LAC-data/blob/main/otros/muestra_covid.RDS?raw=true" class="external-link uri">https://github.com/TRACE-LAC/TRACE-LAC-data/blob/main/otros/muestra_covid.RDS?raw=true</a></p>
</div>
</div>
</div>
<p>Para hacer tablas en R Markdown podemos utilizar la función
<code>kable</code> de la librería <code>knitr</code>, como se muestra a
continuación:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">knitr</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">tidyverse</span><span class="op">)</span></span>
<span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu">readRDS</span><span class="op">(</span><span class="st">"data/muestra_covid.RDS"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">covid_paises</span> <span class="op">&lt;-</span> <span class="va">dat</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">nombre_del_pais</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">summarise</span> <span class="op">(</span>casos <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">filter</span> <span class="op">(</span><span class="va">casos</span> <span class="op">&gt;</span> <span class="fl">300</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">kable</span><span class="op">(</span><span class="va">covid_paises</span><span class="op">)</span></span></code></pre>
</div>
<p>Como resultado, obtenemos la siguiente tabla:</p>
<table class="table">
<thead><tr class="header">
<th align="left">nombre_del_pais</th>
<th align="right">casos</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Argentina</td>
<td align="right">5059</td>
</tr>
<tr class="even">
<td align="left">Bolivia</td>
<td align="right">5056</td>
</tr>
<tr class="odd">
<td align="left">Brasil</td>
<td align="right">4886</td>
</tr>
<tr class="even">
<td align="left">Chile</td>
<td align="right">5017</td>
</tr>
<tr class="odd">
<td align="left">Colombia</td>
<td align="right">5189</td>
</tr>
<tr class="even">
<td align="left">Costa Rica</td>
<td align="right">4981</td>
</tr>
<tr class="odd">
<td align="left">Cuba</td>
<td align="right">4988</td>
</tr>
<tr class="even">
<td align="left">Ecuador</td>
<td align="right">5082</td>
</tr>
<tr class="odd">
<td align="left">El Salvador</td>
<td align="right">4872</td>
</tr>
<tr class="even">
<td align="left">Guatemala</td>
<td align="right">5078</td>
</tr>
<tr class="odd">
<td align="left">Haití</td>
<td align="right">4894</td>
</tr>
<tr class="even">
<td align="left">Honduras</td>
<td align="right">5014</td>
</tr>
<tr class="odd">
<td align="left">México</td>
<td align="right">5025</td>
</tr>
<tr class="even">
<td align="left">Nicaragua</td>
<td align="right">4995</td>
</tr>
<tr class="odd">
<td align="left">Panamá</td>
<td align="right">5036</td>
</tr>
<tr class="even">
<td align="left">Paraguay</td>
<td align="right">4951</td>
</tr>
<tr class="odd">
<td align="left">Perú</td>
<td align="right">4923</td>
</tr>
<tr class="even">
<td align="left">República Dominicana</td>
<td align="right">5021</td>
</tr>
<tr class="odd">
<td align="left">Uruguay</td>
<td align="right">4986</td>
</tr>
<tr class="even">
<td align="left">Venezuela</td>
<td align="right">4947</td>
</tr>
</tbody>
</table>
</div>
<div class="section level4">
<h4 id="poner-parámetros-automatizados-en-el-texto">
<strong>Poner parámetros automatizados en el texto</strong><a class="anchor" aria-label="anchor" href="#poner-par%C3%A1metros-automatizados-en-el-texto"></a>
</h4>
<p>En un reporte también es posible combinar código y texto, utilizando
los resultados obtenidos en el código como parte del texto del reporte.
Es decir, para evitar que debamos poner un resultado manualmente en el
texto del reporte, podemos utilizar el resultado que obtuvimos al
ejecutar el chunk  y hacer que este resultado aparezca en el texto de
manera automática. Para esto, simplemente se debe parametrizar un valor
y luego incluirlo en el texto usando su nombre correspondiente.</p>
<p>Por ejemplo, para calcular el total de casos de COVID-19 de sexo
femenino en nuestro conjunto de datos de datos <code>dat</code> dentro
de un <em>chunk</em> de R haríamos lo siguiente:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">total_casos_fem</span> <span class="op">&lt;-</span> <span class="fu">nrow</span><span class="op">(</span><span class="va">dat</span> <span class="op">%&gt;%</span> <span class="fu">filter</span> <span class="op">(</span><span class="va">sexo</span> <span class="op">==</span> <span class="st">"femenino"</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>Ahora, si queremos incluir este resultado en el texto del reporte,
debemos especificar el parámetro que queremos usar de esta manera ` r
total_casos_fem `, y por ejemplo escribir directamente como texto:</p>
<p>El total de casos de sexo femenino es ` r total_casos_fem`</p>
<p>Cuyo valor debe coincidir con el valor que obtenemos al imprimir el
objeto <code>total_casos_fem</code></p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">total_casos_fem</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 52453</code></pre>
</div>
<div id="callout3" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Aviso</h3>
<div class="callout-content">
<p>Al tejer el informe tendremos una línea similar a esta:</p>
<p>El total de casos de sexo femenino es 52453</p>
<p>Para ver cómo queda combinado el resultado del código con este texto
debemos seguir el siguiente paso.</p>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="paso-4--tejer-generar-el-informe">
<strong>Paso 4. “Tejer” (generar) el informe</strong><a class="anchor" aria-label="anchor" href="#paso-4--tejer-generar-el-informe"></a>
</h3>
<p>Para “tejer” el informe, es decir, generar el informe en un formato
específico (HTML, PDF o Word), debemos dar click en el símbolo
<em>“Knit”</em> en la parte superior del editor del archivo de
Rmarkdown. Tal como se ve en la siguiente imagen:</p>
<figure><img src="fig/tejer.png" class="figure mx-auto d-block"></figure><p>Después de este paso debe aparecer el informe final en la
presentación que hayamos seleccionado (html, pdf o word).</p>
<div id="discussion1" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Desafío</h3>
<div class="callout-content">
<p>Observe cómo aparece la tabla y el texto del total de casos de sexo
femenino.</p>
</div>
</div>
</div>
<p>¡Felicitaciones, ha producido su primer reporte R Markdown en
html!</p>
<center>
<p><a href="https://epiverse-trace.github.io/epitkit/Banco_errores.html" class="external-link"><img src="fig/dudas.png" width="100" class="figure"></a></p>
</center>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Puntos Clave</h3>
<div class="callout-content">
<p>Revise si al final de esta lección adquirió estas competencias:</p>
<ul>
<li>Reconocer la importancia de generar informes en R Markdown<br>
</li>
<li>Aprender a utilizar R markdown de forma básica</li>
</ul>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="contribuciones">Contribuciones<a class="anchor" aria-label="anchor" href="#contribuciones"></a>
</h3>
<ul>
<li>Zulma M. Cucunuba: Versión inicial</li>
<li>Laura Gómez-Bermeo: Edición</li>
<li>Geraldine Gomez: Ediciones menores</li>
<li>Andree Valle: Ediciones menores</li>
<li>José M. Velasco España: Ediciones menores</li>
</ul>
</div>
<div class="section level3">
<h3 id="asuntos-legales">Asuntos legales<a class="anchor" aria-label="anchor" href="#asuntos-legales"></a>
</h3>
<p><strong>Copyright</strong>: Zulma M. Cucunuba, 2019</p>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div>
</section></section><section id="aio-limpieza"><p>Content from <a href="limpieza.html">Limpieza de datos epidemiológicos</a></p>
<hr>
<p>Última actualización: 2025-06-06 |

        <a href="https://github.com/epiverse-trace/epitkit/edit/main/episodes/limpieza.Rmd" class="external-link">Mejora esta página <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Mostrar todas las soluciones " data-collapse="Cerrar todas las soluciones "> Mostrar todas las soluciones <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Hoja de ruta</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Preguntas</h3>
<ul>
<li>¿Cómo limpiar datos epidemiológicos con R?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objetivos</h3>
<p>Al final de este taller usted podrá:</p>
<ul>
<li><p>Reconocer las herramientas que facilitan la limpieza de datos
epidemiológicos.</p></li>
<li><p>Identificar las buenas prácticas de la limpieza de datos
epidemiológicos.</p></li>
<li><p>Explorar el proceso de limpieza, organización y caracterización
de datos epidemiológicos.</p></li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="prereq1" class="callout prereq">
<div class="callout-square">
<i class="callout-icon" data-feather="check"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Pre requisito</h3>
<div class="callout-content">
<p>Esta unidad tiene como prerequisitos:</p>
<ul>
<li>Introducción a R y RStudio</li>
</ul>
</div>
</div>
</div>
<div id="tabla-de-contenido" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="tabla-de-contenido" class="callout-inner">
<h3 class="callout-title"><strong>Tabla de contenido</strong></h3>
<div class="callout-content">
<ul>
<li>Módulo: Ciencia de datos en salud pública
<ul>
<li>Unidad: Limpieza de datos epidemiológicos
<ul>
<li>Tema 1: Introducción a la limpieza de datos (Ver en plataforma del
curso)</li>
<li>Tema 2: Exploración y caracterización de los datos</li>
<li>Tema 3: Modificación, limpieza y corrección de los datos: Errores
frecuentes y sus soluciones</li>
<li>Tema 4: Organización de los datos</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>
<section><h2 class="section-heading" id="introducción">Introducción<a class="anchor" aria-label="anchor" href="#introducci%C3%B3n"></a>
</h2>
<hr class="half-width">
<p>En esta unidad abordaremos el proceso de limpieza de datos
epidemiológicos, utilizando los conocimientos previos de la unidad de la
introducción a R y RStudio, abordaremos la limpieza de datos como un
proceso fundamental para obtener insumos idóneos para el análisis de los
datos, la visualización y la creación de reportes epidemiológicos.</p>
<p>En esta unidad, aprenderá a reconocer las actividades necesarias para
llevar a cabo el proceso de limpieza de datos, aprenderá cómo solucionar
los errores más comunes en las bases de datos que pueden afectar el
análisis y comprenderá cómo describir y organizar los datos, clasificar
variables, aplicar formatos a las variables, manejar datos duplicados y
abordar la ausencia de datos.</p>
</section><section><h2 class="section-heading" id="tema-2-exploración-y-caracterización-de-los-datos">
<strong>Tema 2: Exploración y caracterización de los
datos</strong><a class="anchor" aria-label="anchor" href="#tema-2-exploraci%C3%B3n-y-caracterizaci%C3%B3n-de-los-datos"></a>
</h2>
<hr class="half-width">
<div class="section level3">
<h3 id="exploración-de-la-estructura-de-los-datos-en-r">
<strong>2.2. Exploración de la estructura de los datos en
R</strong><a class="anchor" aria-label="anchor" href="#exploraci%C3%B3n-de-la-estructura-de-los-datos-en-r"></a>
</h3>
<p>Una vez hecha la exploración y la caracterización de los datos
mediante la documentación se procederá a explorar el dataset.</p>
<div class="section level4">
<h4 id="carga-de-la-información">
<strong>2.2.1. Carga de la información</strong><a class="anchor" aria-label="anchor" href="#carga-de-la-informaci%C3%B3n"></a>
</h4>
<div id="instrucciones" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="instrucciones" class="callout-inner">
<h3 class="callout-title">⚠️ <strong>Instrucciones:</strong>
</h3>
<div class="callout-content">
<p>Antes de empezar a trabajar verifique que ya cuenta con los
siguientes pasos:</p>
<ol style="list-style-type: decimal">
<li><p>Cree un proyecto en R</p></li>
<li><p>Cree carpeta llamada “datos” dentro del proyecto</p></li>
<li><p>Descargue el archivo data_limpieza.zip que contiene el dataset
“covid_LA.csv” y el documento de información “covid_LA_info.txt”,
disponible en el siguiente enlace <a href="https://github.com/TRACE-LAC/TRACE-LAC-data/raw/main/data_limpieza.zip" class="external-link uri">https://github.com/TRACE-LAC/TRACE-LAC-data/raw/main/data_limpieza.zip</a> </p></li>
<li><p>Descomprima los archivos y guarde el dataset “covid_LA.csv” en la
carpeta “datos”</p></li>
<li><p>Cree un R script</p></li>
</ol>
</div>
</div>
</div>
<div id="callout1" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Aviso</h3>
<div class="callout-content">
<p>Si tiene dudas con el proceso por favor regrese a la unidad de
<strong>Introducción a R</strong>.</p>
</div>
</div>
</div>
<p><strong>Resultado esperado:</strong> Hasta este punto, el proyecto se
debería ver así:</p>
<figure><img src="fig/vista_proyecto.png" class="figure mx-auto d-block"></figure><ol start="6" style="list-style-type: decimal">
<li>Cargue las librerías: tidyverse, rio y cleanepi.</li>
</ol>
<div id="callout2" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Aviso</h3>
<div class="callout-content">
<p>Si aún no las ha instalado puede hacerlo con el siguiente código</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span><span class="op">(</span><span class="op">!</span><span class="kw">require</span><span class="op">(</span><span class="st">"tidyverse"</span><span class="op">)</span><span class="op">)</span> <span class="fu">install.packages</span><span class="op">(</span><span class="st">"tidyverse"</span><span class="op">)</span> <span class="co">#si necesita instalar tidyverse</span></span>
<span><span class="kw">if</span><span class="op">(</span><span class="op">!</span><span class="kw">require</span><span class="op">(</span><span class="st">"cleanepi"</span><span class="op">)</span><span class="op">)</span> <span class="fu">install.packages</span><span class="op">(</span><span class="st">"cleanepi"</span><span class="op">)</span> <span class="co">#si necesita instalar cleanepi</span></span>
<span><span class="kw">if</span><span class="op">(</span><span class="op">!</span><span class="kw">require</span><span class="op">(</span><span class="st">"rio"</span><span class="op">)</span><span class="op">)</span> <span class="fu">install.packages</span><span class="op">(</span><span class="st">"rio"</span><span class="op">)</span> <span class="co">#si necesita instalar rio</span></span></code></pre>
</div>
</div>
</div>
</div>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="st">"tidyverse"</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="st">"cleanepi"</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="st">"rio"</span><span class="op">)</span></span></code></pre>
</div>
<p><strong>Resultado esperado:</strong> Al usar el anterior código con
el mismo dataset se obtiene el siguiente resultado:</p>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.1     ✔ tibble    3.2.1
✔ lubridate 1.9.4     ✔ tidyr     1.3.1
✔ purrr     1.0.4
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<ol start="7" style="list-style-type: decimal">
<li>Cargue el dataset</li>
</ol>
<p>⚠️ <strong>Instrucción:</strong> Cargue el dataset en R con el
siguiente código:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">&lt;-</span> <span class="fu">rio</span><span class="fu">::</span><span class="fu">import</span><span class="op">(</span><span class="st">"datos/covid_LA.csv"</span><span class="op">)</span></span></code></pre>
</div>
<p>Ahora que la base está cargada podemos hacer la revisión del formato
de los datos.</p>
</div>
<div class="section level4">
<h4 id="exploración-del-dataset">
<strong>2.2.2. Exploración del dataset</strong><a class="anchor" aria-label="anchor" href="#exploraci%C3%B3n-del-dataset"></a>
</h4>
<p>En este ejercicio para explorar las variables contenidas en el objeto
covid se puede realizar una aproximación general o específica a cada
variable.</p>
<p>Por ejemplo, puede hacer una aproximación general usando la función
str para identificar el tipo de objeto, tipo de variables y valores de
la variable. Una opción dentro de tidyverse la función glimpse que
permite identificar rápidamente el contenido del dataset.</p>
<p>⚠️ <strong>Instrucción:</strong> Emplee la función
<code>glimpse</code> o <code>str</code></p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">glimpse</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p><strong>Resultado esperado :</strong> Al usar el anterior código con
el mismo dataset se obtiene el siguiente resultado:</p>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Rows: 79,200
Columns: 25
$ `fecha reporte web`           &lt;chr&gt; "2021-03-15", "21-03-23", "2021-mar-15",…
$ `ID de caso`                  &lt;int&gt; 1804713, 3202309, 5651419, 59067, 523826…
$ `Fecha de notificación`       &lt;chr&gt; "31/12/2020", "26/04/2021", "08/01/2022"…
$ Edad                          &lt;int&gt; 26, 28, 61, 24, 51, 25, 35, 56, 27, 8, 3…
$ Sexo                          &lt;chr&gt; "M", "F", "M", "M", "M", "M", "M", "M", …
$ `Ubicación del caso`          &lt;chr&gt; "Casa", "Casa", "Casa", "Casa", "Casa", …
$ Estado                        &lt;chr&gt; "Leve", "Leve", "Leve", "Leve", "Leve", …
$ Recuperado                    &lt;chr&gt; "Recuperado", "Recuperado", "Recuperado"…
$ `Fecha de inicio de síntomas` &lt;chr&gt; "21/12/2020", "24/04/2021", "04/01/2022"…
$ `Fecha de muerte`             &lt;chr&gt; "No registra", "No registra", "No regist…
$ `Fecha de diagnóstico`        &lt;chr&gt; "02/01/2021", "06/05/2021", "19/01/2022"…
$ `Fecha de recuperación`       &lt;chr&gt; "13/01/2021", "23/05/2021", "21/01/2022"…
$ `Tipo de recuperación`        &lt;chr&gt; "Tiempo", "Tiempo", "Tiempo", "Tiempo", …
$ `fecha de nacimiento`         &lt;dbl&gt; 1996, 1994, 1961, 1998, 1971, 1997, 1987…
$ `Nombre del país`             &lt;chr&gt; "Argentina", "Haití", "Perú", "Ecuador",…
$ Sintomas                      &lt;chr&gt; "Leve", "Leve", "Leve", "Leve", "Leve", …
$ `Edad repetida`               &lt;int&gt; 26, 28, 61, 24, 51, 25, 35, 56, 27, 8, 3…
$ Num_Hos_Rec                   &lt;chr&gt; "cero", "0", "0", "0", "0", "cero", "cer…
$ `Tensión arterial`            &lt;chr&gt; "102/85", "148/72", "92/84", "122/71", "…
$ `año última actualización`    &lt;int&gt; 2024, 2024, 2024, 2024, 2024, 2024, 2024…
$ `método recolección`          &lt;chr&gt; "Llamada telefónica", "Llamada telefónic…
$ `Central de reporte`          &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ Vacunado                      &lt;lgl&gt; FALSE, TRUE, FALSE, TRUE, TRUE, TRUE, TR…
$ talla                         &lt;chr&gt; "1.73", "1.67", "1m69", "1.66", "1.63", …
$ peso                          &lt;dbl&gt; 69.6, 73.9, 66.4, 72.5, 64.6, 66.7, 68.9…</code></pre>
</div>
</div>
<div class="section level4">
<h4 id="aplicación-de-buenas-prácticas-para-nombrar-variables">
<strong>2.2.3. Aplicación de buenas prácticas para nombrar
variables</strong><a class="anchor" aria-label="anchor" href="#aplicaci%C3%B3n-de-buenas-pr%C3%A1cticas-para-nombrar-variables"></a>
</h4>
<div id="callout3" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Aviso</h3>
<div class="callout-content">
<p><strong>Tip de buena práctica:</strong> De acuerdo con las buenas
prácticas de programación se recomienda que los nombres de las variables
tengan características como:</p>
<ul>
<li><p>Estar en minúsculas</p></li>
<li><p>No contener caracteres especiales</p></li>
<li><p>No contener espacios</p></li>
</ul>
</div>
</div>
</div>
<p>Estas recomendaciones dependen de la preferencia del analista y su
equipo. Para este módulo vamos a hacer uso de la función
<code>standardize_column_names</code> del paquete
<code>cleanepi</code>.</p>
<div id="callout4" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Aviso</h3>
<div class="callout-content">
<p>La función <code>standardize_column_names</code> tiene como argumento
principal:</p>
<ul>
<li>
<code>data</code>: el dataset (o linelist) con los datos a
modificar.</li>
</ul>
<p>Y dos argumentos opcionales:</p>
<ul>
<li><p><code>keep</code>: un vector con los nombres de las columnas que
se mantendrán.</p></li>
<li><p><code>rename</code>: un vector con los nombres de las columnas
que se renombraran. Ej.
<code>c(nombre_nuevo1 = “nombre_viejo1”, nombre_nuevo2 = “nombre_viejo2”)</code></p></li>
</ul>
</div>
</div>
</div>
<p>⚠️ <strong>Instrucción:</strong> Emplee la función
standardize_column_names para limpiar los nombres del dataset covid:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">&lt;-</span> <span class="va">covid</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">cleanepi</span><span class="fu">::</span><span class="fu">standardize_column_names</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p><strong>Resultado esperado:</strong> El código anterior no arroja un
resultado visible en la consola para observar el cambio, sin embargo,
empleando la función glimpse podemos observar los nombres de las
variables de la base covid ajustados.</p>
<p>⚠️ <strong>Instrucción:</strong> Emplee la función glimpse y observe
el cambio en el nombre de la variable Tipo de recuperación:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">glimpse</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p><strong>Resultado esperado:</strong> Al usar el anterior código con
el mismo dataset se obtiene el siguiente resultado:</p>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Rows: 79,200
Columns: 25
$ fecha_reporte_web           &lt;chr&gt; "2021-03-15", "21-03-23", "2021-mar-15", "…
$ id_de_caso                  &lt;int&gt; 1804713, 3202309, 5651419, 59067, 5238264,…
$ fecha_de_notificacion       &lt;chr&gt; "31/12/2020", "26/04/2021", "08/01/2022", …
$ edad                        &lt;int&gt; 26, 28, 61, 24, 51, 25, 35, 56, 27, 8, 35,…
$ sexo                        &lt;chr&gt; "M", "F", "M", "M", "M", "M", "M", "M", "F…
$ ubicacion_del_caso          &lt;chr&gt; "Casa", "Casa", "Casa", "Casa", "Casa", "F…
$ estado                      &lt;chr&gt; "Leve", "Leve", "Leve", "Leve", "Leve", "F…
$ recuperado                  &lt;chr&gt; "Recuperado", "Recuperado", "Recuperado", …
$ fecha_de_inicio_de_sintomas &lt;chr&gt; "21/12/2020", "24/04/2021", "04/01/2022", …
$ fecha_de_muerte             &lt;chr&gt; "No registra", "No registra", "No registra…
$ fecha_de_diagnostico        &lt;chr&gt; "02/01/2021", "06/05/2021", "19/01/2022", …
$ fecha_de_recuperacion       &lt;chr&gt; "13/01/2021", "23/05/2021", "21/01/2022", …
$ tipo_de_recuperacion        &lt;chr&gt; "Tiempo", "Tiempo", "Tiempo", "Tiempo", "T…
$ fecha_de_nacimiento         &lt;dbl&gt; 1996, 1994, 1961, 1998, 1971, 1997, 1987, …
$ nombre_del_pais             &lt;chr&gt; "Argentina", "Haití", "Perú", "Ecuador", "…
$ sintomas                    &lt;chr&gt; "Leve", "Leve", "Leve", "Leve", "Leve", "C…
$ edad_repetida               &lt;int&gt; 26, 28, 61, 24, 51, 25, 35, 56, 27, 8, 35,…
$ num_hos_rec                 &lt;chr&gt; "cero", "0", "0", "0", "0", "cero", "cero"…
$ tension_arterial            &lt;chr&gt; "102/85", "148/72", "92/84", "122/71", "15…
$ ano_ultima_actualizacion    &lt;int&gt; 2024, 2024, 2024, 2024, 2024, 2024, 2024, …
$ metodo_recoleccion          &lt;chr&gt; "Llamada telefónica", "Llamada telefónica"…
$ central_de_reporte          &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ vacunado                    &lt;lgl&gt; FALSE, TRUE, FALSE, TRUE, TRUE, TRUE, TRUE…
$ talla                       &lt;chr&gt; "1.73", "1.67", "1m69", "1.66", "1.63", "1…
$ peso                        &lt;dbl&gt; 69.6, 73.9, 66.4, 72.5, 64.6, 66.7, 68.9, …</code></pre>
</div>
</div>
<div class="section level4">
<h4 id="resumen-de-variables">
<strong>2.2.4. Resumen de variables</strong><a class="anchor" aria-label="anchor" href="#resumen-de-variables"></a>
</h4>
<p>Para empezar la exploración de las variables, emplearemos la función
summary.</p>
<p>⚠️️ <strong>Instrucción:</strong> Emplee la función summary para
explorar las variables:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="fu">summary</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p><strong>Resultado esperado:</strong> Al usar el anterior código con
el mismo dataset se obtiene el siguiente resultado:</p>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> fecha_reporte_web    id_de_caso      fecha_de_notificacion      edad
 Length:79200       Min.   :    150   Length:79200          Min.   :  1.00
 Class :character   1st Qu.:1555387   Class :character      1st Qu.: 27.00
 Mode  :character   Median :3134996   Mode  :character      Median : 38.00
                    Mean   :3128082                         Mean   : 39.84
                    3rd Qu.:4691283                         3rd Qu.: 52.00
                    Max.   :6265661                         Max.   :109.00

     sexo           ubicacion_del_caso    estado           recuperado
 Length:79200       Length:79200       Length:79200       Length:79200
 Class :character   Class :character   Class :character   Class :character
 Mode  :character   Mode  :character   Mode  :character   Mode  :character




 fecha_de_inicio_de_sintomas fecha_de_muerte    fecha_de_diagnostico
 Length:79200                Length:79200       Length:79200
 Class :character            Class :character   Class :character
 Mode  :character            Mode  :character   Mode  :character




 fecha_de_recuperacion tipo_de_recuperacion fecha_de_nacimiento
 Length:79200          Length:79200         Min.   :1913
 Class :character      Class :character     1st Qu.:1970
 Mode  :character      Mode  :character     Median :1984
                                            Mean   : Inf
                                            3rd Qu.:1995
                                            Max.   : Inf
                                            NA's   :1393
 nombre_del_pais      sintomas         edad_repetida    num_hos_rec
 Length:79200       Length:79200       Min.   :  1.00   Length:79200
 Class :character   Class :character   1st Qu.: 27.00   Class :character
 Mode  :character   Mode  :character   Median : 38.00   Mode  :character
                                       Mean   : 39.84
                                       3rd Qu.: 52.00
                                       Max.   :109.00

 tension_arterial   ano_ultima_actualizacion metodo_recoleccion
 Length:79200       Min.   :2024             Length:79200
 Class :character   1st Qu.:2024             Class :character
 Mode  :character   Median :2024             Mode  :character
                    Mean   :2024
                    3rd Qu.:2024
                    Max.   :2024

 central_de_reporte  vacunado          talla                peso
 Mode:logical       Mode :logical   Length:79200       Min.   :53.60
 NA's:79200         FALSE:19186     Class :character   1st Qu.:67.30
                    TRUE :60014     Mode  :character   Median :70.00
                                                       Mean   :69.99
                                                       3rd Qu.:72.70
                                                       Max.   :87.10
                                                                      </code></pre>
</div>
<div id="callout5" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Aviso</h3>
<div class="callout-content">
<p>Para conocer las unidades de las variables recuerde ver la
documentación llamada “covid_LA_info.txt”.</p>
</div>
</div>
</div>
<p>Además de poder usar <code>summary</code> como en el caso anterior,
también se puede obtener esta información para cada variable de forma
individual. Por ejemplo, para la variable <code>edad</code>, empleamos
<code>summary</code> llamando a la variable dentro del dataset.</p>
<p>⚠️️ <strong>Instrucción:</strong> Emplee la función summary para
explorar la variable edad:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">select</span><span class="op">(</span><span class="va">edad</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="fu">summary</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p><strong>Resultado esperado:</strong> Al usar el anterior código con
el mismo dataset se obtiene el siguiente resultado:</p>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>      edad
 Min.   :  1.00
 1st Qu.: 27.00
 Median : 38.00
 Mean   : 39.84
 3rd Qu.: 52.00
 Max.   :109.00  </code></pre>
</div>
</div>
<div class="section level4">
<h4 id="exploración-de-variables-cuantitativas">
<strong>2.2.5. Exploración de variables cuantitativas</strong><a class="anchor" aria-label="anchor" href="#exploraci%C3%B3n-de-variables-cuantitativas"></a>
</h4>
<p>Otra forma de explorar variables cuantitativas es en forma de
gráfica. Empleando gráficos como histogramas, diagrama de cajas y
bigotes, líneas de tendencia, nubes de puntos, diagrama de violines,
entre otros. A continuación, se muestran ejemplos para histograma y
diagrama de cajas y bigotes.</p>
<p>⚠️ <strong>Instrucción:</strong> Emplee la función hist para generar
un histograma de la variable <code>edad</code>:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">pull</span><span class="op">(</span><span class="va">edad</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="co">#pull extrae el vector</span></span>
<span>  <span class="fu">graphics</span><span class="fu">::</span><span class="fu">hist</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p><strong>Resultado esperado:</strong> Al usar el anterior código con
el mismo dataset se obtiene el siguiente resultado:</p>
<figure><img src="fig/limpieza-rendered-unnamed-chunk-16-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>⚠️ <strong>Instrucción:</strong> Emplee la función boxplot para
generar un boxplot de la variable <code>edad</code>:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">pull</span><span class="op">(</span><span class="va">edad</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">graphics</span><span class="fu">::</span><span class="fu">boxplot</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p><strong>Resultado esperado:</strong> Al usar el anterior código con
el mismo dataset se obtiene el siguiente resultado:</p>
<figure><img src="fig/limpieza-rendered-unnamed-chunk-18-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Estos gráficos pueden resultar útiles para examinar la tendencia y
distribución de los datos, así como observar datos atípicos.</p>
<div id="callout6" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Aviso</h3>
<div class="callout-content">
<p>Para explorar más temas de visualización por favor diríjase a la
<strong>Unidad. Introducción a la visualización de datos en R con
ggplot2</strong>.</p>
</div>
</div>
</div>
</div>
<div class="section level4">
<h4 id="exploración-de-variables-cualitativas">
<strong>2.2.6. Exploración de variables cualitativas</strong><a class="anchor" aria-label="anchor" href="#exploraci%C3%B3n-de-variables-cualitativas"></a>
</h4>
<p>Ahondemos un poco más en la exploración de variables cualitativas.
Cuando usamos <code>summary</code>, al inicio de esta sección, pudimos
ver que sucedía con algunas variables cualitativas. Ahora observaremos
lo que pasa con la variable <code>nombre_del_pais</code>.</p>
<p>⚠️ <strong>Instrucción:</strong> Seleccione la variable
nombre_del_pais empleando la función select y emplee la función summary
para ver el resumen de esta variable.</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">select</span><span class="op">(</span><span class="va">sintomas</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="fu">summary</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p><strong>Resultado esperado:</strong> Al usar el anterior código con
el mismo dataset se obtiene el siguiente resultado:</p>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span>   <span class="va">sintomas</span></span>
<span> <span class="va">Length</span><span class="op">:</span><span class="fl">79200</span></span>
<span> <span class="va">Class</span> <span class="op">:</span><span class="va">character</span></span>
<span> <span class="va">Mode</span>  <span class="op">:</span><span class="va">character</span>  </span></code></pre>
</div>
<div class="discusión">
<p>¿Qué puede observar?</p>
</div>
<p>Para obtener detalles sobre las categorías de las variables, podemos
usar otras opciones como tablas, tablas de proporciones, extracción de
valores únicos y creación de gráficos. Veamos cada uno:</p>
<p>⚠️ <strong>Instrucción:</strong> Emplee la función table para generar
una tabla de la variable sintomas :</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">pull</span><span class="op">(</span><span class="va">sintomas</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="fu">table</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p><strong>Resultado esperado:</strong> Al usar el anterior código con
el mismo dataset debió obtener los siguientes resultados:</p>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>.
     Critico        Grave         Leve     Moderado Sin sintomas
        1781            1        76976           13          429 </code></pre>
</div>
<div class="discusión">
<p>¿Qué puede observar?</p>
</div>
<p>En caso que deseemos observar una tabla con los
<strong>porcentajes</strong> de cada elemento al interior de la variable
podemos recurrir a la función <code>prop.table</code>.</p>
<p>⚠️ <strong>Instrucción:</strong> Emplee la función
<code>prop.table</code> para generar una tabla con porcentajes de la
variable <code>sintomas</code>:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">pull</span><span class="op">(</span><span class="va">sintomas</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="fu">table</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="fu">prop.table</span><span class="op">(</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span> <span class="co">#si desea las propociones puede eliminar el "*100"</span></span></code></pre>
</div>
<p><strong>Resultado esperado:</strong> Al usar el anterior código con
el mismo dataset se obtiene el siguiente resultado:</p>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>.
     Critico        Grave         Leve     Moderado Sin sintomas
 2.248737374  0.001262626 97.191919192  0.016414141  0.541666667 </code></pre>
</div>
<p>Como puede observar ahora podemos ver cada categoría con su
respectivo porcentaje. En caso de que sólo deseemos ver los objetos
contenidos sin otros datos podemos emplear la función
<code>unique</code>.</p>
<p>⚠️ <strong>Instrucción:</strong> Emplee la función unique para
extraer los valores únicos de la variable sintomas:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">pull</span><span class="op">(</span><span class="va">sintomas</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="fu">unique</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p><strong>Resultado esperado:</strong> Al usar el anterior código con
el mismo dataset se obtiene el siguiente resultado:</p>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "Leve"         "Critico"      "Moderado"     "Sin sintomas" "Grave"       </code></pre>
</div>
<p>Con esto pudimos obtener los diferentes valores de la variable
<code>sintomas</code>. Además, las variables cualitativas pueden ser
examinadas mediante gráficos de barras o de torta.</p>
<p>⚠️ <strong>Instrucción:</strong> Emplee la función barplot a
compañado de la función tablepara generar un gráfico de barras del
contenido de la variable <code>sexo</code>:</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">pull</span><span class="op">(</span><span class="va">sintomas</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="fu">table</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">graphics</span><span class="fu">::</span><span class="fu">barplot</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p><strong>Resultado esperado:</strong> Al usar el anterior código con
el mismo dataset se obtiene el siguiente resultado:</p>
<img src="fig/limpieza-rendered-unnamed-chunk-28-1.png" style="display: block; margin: auto;" class="figure"><center>
<p><a href="https://epiverse-trace.github.io/epitkit/Banco_errores.html" class="external-link"><img src="fig/dudas.png" width="100" class="figure"></a></p>
</center>
</div>
</div>
</section><section><h2 class="section-heading" id="tema-3-modificación-limpieza-y-corrección-de-los-datos-errores-frecuentes-y-sus-soluciones">
<strong>Tema 3: Modificación, limpieza y corrección de los datos:
Errores frecuentes y sus soluciones</strong><a class="anchor" aria-label="anchor" href="#tema-3-modificaci%C3%B3n-limpieza-y-correcci%C3%B3n-de-los-datos-errores-frecuentes-y-sus-soluciones"></a>
</h2>
<hr class="half-width">
<div class="section level3">
<h3 id="revisión-de-la-coherencia-del-contenido-de-las-variables-">
<strong>3.1. Revisión de la coherencia del contenido de las
variables.</strong><a class="anchor" aria-label="anchor" href="#revisi%C3%B3n-de-la-coherencia-del-contenido-de-las-variables-"></a>
</h3>
<p>Para emplear estas funciones de conversión podemos emplearlas
directamente a cada variable (ej. <code>as.factor(covid$sexo)</code>) o
hacer uso de la función <code>across</code>. La función
<code>across</code> es una función del paquete <code>dplyr</code> que
permite aplicar transformaciones a múltiples variables de un data frame
de manera simultánea. </p>
<div id="callout7" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Aviso</h3>
<div class="callout-content">
<p>La función <code>across</code> tiene dos argumentos</p>
<ol style="list-style-type: decimal">
<li><p><code>.cols</code>: el vector de variables a
transformar.</p></li>
<li><p><code>.fns</code>: la función que se aplicará.</p></li>
</ol>
</div>
</div>
</div>
<p>⚠️ <strong>Instrucción:</strong> Convierta las variables
<code>sexo</code>, <code>sintomas</code> y <code>nombre_del_pais</code>
a tipo factor con las funciones <code>across</code> y
<code>as.factor</code>.</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">&lt;-</span> <span class="va">covid</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">mutate</span><span class="op">(</span></span>
<span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">across</span><span class="op">(</span></span>
<span>    .cols <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"sexo"</span>, <span class="st">"sintomas"</span>, <span class="st">"nombre_del_pais"</span><span class="op">)</span>, </span>
<span>    .fns <span class="op">=</span> <span class="va">as.factor</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p><strong>Resultado esperado:</strong> Se puede observar el resultado
del código anterior empleando funciones de visualización como
summary.</p>
<p>⚠️ <strong>Instrucción:</strong> Emplee la función summary para
explorar las variables transformadas a tipo factor:</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">select</span><span class="op">(</span><span class="fu">c</span><span class="op">(</span><span class="va">sexo</span>, <span class="va">sintomas</span>, <span class="va">nombre_del_pais</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="fu">summary</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p><strong>Resultado esperado:</strong> Al usar el anterior código con
el mismo dataset se obtiene el siguiente resultado:</p>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> sexo              sintomas       nombre_del_pais
 F:42336   Critico     : 1781   Honduras  : 3730
 M:36864   Grave       :    1   Ecuador   : 3715
           Leve        :76976   Nicaragua : 3690
           Moderado    :   13   Brasil    : 3665
           Sin sintomas:  429   Bolivia   : 3661
                                Costa Rica: 3658
                                (Other)   :57081  </code></pre>
</div>
<p>Al utilizar la función summary con las variables que acabamos de
convertir en tipo factor, podemos observar que a diferencia de la
primera vez que usamos summary en el paso 4 del tema 2 los resultados
han cambiado.</p>
<div id="discussion1" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Discusión</h3>
<div class="callout-content">
<p>¿Qué cambios puede observar?</p>
</div>
</div>
</div>
<p>Para dar un orden a las categorías de una variable factor podemos
usar la función <code>fct_relevel</code>.</p>
<p>⚠️ <strong>Instrucción:</strong> Emplee la función
<code>fct_relevel</code> para modificar el orden de las categorías de la
variable:</p>
<div id="callout8" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Aviso</h3>
<div class="callout-content">
<p><strong>Pista</strong>: En el primer argumento llamamos la variable a
modificar y en el segundo argumento ponemos un vector con los niveles en
el orden deseado.</p>
</div>
</div>
</div>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">&lt;-</span> <span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">mutate</span><span class="op">(</span>sintomas <span class="op">=</span> </span>
<span>                  <span class="fu">forcats</span><span class="fu">::</span><span class="fu">fct_relevel</span><span class="op">(</span><span class="va">sintomas</span>,</span>
<span>                                       <span class="st">"Sin sintomas"</span>, </span>
<span>                                       <span class="st">"Leve"</span>, <span class="st">"Moderado"</span>, </span>
<span>                                       <span class="st">"Grave"</span>, <span class="st">"Critico"</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>⚠️ <strong>Instrucción:</strong> Verifique si los niveles de la
variable están en el orden deseado:</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">count</span><span class="op">(</span><span class="va">sintomas</span><span class="op">)</span></span></code></pre>
</div>
<p><strong>Resultado esperado:</strong> Al usar el anterior código con
el mismo dataset se obtiene el siguiente resultado:</p>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>      sintomas     n
1 Sin sintomas   429
2         Leve 76976
3     Moderado    13
4        Grave     1
5      Critico  1781</code></pre>
</div>
<p>Tener en orden los niveles de las variables es fundamental para un
adecuado análisis estadístico y una correcta interpretación de los
resultados.</p>
<p>Sin embargo, aunque la documentación especifique que la variable debe
tener un tipo de dato determinado. Por ejemplo, para variables
numéricas, a veces un dataset podría contener los números escritos en
letras. En este caso, al realizar la conversión a tipo numérico el
sistema no los detectará como valores numéricos y los reemplazará por
valores <code>NA</code>, lo que resultará en la pérdida de esa
información. Veamos un ejemplo.</p>
<p>⚠️ <strong>Instrucciones:</strong></p>
<ol style="list-style-type: decimal">
<li>Usando la función table explore los primeros 1000 registros
contenidos de la variable <code>num_hos_rec</code> ¿Qué elementos puede
observar?</li>
</ol>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">slice</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">1000</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">pull</span><span class="op">(</span><span class="va">num_hos_rec</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="fu">table</span><span class="op">(</span>useNA <span class="op">=</span> <span class="st">"always"</span><span class="op">)</span></span></code></pre>
</div>
<p><strong>Resultado esperado:</strong> Al usar el anterior código con
el mismo dataset se obtiene el siguiente resultado:</p>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>.
          0           1           2           3        cero         dos
        545          18          22          19         180          26
no registra No registra        tres         uno        &lt;NA&gt;
         81          72          22          15           0 </code></pre>
</div>
<p>Esta variable contiene elementos numéricos, caracteres y
<code>NA</code> para convertir la variable a numérica se emplea la
función <code>as.numeric</code>.</p>
<ol start="2" style="list-style-type: decimal">
<li>Antes de convertir el dataset, usando la función
<code>as.numeric</code> obtenga una tabla de la columna en formato
numérico que le permita explorar las consecuencias de convertirla a
numérica.</li>
</ol>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">slice</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">1000</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">pull</span><span class="op">(</span><span class="va">num_hos_rec</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="fu">as.numeric</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="fu">table</span><span class="op">(</span>useNA <span class="op">=</span> <span class="st">"always"</span><span class="op">)</span></span></code></pre>
</div>
<p><strong>Resultado esperado:</strong> Al usar el anterior código con
el mismo dataset se obtiene el siguiente resultado:</p>
<div class="codewrapper">
<h3 class="code-label">ADVERTENCIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="warning" tabindex="0"><code>Warning in base::table(., useNA = "always"): NAs introduced by coercion</code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>.
   0    1    2    3 &lt;NA&gt;
 545   18   22   19  396 </code></pre>
</div>
<div class="discusión">
<p>¿Qué cambios pudo observar?</p>
</div>
<p>Al explorar la variable en formato numérico notamos que los números
permanecen mientras que los elementos no numéricos (“no registra” y “No
registra”) se unieron al grupo de <code>NA</code>. Más adelante
profundizaremos en los datos <code>NA</code>. Si esta conforme con los
cambios, puede convertir el dataset:</p>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">&lt;-</span> <span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">cleanepi</span><span class="fu">::</span><span class="fu">convert_to_numeric</span><span class="op">(</span></span>
<span>    target_columns <span class="op">=</span> <span class="st">"num_hos_rec"</span>,</span>
<span>    lang <span class="op">=</span> <span class="st">"es"</span><span class="op">)</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="identificación-de-valores-erróneos-o-faltantes-">
<strong>3.2. Identificación de valores erróneos o
faltantes.</strong><a class="anchor" aria-label="anchor" href="#identificaci%C3%B3n-de-valores-err%C3%B3neos-o-faltantes-"></a>
</h3>
<p>Además de los valores NA en nuestro procesamiento de datos podemos
encontrar otros valores Inf (valores infinitos) o NaN (valores numéricos
indeterminados).</p>
<p>La identificación de datos faltantes requiere en primera instancia
identificar la causa de la ausencia de estos datos.</p>
<div class="section level4">
<h4 id="valores-na">
<strong>3.2.1. Valores NA</strong><a class="anchor" aria-label="anchor" href="#valores-na"></a>
</h4>
<div class="section level5">
<h5 id="nas-relacionados-con-separadores-incorrectos">
<strong>NAs relacionados con separadores incorrectos</strong><a class="anchor" aria-label="anchor" href="#nas-relacionados-con-separadores-incorrectos"></a>
</h5>
<p>Veamos un ejemplo común de aparición de <code>NA</code>: cuando
tenemos diferentes separadores para números (ej. en talla).</p>
<p>⚠️ <strong>Instrucción:</strong> Antes de convertir el dataset,
obtenga una tabla (usando la función table) que cuantifique los NA
resultantes de convertir la variable talla en formato numérico con la
función as.numeric. Para comprobar si un valor es <code>NA</code> puede
usar la función <code>is.na</code>.</p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">pull</span><span class="op">(</span><span class="va">talla</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="fu">as.numeric</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="fu">is.na</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="fu">table</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ADVERTENCIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="warning" tabindex="0"><code>Warning in base::table(.): NAs introduced by coercion</code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>.
FALSE  TRUE
54068 25132 </code></pre>
</div>
<p>Ahora use el siguiente código para comprender por qué se generan
estos <code>NA</code></p>
<div class="codewrapper sourceCode" id="cb40">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">pull</span><span class="op">(</span><span class="va">talla</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">utils</span><span class="fu">::</span><span class="fu">head</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "1.73" "1.67" "1m69" "1.66" "1.63" "1 68"</code></pre>
</div>
<p><strong>Resultado esperado:</strong> Como puede observar aparece una
advertencia indicando que algunos de los valores han sido convertidos en
valores <code>NA</code>. Esto se debe a que hay elementos no numéricos
en la variable. Al explorar el contenido de la variable podemos notar
que la talla está como un vector de caracteres y los separadores
incluyen puntos, comas, espacios, etc, pero en este caso es un sólo
separador en todos los casos.</p>
<p>Cuando trabajamos con una variable numérica, es fundamental conocer
si su recolección y digitación se realizaron de manera estandarizada y
limitada a valores numéricos. Para corregir errores como el uso de
caracteres en lugar de números, podemos recurrir a funciones de búsqueda
y reemplazo de caracteres dentro del contenido de la variable. Una
opción es utilizar la función <code>str_replace</code> que se encuentra
en el paquete <code>stringr</code> de R.</p>
<div id="callout9" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Aviso</h3>
<div class="callout-content">
<p>La función <code>str_replace</code> requiere de tres argumentos:</p>
<ul>
<li><p><code>string</code>: el vector de la variable que se
modificará.</p></li>
<li><p><code>pattern</code>: el carácter que se desea reemplazar. Sin
embargo, por practicidad podemos emplear expresiones regulares. Por
ejemplo, la expresión <code>"[^0-9]"</code> indica que se selecciona
cualquier carácter que no sea un número. . Se pone entre
comillas.</p></li>
<li><p><code>replacement</code>: el carácter que reemplazará al del
primer argumento. Se pone entre comillas.</p></li>
</ul>
</div>
</div>
</div>
<p>⚠️ <strong>Instrucción:</strong> Utilice la función
<code>str_replace</code> para reemplazar dentro de la variable talla
(introducida como carácter) todos los elementos que no sean (^) números
del 0 al 9 o un punto: por un punto.</p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">&lt;-</span> <span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">mutate</span><span class="op">(</span>talla <span class="op">=</span> </span>
<span>                  <span class="fu">stringr</span><span class="fu">::</span><span class="fu">str_replace</span><span class="op">(</span></span>
<span>                    string <span class="op">=</span> <span class="va">talla</span>, </span>
<span>                    pattern<span class="op">=</span> <span class="st">"[^0-9.]"</span>,</span>
<span>                    replacement<span class="op">=</span><span class="st">"."</span><span class="op">)</span></span>
<span>                <span class="op">)</span></span></code></pre>
</div>
<p>⚠️ <strong>Instrucción:</strong> Verifique si se realizo el cambio
deseado:</p>
<div class="codewrapper sourceCode" id="cb43">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">pull</span><span class="op">(</span><span class="va">talla</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">utils</span><span class="fu">::</span><span class="fu">head</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "1.73" "1.67" "1.69" "1.66" "1.63" "1.68"</code></pre>
</div>
<p>⚠️ <strong>Instrucción:</strong> Compruebe el efecto de la
transformación y usando la función table obtenga una tabla que
cuantifique los NA resultante de convertir la variable talla en formato
numérico con la función <code>as.numeric</code>. Para comprobar si un
dato es NA puede usar la función <code>is.na</code>.</p>
<div class="codewrapper sourceCode" id="cb45">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">pull</span><span class="op">(</span><span class="va">talla</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="fu">as.numeric</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="fu">is.na</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="fu">table</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">.</span></span>
<span><span class="cn">FALSE</span></span>
<span><span class="fl">79200</span> </span></code></pre>
</div>
<p><strong>Resultado esperado:</strong> Si el cambio de decimales fue
exitoso con el dataset y que en caso de reemplazarlo por numérico no
tendría NAs. Por lo tanto está bien hacer el cambio a numérico.</p>
<p>⚠️ <strong>Instrucción:</strong> Transforme la variable talla a
formato numérico e imprima las primeras filas.</p>
<div class="codewrapper sourceCode" id="cb47">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">&lt;-</span> <span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">mutate</span><span class="op">(</span>talla <span class="op">=</span> <span class="fu">as.numeric</span> <span class="op">(</span><span class="va">talla</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">pull</span><span class="op">(</span><span class="va">talla</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">utils</span><span class="fu">::</span><span class="fu">head</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1.73 1.67 1.69 1.66 1.63 1.68</code></pre>
</div>
<p>Como podemos ver, una vez hecha la transformación ya no aparecen
comillas ““, indicando que ya se hizo la conversión a numéricos.</p>
</div>
<div class="section level5">
<h5 id="nas-relacionados-con-errores-en-la-escritura-de-fechas">
<strong>NAs relacionados con errores en la escritura de
fechas</strong><a class="anchor" aria-label="anchor" href="#nas-relacionados-con-errores-en-la-escritura-de-fechas"></a>
</h5>
<p>En algunas ocasiones puede ocurrir que la escritura de fechas sigue
el criterio de quién recolecta los datos. Por ejemplo, en un formulario
que contiene día/mes/año podemos encontrar diligenciamientos como:
“2015-03-15”, “15-03-15”, “2015-mar-15”, “01/mar/2023”, “15/15/03”,
“ene/15”. Dado que corregir una innumerable cantidad de fechas puede ser
una tarea inviable, la función standardize_dates del paquete
<code>cleanepi</code> ofrece una alternativa para hacer corrección
automática, además de convertir la columna al formato fecha
(<code>date</code>).</p>
<div id="callout10" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Aviso</h3>
<div class="callout-content">
<p>La función <code>standardize_dates</code> además del argumento data
tiene un argumento principal que es:</p>
<ul>
<li>
<code>target_columns</code>: las columnas que contienen las fechas
que se van a estandarizar.</li>
</ul>
<p>Y tres argumentos opcionales:</p>
<ul>
<li><p><code>error_tolerance</code>: el porcentaje permitido de fechas
que no se pueden corregir antes de que se detenga la función.</p></li>
<li><p><code>format</code>: el formato de las fechas. Si se deja como
NULL, la función intentará adivinar el formato. </p></li>
<li><p><code>timeframe</code>: el rango de fechas permitido. Si se deja
como NULL, la función no restringirá las fechas. </p></li>
</ul>
</div>
</div>
</div>
<p>⚠️ <strong>Instrucción:</strong> Observe cómo está compuesta la
variable <code>fecha_reporte_web</code>.</p>
<div class="codewrapper sourceCode" id="cb49">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">select</span><span class="op">(</span><span class="va">fecha_reporte_web</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">slice</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>   fecha_reporte_web
1         2021-03-15
2           21-03-23
3        2021-mar-15
4        01/mar/2021
5           21/15/01
6             ene/15
7         28/01/2022
8         07/07/2022
9         21/01/2022
10        22/03/2021</code></pre>
</div>
<p>Como puede observar las fechas se presentan en varios formatos,
además como se vio cuando usamos glimpse la columna está en formato
carácter. Para estandarizar estos formatos de fechas y dar formato fecha
a la variable emplearemos la función <code>standarize_dates</code>. </p>
<p>⚠️ <strong>Instrucción:</strong> Convierta la variable
<code>fecha_reporte_web</code> a tipo fecha usando la función
<code>standardize_dates</code>.</p>
<div class="codewrapper sourceCode" id="cb51">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">select</span><span class="op">(</span><span class="va">fecha_reporte_web</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">slice</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">cleanepi</span><span class="fu">::</span><span class="fu">standardize_dates</span><span class="op">(</span><span class="op">)</span> </span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>   fecha_reporte_web
1         2021-03-15
2         2023-03-21
3         2021-03-15
4         2021-03-01
5               &lt;NA&gt;
6               &lt;NA&gt;
7         2022-01-28
8         2022-07-07
9         2022-01-21
10        2021-03-22</code></pre>
</div>
<p>Como puede observar, dado que no especificamos el formato, la función
lo identificó de forma automática. En los casos en que la identificación
falló, los datos fueron transformados a <code>NA</code>.  Además, ahora
la columna está en formato fecha (<code>date</code>).</p>
<p>⚠️ <strong>Instrucción:</strong> Almacene el cambio en la variable
<code>fecha_reporte_web</code></p>
<div class="codewrapper sourceCode" id="cb53">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">&lt;-</span> <span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">cleanepi</span><span class="fu">::</span><span class="fu">standardize_dates</span><span class="op">(</span></span>
<span>    target_columns <span class="op">=</span> <span class="st">"fecha_reporte_web"</span><span class="op">)</span></span></code></pre>
</div>
</div>
<div class="section level5">
<h5 id="nas-relacionados-con-errores-en-la-escritura-de-números">
<strong>NAs relacionados con errores en la escritura de
números</strong><a class="anchor" aria-label="anchor" href="#nas-relacionados-con-errores-en-la-escritura-de-n%C3%BAmeros"></a>
</h5>
<p>En algunos casos pueden ocurrir errores en la recolección que no se
corrigen en la digitación como, por ejemplo, escribir el nombre de un
número (ej. “tres”) en lugar del símbolo que representa al número (ej.
“3”).</p>
<p>⚠️ <strong>Instrucción:</strong> Usando la función table explore la
variable <code>num_hos_rec</code></p>
<div class="codewrapper sourceCode" id="cb54">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">pull</span><span class="op">(</span><span class="va">num_hos_rec</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="fu">table</span><span class="op">(</span>useNA <span class="op">=</span> <span class="st">"always"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>.
    0     1     2     3  &lt;NA&gt;
57789  3094  3059  3100 12158 </code></pre>
</div>
<p>Como puede observar hay números escritos como letras y en símbolos,
así como dos categorías de datos que no se registraron y no hay
<code>NA</code> es decir que todos los registros cuentan con algún
valor.</p>
<p>Para corregir estos errores luego de identificarlos podemos
sustituirlos uno por uno con <code>gsub</code> o podemos aprovechar la
función <code>convert_to_numeric</code> del paquete cleanepi.</p>
<div id="callout11" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Aviso</h3>
<div class="callout-content">
<p>La función <code>convert_to_numeric</code> tiene 3 argumentos:</p>
<ul>
<li><p><code>data</code>: el dataset (o linelist) con los datos a
modificar.</p></li>
<li><p><code>target_colum</code>: el vector que contiene los nombres de
la(s) columna(s) a modificar.</p></li>
<li><p><code>lang</code>: El idioma en el que están los números lang =
c(“en”, “fr”, “es”).</p></li>
</ul>
</div>
</div>
</div>
<p>⚠️ <strong>Instrucción:</strong> Usando la función
<code>convert_to_numeric</code> corrija los errores de la variable
<code>num_hos_rec</code></p>
<div class="codewrapper sourceCode" id="cb56">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">&lt;-</span> <span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">cleanepi</span><span class="fu">::</span><span class="fu">convert_to_numeric</span><span class="op">(</span></span>
<span>    target_columns <span class="op">=</span> <span class="st">"num_hos_rec"</span>,</span>
<span>    lang <span class="op">=</span> <span class="st">"es"</span><span class="op">)</span></span></code></pre>
</div>
<p>⚠️ <strong>Instrucción:</strong> Usando la función table compruebe el
cambio en la variable <code>num_hos_rec</code></p>
<div class="codewrapper sourceCode" id="cb57">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">pull</span><span class="op">(</span><span class="va">num_hos_rec</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="fu">table</span><span class="op">(</span>useNA <span class="op">=</span> <span class="st">"always"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>.
    0     1     2     3  &lt;NA&gt;
57789  3094  3059  3100 12158 </code></pre>
</div>
<p>Como puede observar los números en letras fueron convertidos a sus
respectivos equivalentes numéricos. Mientras que todo elemento no
reconocido como número fue convertido en <code>NA</code>.</p>
</div>
<div class="section level5">
<h5 id="nas-relacionados-con-dos-datos-en-la-misma-columna">
<strong>NAs relacionados con dos datos en la misma
columna</strong><a class="anchor" aria-label="anchor" href="#nas-relacionados-con-dos-datos-en-la-misma-columna"></a>
</h5>
<p>En algunos casos un dataset puede contener dos variables en una misma
columna.</p>
<p>⚠️ <strong>Instrucción:</strong> Explore las primeras filas de la
variable <code>tension_arterial</code>.</p>
<div class="codewrapper sourceCode" id="cb59">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">pull</span><span class="op">(</span><span class="va">tension_arterial</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">utils</span><span class="fu">::</span><span class="fu">head</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "102/85" "148/72" "92/84"  "122/71" "153/88" "129/87"</code></pre>
</div>
<p><strong>Resultado esperado:</strong> En consistencia con lo
mencionado en la documentación del dataset “covid_LA_info.txt”, la
variable tension_arterial contiene dos datos en una misma columna
(tensión sistólica y tensión diastólica separada por “/”).</p>
<p>Para solucionar este problema podemos utilizar la función
<code>separate_wider_delim</code> de la librería <code>tidyr</code>
dentro del conjunto de librerías de <code>tidyverse</code>.</p>
<div id="callout12" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Aviso</h3>
<div class="callout-content">
<p>La función <code>separate_wider_delim</code> además de data tiene
tres argumentos principales.</p>
<ul>
<li><p><code>cols</code>: requiere el vector que contiene la columna de
un data frame.</p></li>
<li><p><code>delim</code>: requiere el separador que se empleó para
separar los datos.</p></li>
<li><p><code>names</code>: requiere el nombre de las columnas que se
crearán.</p></li>
</ul>
</div>
</div>
</div>
<p>⚠️ <strong>Instrucción:</strong> Empleando la función
<code>separate_wider_delim</code> separe la variable tension_arterial en
dos variables: <code>tension_sistolica</code> y
<code>tension_diastolica</code>.</p>
<div class="codewrapper sourceCode" id="cb61">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">&lt;-</span> <span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu">separate_wider_delim</span><span class="op">(</span>cols <span class="op">=</span> <span class="va">tension_arterial</span>,</span>
<span>                              delim <span class="op">=</span> <span class="st">"/"</span>,</span>
<span>                              names <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"tension_sistolica"</span>,</span>
<span>                                        <span class="st">"tension_diastolica"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">pull</span><span class="op">(</span><span class="va">tension_sistolica</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">utils</span><span class="fu">::</span><span class="fu">head</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "102" "148" "92"  "122" "153" "129"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb63">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">pull</span><span class="op">(</span><span class="va">tension_diastolica</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">utils</span><span class="fu">::</span><span class="fu">head</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "85" "72" "84" "71" "88" "87"</code></pre>
</div>
<p><strong>Resultado esperado:</strong> El código anterior genera los
cambios directamente en el dataset <code>covid</code> y se obtienen las
dos columnas nuevas.</p>
<p>Es importante recordar que todos estos cambios dependen de las
variables trabajadas y el analista de datos debe usar su criterio en
cada circunstancia y hacer pruebas que le permitan revisar si los
resultados son los esperados.</p>
</div>
</div>
<div class="section level4">
<h4 id="valores-infinitos-inf">
<strong>3.2.2. Valores infinitos (<code>Inf</code>)</strong><a class="anchor" aria-label="anchor" href="#valores-infinitos-inf"></a>
</h4>
<p>Los valores infinitos pueden generarse cuando una operación resulta
en un número demasiado grande (Inf+) o demasiado pequeño (Inf -) para R.
En R si intentamos calcular valores superiores o iguales a 2^1024 (más
grande que el número de granos de arena en el planeta tierra) o cuando
dividimos un número por valores muy cercanos a 0, específicamente
menores de 1/1e-309, obtendremos Inf. En el caso de valores inferiores a
1e-324 R los asume como 0:</p>
<p>⚠️ <strong>Instrucción:</strong> Observe los resultados de las
siguientes operaciones:</p>
<div class="codewrapper sourceCode" id="cb65">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">2</span><span class="op">^</span><span class="fl">1024</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] Inf</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb67">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">-</span><span class="fl">2</span><span class="op">^</span><span class="fl">1024</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] -Inf</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb69">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">1</span><span class="op">/</span><span class="fl">1e-309</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] Inf</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb71">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">1</span><span class="op">/</span><span class="fl">0</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] Inf</code></pre>
</div>
<p>La aparición de los valores <code>Inf</code> puede suceder en
cualquier momento del manejo de datos, particularmente cuando hay una
equivocación al realizar operaciones aritméticas. Por ejemplo, cuando se
quería calcular los días de vida, y en lugar de usar el operador de
multiplicación (*) se usó el operador de potencia (^).</p>
<div class="codewrapper sourceCode" id="cb73">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">&lt;-</span> <span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">mutate</span><span class="op">(</span>edad_en_dias <span class="op">=</span> <span class="va">edad</span> <span class="op">*</span> <span class="fl">365</span><span class="op">)</span></span>
<span></span>
<span><span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">pull</span><span class="op">(</span><span class="va">edad_en_dias</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">utils</span><span class="fu">::</span><span class="fu">head</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1]  9490 10220 22265  8760 18615  9125</code></pre>
</div>
</div>
<div class="section level4">
<h4 id="valores-indeterminados-nan">
<strong>3.2.3. Valores indeterminados
(<code>NaN</code>)</strong><a class="anchor" aria-label="anchor" href="#valores-indeterminados-nan"></a>
</h4>
<p>Estos valores se generan cuando se realizan operaciones
matemáticamente indefinidas. Por ejemplo, si intentamos dividir cero
entre cero o restar o dividir un número infinito de otro número
infinito, obtendremos <code>NaN</code> (que significa “No es un
número”). A continuación se muestran unos ejemplos:</p>
<p>⚠️ <strong>Instrucción:</strong> Observe las siguientes
operaciones</p>
<div class="codewrapper sourceCode" id="cb75">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="cn">Inf</span><span class="op">/</span><span class="cn">Inf</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] NaN</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb77">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="cn">Inf</span><span class="op">-</span><span class="cn">Inf</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] NaN</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb79">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">0</span><span class="op">/</span><span class="fl">0</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] NaN</code></pre>
</div>
<p>Aunque los resultados como <code>Inf</code> o <code>NaN</code> puedan
parecer imposibles, estos pueden aparecer cuando en el proceso de
conversión de variables cometemos un error o al crear una variable tras
una operación errónea y el error se propaga en operaciones
subsecuentes.</p>
</div>
<div class="section level4">
<h4 id="datos-duplicados">
<strong>3.2.4. Datos duplicados</strong><a class="anchor" aria-label="anchor" href="#datos-duplicados"></a>
</h4>
<p>Otro error que puede ocurrir frecuentemente son los datos duplicados.
Estos pueden ser tanto una observación de una variable duplicada o todo
un registro duplicado.</p>
<p>⚠️ <strong>Instrucción:</strong> Explore si en la variable
<code>id_de_caso</code> se repiten valores</p>
<div class="codewrapper sourceCode" id="cb81">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">pull</span><span class="op">(</span><span class="va">id_de_caso</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="fu">table</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="fu">table</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>.
    1     2     3
75797   203   999 </code></pre>
</div>
<p>Como puede observar al menos 1000 códigos de identificación se
repiten en el dataset dos o tres veces. Pero en ese punto aún no sabemos
si estos 1000 registros son errores o simplemente corresponden a dos
registros diferentes de la misma persona (por ejemplo,
reinfecciones).</p>
<p>Para identificar cuáles son registros (filas) totalmente duplicados
en todas sus variables que sí son errores podemos usar la función
duplicated y sumar los registros así:</p>
<div class="codewrapper sourceCode" id="cb83">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="fu">duplicated</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="fu">sum</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1196</code></pre>
</div>
<p>Para solucionar este problema podemos usar la función
<code>remove_duplicates</code> de cleanepi el cual permite eliminar las
filas que se repiten exactamente.</p>
<div id="callout13" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Aviso</h3>
<div class="callout-content">
<p>La función <code>remove_duplicates</code> tiene como argumento
principal:</p>
<ul>
<li>
<code>data</code>: el dataset (o linelist) con los datos a
modificar.</li>
</ul>
<p>Y un argumento opcional:</p>
<ul>
<li>
<code>target_columns</code>: un vector con los nombres de las
columnas que se usaran para buscar los duplicados.</li>
</ul>
</div>
</div>
</div>
<p>⚠️ <strong>Instrucción:</strong> Empleando la función
<code>remove_duplicates</code> elimine del dataset covid las filas
repetidas.</p>
<div class="codewrapper sourceCode" id="cb85">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">&lt;-</span> <span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">cleanepi</span><span class="fu">::</span><span class="fu">remove_duplicates</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Found 2391 duplicated rows. Please consult the report for more details.</code></pre>
</div>
<p>Como puede ver en la salida la función detectó 2391 filas replicadas
en su totalidad (pueden estar presentes dos veces o más). Si explora
nuevamente el dataset <code>covid</code> podrá observar que 1196 filas
desaparecieron. Además podrá observar que se genero una nueva columna en
el dataset llamada <code>row_id</code>.</p>
<p>Ahora observemos qué efecto tuvo en los identificadores únicos.</p>
<div class="codewrapper sourceCode" id="cb87">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">select</span><span class="op">(</span><span class="va">id_de_caso</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="fu">table</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="fu">table</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>.
    1     2
75994  1005 </code></pre>
</div>
<p>De acuerdo con esta tabla, una vez removimos los registros
duplicados, quedan 1005 identificadores de casos
(<code>id_de_caso</code>) que se registran dos veces.</p>
<p>En caso de que se desee mantener únicamente con el primer registro de
cada caso, se puede emplear la misma función
<code>remove_duplicates</code> usando adicionalmente el argumento
<code>target_columns</code> para especificar las columnas. Veamos un
ejemplo.</p>
<p>️<strong>Instrucción:</strong> Empleando la función
<code>remove_duplicates</code> elimine del dataset los datos
correspondiente a “<code>id_de_caso</code>” repetidos.</p>
<div class="codewrapper sourceCode" id="cb89">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">&lt;-</span> <span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">cleanepi</span><span class="fu">::</span><span class="fu">remove_duplicates</span><span class="op">(</span></span>
<span>    target_columns <span class="op">=</span> <span class="st">"id_de_caso"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Found 2010 duplicated rows. Please consult the report for more details.</code></pre>
</div>
<p>Como puede observar se encontraron 2010 <code>id_de_caso</code>
replicados. Por lo que si se explora el dataset covid podrá observar que
el efecto es la eliminación de 1005 filas. Note que el usuario debe
estar seguro de querer remover esas filas, de lo contrario puede
ejecutar la función sin sobrescribir el objeto para observar los
resultados y cuando se este seguro almacenarlo.</p>
</div>
<div class="section level4">
<h4 id="errores-tipográficos">
<strong>3.2.5. Errores tipográficos</strong><a class="anchor" aria-label="anchor" href="#errores-tipogr%C3%A1ficos"></a>
</h4>
<p>A veces, podemos encontrar que las categorías de una variable se han
escrito de múltiples maneras. Veamos un ejemplo:</p>
<div class="codewrapper sourceCode" id="cb91">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">pull</span><span class="op">(</span><span class="va">ubicacion_del_caso</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="fu">table</span><span class="op">(</span>useNA <span class="op">=</span> <span class="st">"always"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>.
        casa         Casa    Fallecido     Hospital Hospital UCI          N/A
         319        74533         1727           12            1          407
        &lt;NA&gt;
           0 </code></pre>
</div>
<p>Para corregir este error, podemos usar la función <code>gsub</code>
para reemplazar el valor incorrecto “casa” por el valor que hemos
seleccionado como correcto, “Casa”.</p>
<div class="codewrapper sourceCode" id="cb93">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">&lt;-</span> <span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">mutate</span><span class="op">(</span>ubicacion_del_caso <span class="op">=</span> </span>
<span>                                   <span class="fu">base</span><span class="fu">::</span><span class="fu">gsub</span><span class="op">(</span>pattern<span class="op">=</span> <span class="st">"casa"</span>,</span>
<span>                                        replacement<span class="op">=</span><span class="st">"Casa"</span>,</span>
<span>                                        x<span class="op">=</span> <span class="va">ubicacion_del_caso</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>Como resultado, los valores han sido reemplazados:</p>
<div class="codewrapper sourceCode" id="cb94">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">pull</span><span class="op">(</span><span class="va">ubicacion_del_caso</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="fu">table</span><span class="op">(</span>useNA <span class="op">=</span> <span class="st">"always"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>.
        Casa    Fallecido     Hospital Hospital UCI          N/A         &lt;NA&gt;
       74852         1727           12            1          407            0 </code></pre>
</div>
<center>
<p><a href="https://epiverse-trace.github.io/epitkit/Banco_errores.html" class="external-link"><img src="fig/dudas.png" width="100" class="figure"></a></p>
</center>
</div>
<div class="section level4">
<h4 id="reemplazar-valores-perdidos">
<strong>3.2.6. Reemplazar valores perdidos</strong><a class="anchor" aria-label="anchor" href="#reemplazar-valores-perdidos"></a>
</h4>
<p>En algunas ocasiones los dataset contienen valores que no
corresponden a las categorías de las variables, faltan o desde la
documentación sabemos que esos valores corresponden a <code>NA</code>.
Para garantizar un análisis robusto, es una buena práctica reemplazar
todos esos valores por <code>NA</code>. Para hacer este reemplazo lo
podemos hacer empleando la función <code>replace_missing_values</code>
del paquete cleanepi.</p>
<div id="callout14" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Aviso</h3>
<div class="callout-content">
<p>La función <code>replace_missing_values</code> además de data tiene
argumentos opcionales:</p>
<ul>
<li><p><code>na_strings</code>: el vector con los caracteres que
representan los valores perdidos (ej. “missing”, “NA”, “N A”). Si no se
diligencia este argumento se usaran los valores predefinidos en el
vector cleanepi::common_na_strings.</p></li>
<li><p><code>target_columns</code>: un vector con los nombres de las
columnas en las cuales se ejecutará la función.</p></li>
</ul>
</div>
</div>
</div>
<p>⚠️ <strong>Instrucción:</strong> Revise el contenido de la variable
<code>ubicacion_del_caso</code>:</p>
<div class="codewrapper sourceCode" id="cb96">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">pull</span><span class="op">(</span><span class="va">ubicacion_del_caso</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="fu">table</span><span class="op">(</span>useNA <span class="op">=</span> <span class="st">"always"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>.
        Casa    Fallecido     Hospital Hospital UCI          N/A         &lt;NA&gt;
       74852         1727           12            1          407            0 </code></pre>
</div>
<p>⚠️ <strong>Instrucción</strong>: Revise en la documentación que
posibles NA pueden aparecer en el dataset y reemplacelos por NA.</p>
<div class="codewrapper sourceCode" id="cb98">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">&lt;-</span> <span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">cleanepi</span><span class="fu">::</span><span class="fu">replace_missing_values</span><span class="op">(</span> na_strings <span class="op">=</span> <span class="st">"N/A"</span><span class="op">)</span></span></code></pre>
</div>
<p><strong>Instrucción:</strong> Revise el contenido de la variable
<code>ubicacion_del_caso</code> para ver los cambios:</p>
<div class="codewrapper sourceCode" id="cb99">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">pull</span><span class="op">(</span><span class="va">ubicacion_del_caso</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="fu">table</span><span class="op">(</span>useNA <span class="op">=</span> <span class="st">"always"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>.
        Casa    Fallecido     Hospital Hospital UCI         &lt;NA&gt;
       74852         1727           12            1          407 </code></pre>
</div>
</div>
<div class="section level4">
<h4 id="columnas-con-valores-constantes">
<strong>3.2.7. Columnas con valores constantes</strong><a class="anchor" aria-label="anchor" href="#columnas-con-valores-constantes"></a>
</h4>
<p>En algunas ocasiones, es posible encontrar columnas que contienen un
único valor. Esto puede ocurrir, por ejemplo, cuando se divide un
dataset de mayor tamaño en una fracción más pequeña. En estos casos, la
columna que servía para separar los datos se vuelve innecesaria. Para
estos casos se puede emplear la función <code>remove_constants</code>
del paquete cleanepi.</p>
<div id="callout15" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Aviso</h3>
<div class="callout-content">
<p>La función <code>remove_constants</code> tiene como argumento
principal:</p>
<ul>
<li>
<code>data</code>: el dataset (o linelist) con los datos a
modificar.</li>
</ul>
</div>
</div>
</div>
<p>⚠️ <strong>Instrucción:</strong> Empleando la función
<code>remove_constants</code> remueva las filas que tengan valores
constantes. </p>
<div class="codewrapper sourceCode" id="cb101">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">&lt;-</span> <span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">cleanepi</span><span class="fu">::</span><span class="fu">remove_constants</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p>Para verificar la cantidad de columnas que permanecen después del
proceso, puede utilizar la función <code>ncol</code>:</p>
<div class="codewrapper sourceCode" id="cb102">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="fu">ncol</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 25</code></pre>
</div>
</div>
<div class="section level4">
<h4 id="verificación-de-valores-atípicos">
<strong>3.2.8. Verificación de valores atípicos</strong><a class="anchor" aria-label="anchor" href="#verificaci%C3%B3n-de-valores-at%C3%ADpicos"></a>
</h4>
<p>Para evaluar si los datos se encuentran dentro de un rango esperado o
si existen valores atípicos, se puede emplear la creación de gráficas o
la exploración de la cabeza y cola de los datos cuando están ordenados;
por ejemplo, en el caso de las fechas se pueden crear curvas históricas,
o si son edades mediante histogramas o boxplot.</p>
<p>La identificación de valores atípicos puede variar según el criterio
del analista de datos y las características de la variable. Por ejemplo,
en la variable edad si bien valores superiores a los 100 años son
escasos biológicamente son viables, sin embargo, una edad de 200 años
podría considerarse un valor atípico. En el caso de las variables de
fecha, los valores atípicos pueden surgir cuando hay fechas que no
siguen el comportamiento esperado. Veamos un ejemplo con fechas:</p>
<p>⚠️ <strong>Instrucción:</strong> Antes de comenzar asegúrese que la
variable este en formato fecha, para revisar puede emplear la función
<strong><code>class</code>()</strong></p>
<div class="codewrapper sourceCode" id="cb104">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">pull</span><span class="op">(</span><span class="va">fecha_reporte_web</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="fu">class</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "Date"</code></pre>
</div>
<p>Si su variable no está en formato fecha (<code>date</code>), por
favor, revise nuevamente la sección <strong>NAs relacionados con errores
en la escritura de fechas</strong> y emplee la función ahí
aprendida.</p>
<p>⚠️ <strong>Instrucción:</strong> Empleando la función
<code>hist</code>, cree un histograma de las fechas en que fueron
reportados los casos por semana.</p>
<div class="codewrapper sourceCode" id="cb106">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">pull</span><span class="op">(</span><span class="va">fecha_reporte_web</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">graphics</span><span class="fu">::</span><span class="fu">hist</span><span class="op">(</span>breaks <span class="op">=</span> <span class="st">"weeks"</span><span class="op">)</span></span></code></pre>
</div>
<p><strong>Resultado esperado:</strong> Al usar el anterior código con
el mismo dataset se obtiene el siguiente resultado:</p>
<figure><img src="fig/limpieza-rendered-unnamed-chunk-78-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Como podemos observar la gráfica empieza desde 1969. Por razones
epidemiológicas rápidamente analizamos que al tratarse de casos COVID
esperaríamos que los registros empezaran desde 2020. Esto indica que
puede haber una fecha que esté mal digitada dando como resultado el
histograma anterior.</p>
<p>Para este caso podemos ordenar los datos con la función arrange del
paquete dplyr dentro de tidyverse para ver las fechas ordenadas e
identificar potenciales fechas erróneas al comienzo de la serie. Como se
muestra en el ejemplo a continuación:</p>
<p>⚠️ <strong>Instrucción:</strong> Observe los datos que encabezan el
dataset cuando está ordenada por fecha.</p>
<div class="codewrapper sourceCode" id="cb107">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">arrange</span><span class="op">(</span><span class="va">fecha_reporte_web</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">select</span><span class="op">(</span><span class="va">fecha_reporte_web</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">utils</span><span class="fu">::</span><span class="fu">head</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p><strong>Resultado esperado:</strong> Al usar el anterior código con
el mismo dataset se obtiene el siguiente resultado:</p>
<div class="codewrapper sourceCode" id="cb108">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">arrange</span><span class="op">(</span><span class="va">fecha_reporte_web</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">select</span><span class="op">(</span><span class="va">fecha_reporte_web</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">utils</span><span class="fu">::</span><span class="fu">head</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 6 × 1
  fecha_reporte_web
  &lt;date&gt;
1 1970-01-01
2 2020-03-20
3 2020-03-20
4 2020-03-21
5 2020-03-23
6 2020-03-24       </code></pre>
</div>
<p>En la primera fila tenemos el valor por fuera del rango esperado, es
decir, una fecha de 1970. En este caso es un solo dato el que debemos
corregir, sin embargo, podrían existir varios cientos de estos. Para
corregir este tipo de errores se puede eliminar las filas que contienen
estos datos o reasignar a estos valores con datos tipo NA para no perder
la demás información.</p>
</div>
<div class="section level4">
<h4 id="corrección-de-errores-en-fechas">
<strong>3.2.9. Corrección de errores en fechas</strong><a class="anchor" aria-label="anchor" href="#correcci%C3%B3n-de-errores-en-fechas"></a>
</h4>
<p>Una vez explorados los datos e identificados posibles errores,
podemos explorar las medidas correctivas a utilizar. En este caso
teniendo en cuenta que los primeros casos de COVID en latinoamérica
fueron en febrero del 2020 emplearemos el primero de febrero
(2020-02-01) como la fecha a partir de la cual consideraremos estos
datos como válidos. Podemos definir la fecha de corte a partir del
contexto epidemiológico, o la documentación.</p>
<p>⚠️ <strong>Instrucción:</strong> Filtre los datos por la fecha de
reporte antes de la fecha “2020-02-01”.</p>
<div class="codewrapper sourceCode" id="cb110">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">filter</span><span class="op">(</span><span class="va">fecha_reporte_web</span> <span class="op">&lt;</span> <span class="fu">as.Date</span><span class="op">(</span><span class="st">"2020-02-01"</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p><strong>Resultado esperado:</strong> Al usar el anterior código con
el mismo dataset se obtiene el siguiente resultado:</p>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 1 × 25
  fecha_reporte_web id_de_caso fecha_de_notificacion  edad sexo
  &lt;date&gt;                 &lt;int&gt; &lt;chr&gt;                 &lt;int&gt; &lt;fct&gt;
1 1970-01-01           1631715 21/12/2020               24 F
# ℹ 20 more variables: ubicacion_del_caso &lt;chr&gt;, estado &lt;chr&gt;,
#   recuperado &lt;chr&gt;, fecha_de_inicio_de_sintomas &lt;chr&gt;, fecha_de_muerte &lt;chr&gt;,
#   fecha_de_diagnostico &lt;chr&gt;, fecha_de_recuperacion &lt;chr&gt;,
#   tipo_de_recuperacion &lt;chr&gt;, fecha_de_nacimiento &lt;dbl&gt;,
#   nombre_del_pais &lt;fct&gt;, sintomas &lt;fct&gt;, edad_repetida &lt;int&gt;,
#   num_hos_rec &lt;dbl&gt;, tension_sistolica &lt;chr&gt;, tension_diastolica &lt;chr&gt;,
#   vacunado &lt;lgl&gt;, talla &lt;dbl&gt;, peso &lt;dbl&gt;, edad_en_dias &lt;dbl&gt;, row_id &lt;int&gt;</code></pre>
</div>
<p>Una vez identificados los datos, podemos corregirlos reemplazándolos
por el valor correcto (si lo conocemos), convirtiéndolos en valores NA o
excluyéndolos del análisis.</p>
<p>⚠️ <strong>Instrucción:</strong> Empleando la función filter excluya
las fechas previas a la fecha “2020-02-01” en la variable
fecha_reporte_web. Recuerde usar la expresión ! antes del nombre de la
variable para lograr una selección inversa.</p>
<div class="codewrapper sourceCode" id="cb112">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">&lt;-</span> <span class="va">covid</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">filter</span><span class="op">(</span><span class="op">!</span><span class="va">fecha_reporte_web</span> <span class="op">&lt;</span> <span class="fu">as.Date</span><span class="op">(</span><span class="st">"2020-02-01"</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>Ahora volvamos a producir la gráfica y observemos.</p>
<p>⚠️ <strong>Instrucción:</strong> Vuelva a producir el histograma con
la corrección en las fechas.</p>
<div class="codewrapper sourceCode" id="cb113">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">pull</span><span class="op">(</span><span class="va">fecha_reporte_web</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">graphics</span><span class="fu">::</span><span class="fu">hist</span><span class="op">(</span>breaks <span class="op">=</span> <span class="st">"weeks"</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/limpieza-rendered-unnamed-chunk-84-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p><strong>Resultado esperado:</strong> Al usar el anterior código con
el mismo dataset se obtiene el siguiente resultado:</p>
</div>
<div class="section level4">
<h4 id="filtrado-de-registros-con-na">
<strong>3.2.10. Filtrado de registros con NA</strong><a class="anchor" aria-label="anchor" href="#filtrado-de-registros-con-na"></a>
</h4>
<p>En ciertos análisis, puede ser necesario excluir los valores NA. Para
lograr esto, podemos utilizar la función de filtrado proporcionada por
<code>dplyr</code>. Esto nos permite centrarnos en los datos
completos.</p>
<p>⚠️ <strong>Instrucción:</strong> Revise el contenido de la variable
<code>ubicacion_del_caso</code>:</p>
<div class="codewrapper sourceCode" id="cb114">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">pull</span><span class="op">(</span><span class="va">ubicacion_del_caso</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="fu">table</span><span class="op">(</span>useNA <span class="op">=</span> <span class="st">"always"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>.
        Casa    Fallecido     Hospital Hospital UCI         &lt;NA&gt;
       74850         1726           12            1          407 </code></pre>
</div>
<p><strong>Instrucción</strong>: Filtre la variable
<code>ubicacion_del_caso</code> para excluir los registros con
<code>NA</code> presentes en esta variable:</p>
<div class="codewrapper sourceCode" id="cb116">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">&lt;-</span> <span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">filter</span><span class="op">(</span><span class="op">!</span><span class="fu">is.na</span><span class="op">(</span><span class="va">ubicacion_del_caso</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p><strong>Instrucción:</strong> Revise el contenido de la variable
ubicacion_del_caso para ver los cambios:</p>
<div class="codewrapper sourceCode" id="cb117">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">pull</span><span class="op">(</span><span class="va">ubicacion_del_caso</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="fu">table</span><span class="op">(</span>useNA <span class="op">=</span> <span class="st">"always"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>.
        Casa    Fallecido     Hospital Hospital UCI         &lt;NA&gt;
       74850         1726           12            1            0 </code></pre>
</div>
<p>Como puede observar ahora los NA son 0.</p>
</div>
<div class="section level4">
<h4 id="reemplazo-de-siglas-abreviaturas-o-valores-códigos">
<strong>3.2.11. Reemplazo de siglas, abreviaturas o valores
códigos</strong><a class="anchor" aria-label="anchor" href="#reemplazo-de-siglas-abreviaturas-o-valores-c%C3%B3digos"></a>
</h4>
<p>En el proceso de la recopilación o entrada de datos, es común el uso
de siglas, abreviaturas o códigos para registrar información. Por
ejemplo, en el caso de la variable de sexo, a veces se puede emplear
“1”, “m” o “M” para representar el sexo masculino, y “2”, “f” o “F” para
el sexo femenino, entre otras opciones. Si se cuenta con un diccionario
para la conversión de estos valores, es posible utilizar la función
<code>clean_using_dictionary</code> de del paquete 
<code>cleanepi</code> para realizar el reemplazo correspondiente.</p>
<p>Dado que de momento no tenemos un diccionario podemos crear uno.</p>
<div class="codewrapper sourceCode" id="cb119">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">diccionario</span> <span class="op">&lt;-</span> <span class="fu">base</span><span class="fu">::</span><span class="fu">data.frame</span><span class="op">(</span></span>
<span>  options <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"1"</span>, <span class="st">"2"</span>, <span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"m"</span>, <span class="st">"f"</span><span class="op">)</span>,</span>
<span>  values <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"masculino"</span>, <span class="st">"femenino"</span>, <span class="st">"masculino"</span>,</span>
<span>             <span class="st">"femenino"</span>, <span class="st">"masculino"</span>, <span class="st">"femenino"</span><span class="op">)</span>,</span>
<span>  grp <span class="op">=</span> <span class="fu">rep</span><span class="op">(</span><span class="st">"sexo"</span>, <span class="fl">6</span><span class="op">)</span>,</span>
<span>  orders <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span></span></code></pre>
</div>
<p>⚠️ <strong>Instrucción:</strong> Revise el contenido de la variable
<code>sexo</code>:</p>
<div class="codewrapper sourceCode" id="cb120">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">pull</span><span class="op">(</span><span class="va">sexo</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="fu">table</span><span class="op">(</span>useNA <span class="op">=</span> <span class="st">"always"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>.
    F     M  &lt;NA&gt;
40962 35627     0 </code></pre>
</div>
<div id="callout16" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Aviso</h3>
<div class="callout-content">
<p>La función <code>clean_using_dictionary</code> tiene como argumento
principal:</p>
<ul>
<li><p><code>data</code>: el dataset (o linelist) con los datos a
modificar.</p></li>
<li><p><code>dictionary</code>: un diccionario que contiene los valores
que se van a reemplazar los datos actuales. Cada clave en el diccionario
representa un valor original en el conjunto de datos, y el valor
asociado a esa clave es el nuevo significado que se le asignará al
dato.</p></li>
</ul>
</div>
</div>
</div>
<p>⚠️ <strong>Instrucción:</strong> Aplique la función
<code>clean_using_dictionary</code> al dataset:</p>
<div class="codewrapper sourceCode" id="cb122">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">&lt;-</span> <span class="fu">cleanepi</span><span class="fu">::</span><span class="fu">clean_using_dictionary</span><span class="op">(</span><span class="va">covid</span>,</span>
<span>                                          dictionary <span class="op">=</span> <span class="va">diccionario</span><span class="op">)</span></span></code></pre>
</div>
<p>⚠️ <strong>Instrucción:</strong> Revise el contenido de la variable
sexo para ver los cambios:</p>
<div class="codewrapper sourceCode" id="cb123">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">pull</span><span class="op">(</span><span class="va">sexo</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="fu">table</span><span class="op">(</span>useNA <span class="op">=</span> <span class="st">"always"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>.
masculino  femenino      &lt;NA&gt;
    35627     40962         0 </code></pre>
</div>
<center>
<p><a href="https://epiverse-trace.github.io/epitkit/Banco_errores.html" class="external-link"><img src="fig/dudas.png" width="100" class="figure"></a></p>
</center>
</div>
</div>
</section><section><h2 class="section-heading" id="tema-4-organización-de-los-datos">
<strong>Tema 4: Organización de los datos</strong><a class="anchor" aria-label="anchor" href="#tema-4-organizaci%C3%B3n-de-los-datos"></a>
</h2>
<hr class="half-width">
<p>Finalmente podemos realizar algunas actividades de organización de
datos. Como, por ejemplo:</p>
<div class="section level3">
<h3 id="eliminación-de-variables-repetidas-o-que-no-tengan-utilidad-en-responder-la-pregunta-de-investigación">4.1. Eliminación de variables repetidas o que no tengan utilidad en
responder la pregunta de investigación<a class="anchor" aria-label="anchor" href="#eliminaci%C3%B3n-de-variables-repetidas-o-que-no-tengan-utilidad-en-responder-la-pregunta-de-investigaci%C3%B3n"></a>
</h3>
<p>Durante la exploración de datos es posible encontrar variables cuyo
contenido no es necesario para el análisis o que ya no se requieren.
Para optimizar el uso de recursos de memoria en el equipo, podemos
eliminar estas variables. Para lograrlo podemos usar la función select
del paquete tidyverse.</p>
<p>⚠️ <strong>Instrucción:</strong> Empleando la función select
acompañada del símbolo - elimine la variable edad_repetida.</p>
<div class="codewrapper sourceCode" id="cb125">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">&lt;-</span> <span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">select</span> <span class="op">(</span><span class="op">!</span><span class="va">edad_repetida</span><span class="op">)</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="organización-de-las-variables">4.2. Organización de las variables<a class="anchor" aria-label="anchor" href="#organizaci%C3%B3n-de-las-variables"></a>
</h3>
<p>Parte de la organización de las variables incluye asignar nombres
apropiados a las variables, según la necesidad del proyecto. Esto se
puede lograr mediante la función <code>rename</code> de
<code>dplyr</code>.</p>
<p>⚠️ <strong>Instrucción:</strong> Empleando la función rename cambie
el nombre de la variable <code>fecha_de_inicio_de_sintomas</code> a un
nombre más corto como, por ejemplo: <code>inicio_sintomas</code>.</p>
<div class="codewrapper sourceCode" id="cb126">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">&lt;-</span> <span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">rename</span><span class="op">(</span>inicio_sintomas <span class="op">=</span> <span class="va">fecha_de_inicio_de_sintomas</span><span class="op">)</span></span></code></pre>
</div>
<p>¿A qué otras columnas les cambiaría el nombre?</p>
</div>
<div class="section level3">
<h3 id="almacenamiento-del-dataset-limpio">4.3. Almacenamiento del dataset limpio<a class="anchor" aria-label="anchor" href="#almacenamiento-del-dataset-limpio"></a>
</h3>
<p>Una vez se haya terminado la modificación, limpieza y corrección de
los datos podemos guardar el dataset limpio. Esto se debe a que, todos
los cambios que han sido realizados se han guardado únicamente en la
sesión de R, y se perderán una vez que esta se cierre. Para hacerlo, se
puede utilizar la función export del paquete rio.</p>
<div id="callout17" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Aviso</h3>
<div class="callout-content">
<p>La función <code>export</code> necesita mínimo dos argumentos:</p>
<ol style="list-style-type: decimal">
<li><p>x: El <strong>nombre del objeto</strong> que se guardará en el
archivo.</p></li>
<li><p>file: El <strong>nombre del archivo</strong> con su extensión
(ej. datos_limpios_covid.RDS). Si se almacenará en una carpeta, se
agrega la ruta a la carpeta antes del nombre del archivo
(ej.datos/limpios/datos_limpios_covid.RDS).</p></li>
</ol>
</div>
</div>
</div>
<p>⚠️ <strong>Instrucción:</strong> Cree un directorio de datos limpios
y almacene los datos corregidos en el formato de su preferencia. Le
recomendamos .RDS.</p>
<div class="codewrapper sourceCode" id="cb127">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">rio</span><span class="fu">::</span><span class="fu">export</span><span class="op">(</span><span class="va">covid</span>, <span class="st">"datos/limpios/datos_limpios_covid.RDS"</span><span class="op">)</span><span class="co"># guarde los datos</span></span></code></pre>
</div>
<p><strong>Resultado esperado:</strong> Para observar el resultado vaya
a su carpeta datos y a la subcarpeta limpios. Ahí verá un archivo
llamado datos_limpios_covid.RDS. También puede almacenar el archivo en
formato .xls o .xlsx para Excel, así como en otros múltiples formatos.
Sin embargo, se recomienda RDS por su bajo peso y capacidad de
almacenamiento.</p>
<center>
<p><a href="https://epiverse-trace.github.io/epitkit/Banco_errores.html" class="external-link"><img src="fig/dudas.png" width="100" class="figure"></a></p>
</center>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Puntos Clave</h3>
<div class="callout-content">
<p>Revise si al final de esta lección adquirió estas competencias:</p>
<ul>
<li><p>Reconocer las herramientas que facilitan la limpieza de datos
epidemiológicos.</p></li>
<li><p>Identificar las buenas prácticas de la limpieza de datos
epidemiológicos.</p></li>
<li><p>Explorar el proceso de limpieza, organización y caracterización
de datos epidemiológicos.</p></li>
</ul>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="contribuciones">Contribuciones<a class="anchor" aria-label="anchor" href="#contribuciones"></a>
</h3>
<ul>
<li>Zulma M. Cucunuba: Versión inicial</li>
<li>Laura Gómez-Bermeo: Edición</li>
<li>Geraldine Gomez: Ediciones menores</li>
<li>Andree Valle: Ediciones menores</li>
<li>José M. Velasco España: Ediciones menores</li>
</ul>
</div>
<div class="section level3">
<h3 id="asuntos-legales">Asuntos legales<a class="anchor" aria-label="anchor" href="#asuntos-legales"></a>
</h3>
<p><strong>Copyright</strong>: Zulma M. Cucunuba, 2019</p>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div>
</section></section><section id="aio-zika"><p>Content from <a href="zika.html">Construyendo un modelo deterministico simple</a></p>
<hr>
<p>Última actualización: 2025-06-06 |

        <a href="https://github.com/epiverse-trace/epitkit/edit/main/episodes/zika.Rmd" class="external-link">Mejora esta página <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Mostrar todas las soluciones " data-collapse="Cerrar todas las soluciones "> Mostrar todas las soluciones <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Hoja de ruta</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Preguntas</h3>
<ul>
<li>¿Cómo construir un modelo simplificado de zika?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objetivos</h3>
<p>Al final de este taller usted podrá:</p>
<ul>
<li>Reconocer cómo se construye un modelo determinístico simple mediante
ecuaciones diferenciales ordinarias.</li>
<li>Identificar parámetros relevantes para modelar epidemias de
ETV.</li>
<li>Diagramar la interacción entre los diferentes compartimentos del
sistema mediante los parámetros.</li>
<li>Traducir ecuaciones matemáticas del modelo determinístico a código
de lenguaje R.</li>
<li>Explorar el uso de las simulaciones del modelo para proyectar
escenarios de transmisión y potencial impacto de las intervenciones</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="prereq1" class="callout prereq">
<div class="callout-square">
<i class="callout-icon" data-feather="check"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Pre requisito</h3>
<div class="callout-content">
<p>Esta unidad tiene como prerequisitos:</p>
<ul>
<li>Introducción a R y RStudio</li>
<li>Introducción a la teoría epidémica</li>
<li>Historia de las epidemias y las pandemias</li>
<li>Visualización de datos en R con ggplot</li>
</ul>
</div>
</div>
</div>
<div id="tabla-de-contenido" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="tabla-de-contenido" class="callout-inner">
<h3 class="callout-title"><strong>Tabla de contenido</strong></h3>
<div class="callout-content">
<table style="width:96%;" class="table">
<colgroup><col width="95%"></colgroup>
<tbody><tr class="odd">
<td><ol style="list-style-type: decimal">
<li><p>Tema 1: Enfermedades transmitidas por vectores: Biología del
vector, virus del Zika, diagnóstico e intervenciones</p></li>
<li><p>Tema 2: Repaso ¿Qué es un modelo determinístico simple?</p></li>
<li><p>Tema 3: Modelo SIR simple Zika</p></li>
<li><p>Tema 4: Elaborando diagramas y ecuaciones del modelo
Zika</p></li>
<li><p>Tema 5. Elaborando la tabla de parámetros del modelo simple de
Zika.</p></li>
<li><p>Tema 6: Modelo Zika en R</p></li>
<li><p>Tema 7: Parametrización de intervenciones de control para
Zika</p></li>
</ol></td>
</tr></tbody>
</table>
</div>
</div>
</div>
<section><h2 class="section-heading" id="introducción">Introducción<a class="anchor" aria-label="anchor" href="#introducci%C3%B3n"></a>
</h2>
<hr class="half-width">
<p>En esta unidad abordaremos la construcción de un modelo
determinístico simple, específicamente para el virus del Zika, una
enfermedad que desencadenó una gran epidemia en Latinoamérica y el
Caribe, y que fue declarada como emergencia de salud pública de
importancia internacional. Utilizando los conocimientos previos de
teoría epidémica, construiremos un modelo determinístico tipo SIR que
incorpora aspectos demográficos.</p>
<p>Para la construcción de este modelo, aprenderemos sobre la dinámica
de interacción entre humanos y vectores, así como de los parámetros
fundamentales que rigen estos procesos biológicos. Mediante la
construcción de un diagrama, examinaremos estas relaciones y
formularemos ecuaciones que describen el comportamiento del sistema.
Estas ecuaciones serán la base para simular el modelo en el lenguaje de
programación R. A su vez propondremos y modelaremos estrategias de
intervención.</p>
<p>Mediante el análisis del modelo, evaluaremos el potencial impacto de
esta epidemia en la sociedad, contextualizando algunas de estas
intervenciones en América Latina. Además, reforzaremos y aplicaremos
temas clave como son: Modelo SIR, Inmunidad de rebaño, Parámetros e
intervenciones de control (fumigación, mosquiteros y vacunación) para
una Enfermedad transmitida por vectores (ETV).</p>
</section><section><h2 class="section-heading" id="tema-6-modelo-zika-en-r">
<strong>Tema 6: Modelo Zika en R</strong><a class="anchor" aria-label="anchor" href="#tema-6-modelo-zika-en-r"></a>
</h2>
<hr class="half-width">
<p>En esta sección pondremos en uso el conocimiento adquirido sobre el
Zika, los mecanismos involucrados en la transmisión y las ecuaciones del
modelo. El objetivo es construirlo en R.</p>
<p>El único paquete que se requiere para el modelamiento es deSolve, el
cual permite resolver las ecuaciones diferenciales. Adicionalmente para
manejar los datos y graficar los resultados recomendamos usar tidyverse
y cowplot.</p>
</section><section><h2 class="section-heading" id="inicio-práctica-en-r">6.1 Inicio práctica en R<a class="anchor" aria-label="anchor" href="#inicio-pr%C3%A1ctica-en-r"></a>
</h2>
<hr class="half-width">
<p>Para iniciar nuestra práctica en <strong>R</strong>, por favor abra
un <strong>proyecto de R</strong> y cree un nuevo documento. En este
documento debemos cargar las funciones que acabamos de explicar. Si
tiene dificultades con este proceso por favor repase la <strong>unidad
Introducción a R</strong>.</p>
<p>install.packages(deSolve) # Paquete deSolve para resolver las
ecuaciones diferenciales</p>
<p>Una vez instalado el paquete deSolve por favor cárgue los paquetes
con las siguientes líneas de código, cópielas en su script de R y
ejecútelas.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">deSolve</span><span class="op">)</span></span>
<span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">tidyverse</span><span class="op">)</span></span>
<span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">cowplot</span><span class="op">)</span></span></code></pre>
</div>
<center>
<p><a href="https://epiverse-trace.github.io/epitkit/Banco_errores.html" class="external-link"><img src="fig/dudas.png" width="100" class="figure"></a></p>
</center>
<p>Recordemos que para crear un modelo necesitamos compartimentos,
condiciones iniciales, parámetros y ecuaciones.</p>
<p>Para este modelo en R empezaremos por definir los parámetros, es
decir, todos aquellos valores que a través de la investigación se han
recopilado y hacen parte del comportamiento de la enfermedad. En la
sección anterior hablamos sobre ellos y los completamos en una tabla. Es
hora de ingresarlos en R.</p>
<p><strong>Instrucción</strong>: Por favor, tome la tabla que trabajó
anteriormente e ingrese el valor de cada uno de estos parámetros.</p>
<div id="nota" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="nota" class="callout-inner">
<h3 class="callout-title">NOTA:</h3>
<div class="callout-content">
<p>Es importante recordar que en R, puede utilizar objetos previamente
creados para realizar cálculos. Por ejemplo, el parámetro muv es el
inverso del parámetro Lv, es decir, muv = 1/Lv. Por lo tanto, en R se
puede asignar este valor directamente con muv &lt;- 1/Lv. No es
necesario realizar la división y asignar el resultado manualmente.</p>
</div>
</div>
</div>
<div id="desafío-1" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="desafío-1" class="callout-inner">
<h3 class="callout-title">Desafío 1</h3>
<div class="callout-content">
<p>Instrucción: Por favor, tome la tabla que trabajó anteriormente e
ingrese el valor de cada uno de estos parámetros.</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Lv</span>       <span class="op">&lt;-</span>        <span class="co"># Esperanza de vida de los mosquitos (en días)</span></span>
<span><span class="va">Lh</span>       <span class="op">&lt;-</span>        <span class="co"># Esperanza de vida de los humanos (en días)</span></span>
<span><span class="va">PIh</span>      <span class="op">&lt;-</span>        <span class="co"># Periodo infeccioso en humanos (en días)</span></span>
<span><span class="va">PIv</span>      <span class="op">&lt;-</span>        <span class="co"># Periodo infeccioso en vectores (en días)</span></span>
<span><span class="va">PEI</span>      <span class="op">&lt;-</span>        <span class="co"># Período extrínseco de incubación en mosquitos adultos (en días)</span></span>
<span><span class="va">muv</span>      <span class="op">&lt;-</span>        <span class="co"># Tasa per cápita de mortalidad de la población de mosquitos (1/Lv)</span></span>
<span><span class="va">muh</span>      <span class="op">&lt;-</span>        <span class="co"># Tasa per cápita de mortalidad de la población de humanos (1/Lh)</span></span>
<span><span class="va">alphav</span>   <span class="op">&lt;-</span>        <span class="co"># Tasa per cápita de natalidad de la población de mosquitos. Por ahora asumiremos que es la misma de tasa de mortalidad.</span></span>
<span><span class="va">alphah</span>   <span class="op">&lt;-</span>        <span class="co"># Tasa per cápita de natalidad de la población de humanos.  Por ahora asumiremos que es la misma de tasa de mortalidad</span></span>
<span><span class="va">gamma</span>    <span class="op">&lt;-</span>        <span class="co"># Tasa de recuperación en humanos (1/PIh)</span></span>
<span><span class="va">delta</span>    <span class="op">&lt;-</span>        <span class="co"># Tasa extrínseca de incubación (1/PEI)</span></span>
<span><span class="va">Nh</span>       <span class="op">&lt;-</span>        <span class="co"># Número de humanos. Para este ejercicio proponemos 100.000 humanos. Puede cambiarlos si desea de acuerdo a su contexto.</span></span>
<span><span class="va">m</span>        <span class="op">&lt;-</span>        <span class="co"># Densidad de mosquitos hembra por humano</span></span>
<span><span class="va">Nv</span>       <span class="op">&lt;-</span>        <span class="co"># Número de mosquitos (m * Nh)</span></span>
<span><span class="va">R0</span>       <span class="op">&lt;-</span>        <span class="co"># Número reproductivo básico</span></span>
<span><span class="va">ph</span>       <span class="op">&lt;-</span>        <span class="co"># Probabilidad de transmisión de un mosquito infeccioso a un humano susceptible después de una picadura.</span></span>
<span><span class="va">pv</span>       <span class="op">&lt;-</span>        <span class="co"># Probabilidad de transmisión de un humano infeccioso a un mosquito susceptible después de una picadura.</span></span>
<span><span class="va">b</span>        <span class="op">&lt;-</span>        <span class="fu">sqrt</span><span class="op">(</span><span class="op">(</span><span class="va">R0</span> <span class="op">*</span> <span class="va">muv</span><span class="op">*</span><span class="op">(</span><span class="va">muv</span><span class="op">+</span><span class="va">delta</span><span class="op">)</span> <span class="op">*</span> <span class="op">(</span><span class="va">muh</span><span class="op">+</span><span class="va">gamma</span><span class="op">)</span><span class="op">)</span> <span class="op">/</span></span>
<span>                   <span class="op">(</span><span class="va">m</span> <span class="op">*</span> <span class="va">ph</span> <span class="op">*</span> <span class="va">pv</span> <span class="op">*</span> <span class="va">delta</span><span class="op">)</span><span class="op">)</span> <span class="co"># Tasa de picadura</span></span>
<span><span class="va">betah</span>    <span class="op">&lt;-</span>        <span class="co"># Coeficiente de transmisión de un mosquito infeccioso a un humano susceptible después de una picadura (ph*b)</span></span>
<span><span class="va">betav</span>    <span class="op">&lt;-</span>        <span class="co"># Coeficiente de transmisión de un humano infeccioso a un mosquito susceptible después de una picadura (pv*b)</span></span>
<span><span class="va">TIME</span>     <span class="op">&lt;-</span>  <span class="fl">1</span>      <span class="co"># Número de años que se va a simular. Para este ejercicio iniciaremos con el primer año de la epidemia.</span></span></code></pre>
</div>
</div>
</div>
</div>

<center>
<p><a href="https://epiverse-trace.github.io/epitkit/Banco_errores.html" class="external-link"><img src="fig/dudas.png" width="100" class="figure"></a></p>
</center>
</section><section><h2 class="section-heading" id="ecuaciones-del-modelo">6.2 Ecuaciones del modelo<a class="anchor" aria-label="anchor" href="#ecuaciones-del-modelo"></a>
</h2>
<hr class="half-width">
<p>Ahora que ya ingresamos al script los parámetros es hora de emplear
las ecuaciones que se escribieron antes, las cuales permiten conocer el
número de individuos en cada uno de los seis compartimentos en función
del tiempo. Tres compartimentos para los humanos y tres compartimentos
para los mosquitos, los cuales están identificados por una
<strong>h</strong> (para humanos) y una <strong>v</strong> (para
mosquitos). Para los humanos tenemos los compartimentos; susceptibles,
infectados y recuperados (de ahí la palabra <strong>SIR</strong>) y para
los mosquitos los compartimientos son: susceptibles, expuestos e
infecciosos (<strong>SEI</strong>).</p>
<div id="compartimentos" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="compartimentos" class="callout-inner">
<h3 class="callout-title">Compartimentos</h3>
<div class="callout-content">
<ul>
<li><p><span class="math inline">\(S_h\)</span> : Humanos
susceptibles</p></li>
<li><p><span class="math inline">\(I_h\)</span> : Humanos
infecciosos</p></li>
<li><p><span class="math inline">\(R_h\)</span> : Humanos recuperados de
la infección (inmunizados frente a nueva infección)</p></li>
<li><p><span class="math inline">\(S_v\)</span> : Vectores
susceptibles</p></li>
<li><p><span class="math inline">\(E_v\)</span> : Vectores
expuestos</p></li>
<li><p><span class="math inline">\(I_v\)</span> : Vectores
infecciosos</p></li>
</ul>
</div>
</div>
</div>
<p>Para este modelo emplearemos las siguientes ecuaciones
diferenciales:</p>
<div class="section level3">
<h3 id="humanos">6.2.1 Humanos<a class="anchor" aria-label="anchor" href="#humanos"></a>
</h3>
<p><span class="math display">\[\ \frac{dSh}{dt}  = \alpha_h N_h -
\beta_h \frac {I_v}{N_h}S_h - \mu_h  S_h \]</span></p>
<p><span class="math display">\[\ \frac{dIh}{dt}  = \beta_h \frac
{I_v}{N_h}S_h - (\gamma + \mu_h) I_h \]</span><br></p>
<p><span class="math display">\[\ \frac{dRh}{dt}  = \gamma I_h  - \mu_h
R_h\]</span></p>
</div>
<div class="section level3">
<h3 id="vectores">6.2.2 Vectores<a class="anchor" aria-label="anchor" href="#vectores"></a>
</h3>
<p><span class="math display">\[\ \frac{dSv}{dt}  = \alpha_v N_v  -
\beta_v \frac{ I_h} {N_h}S_v  - \mu_v Sv\]</span></p>
<p><span class="math display">\[\ \frac{dE_v}{dt}  = \beta_v \frac{I_h}
{N_h}S_v- (\delta + \mu_v) Ev\]</span><br></p>
<p><span class="math display">\[\ \frac{dI_v}{dt}  = \delta Ev - \mu_v
I_v\]</span></p>
</div>
</section><section><h2 class="section-heading" id="fórmula-para-calcular-r_0-número-reproductivo-básico">6.3 Fórmula para calcular <span class="math inline">\(R_0\)</span>
(Número reproductivo básico)<a class="anchor" aria-label="anchor" href="#f%C3%B3rmula-para-calcular-r_0-n%C3%BAmero-reproductivo-b%C3%A1sico"></a>
</h2>
<hr class="half-width">
<p>Fórmula necesaria para estimar <span class="math inline">\(R_0\)</span>:</p>
<p><span class="math display">\[ R_0 = \frac{mb^2 p_h p_v \delta}{\mu_v
(\mu_v+\delta)(\mu_h+\gamma)} \]</span></p>
<div id="discussion2" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Desafío</h3>
<div class="callout-content">
<p><strong>Instrucción</strong>: Traduzca las ecuaciones a R</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="co"># Humanos</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>         dSh   <span class="ot">&lt;-</span>  alphah <span class="sc">*</span> Nh <span class="sc">-</span> betah <span class="sc">*</span> (Iv<span class="sc">/</span>Nh) <span class="sc">*</span> Sh <span class="sc">-</span> muh <span class="sc">*</span> Sh   </span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>         dIh   <span class="ot">&lt;-</span>______ <span class="sc">*</span> (Iv<span class="sc">/</span>Nh) <span class="sc">*</span> Sh <span class="sc">-</span> (____ <span class="sc">+</span> _____) <span class="sc">*</span> Ih</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>         dRh   <span class="ot">&lt;-</span>  ______ <span class="sc">*</span> Ih  <span class="sc">-</span> ______ <span class="sc">*</span> Rh</span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>         </span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a> <span class="co"># Mosquitos</span></span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a>         dSv  <span class="ot">&lt;-</span>  alphav <span class="sc">*</span> Nv <span class="sc">-</span> _____ <span class="sc">*</span> (Ih<span class="sc">/</span>Nh) <span class="sc">*</span> Sv <span class="sc">-</span> _____ <span class="sc">*</span> Sv </span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a>         dEv  <span class="ot">&lt;-</span>  _____ <span class="sc">*</span> (Ih<span class="sc">/</span>Nh) <span class="sc">*</span> Sv <span class="sc">-</span> (____ <span class="sc">+</span> _____)<span class="sc">*</span> Ev</span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a>         dIv  <span class="ot">&lt;-</span>  _____ <span class="sc">*</span> Ev <span class="sc">-</span> _____ <span class="sc">*</span> Iv</span></code></pre>
</div>
</div>
</div>
</div>
<p>Una vez sepamos traducir las ecuaciones a código,  se procederá a
ejecutar el modelo. Para esto se usará la función ode del paquete
deSolve.</p>
<p>Se empezará por crear la función (que luego se usará en el argumento
<strong>fun</strong>). Para ello es necesario traducir las ecuaciones
del modelo de Zika a <strong>R</strong>. Abajo encontrará la función ya
construida <code>modelo_zika</code> para que usted reemplace las
ecuaciones que ya completó arriba.</p>
<div id="desafío-3" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="desafío-3" class="callout-inner">
<h3 class="callout-title">Desafío 3</h3>
<div class="callout-content">
<p><strong>Instrucción</strong>: Reemplace las ecuaciones incompletas
del siguiente código por las ecuaciones completas del modelo Zika que
trabajó  en la instrucción anterior.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="co"># Modelo determinístico simple (fun)</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>modelo_zika <span class="ot">&lt;-</span> <span class="cf">function</span>(tiempo, variable_estado, parametros) {</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>  </span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>  <span class="fu">with</span>(<span class="fu">as.list</span>(<span class="fu">c</span>(variable_estado, parametros))</span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>, <span class="co"># entorno local para evaluar derivados</span></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a>       {</span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a>         <span class="co"># Humanos</span></span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a>         dSh   <span class="ot">&lt;-</span>  ____ <span class="sc">*</span> Nh <span class="sc">-</span> ____ <span class="sc">*</span> (Iv<span class="sc">/</span>Nh) <span class="sc">*</span> Sh <span class="sc">-</span> ____ <span class="sc">*</span> Sh   </span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a>         dIh   <span class="ot">&lt;-</span>  ____ <span class="sc">*</span> (Iv<span class="sc">/</span>Nh) <span class="sc">*</span> Sh <span class="sc">-</span> (____ <span class="sc">+</span> ____) <span class="sc">*</span> Ih</span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a>         dRh   <span class="ot">&lt;-</span>  ____ <span class="sc">*</span> Ih  <span class="sc">-</span> ____ <span class="sc">*</span> Rh</span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a>         </span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a>         <span class="co"># Mosquitos</span></span>
<span id="cb5-13"><a href="#cb5-13" tabindex="-1"></a>         dSv  <span class="ot">&lt;-</span>  alphav <span class="sc">*</span> Nv <span class="sc">-</span> ____ <span class="sc">*</span> (Ih<span class="sc">/</span>Nh) <span class="sc">*</span> Sv <span class="sc">-</span> ____ <span class="sc">*</span> Sv </span>
<span id="cb5-14"><a href="#cb5-14" tabindex="-1"></a>         dEv  <span class="ot">&lt;-</span>  ____ <span class="sc">*</span> (Ih<span class="sc">/</span>Nh) <span class="sc">*</span> Sv <span class="sc">-</span> (____ <span class="sc">+</span> ____)<span class="sc">*</span> Ev</span>
<span id="cb5-15"><a href="#cb5-15" tabindex="-1"></a>         dIv  <span class="ot">&lt;-</span>  ____ <span class="sc">*</span> Ev <span class="sc">-</span> ____ <span class="sc">*</span> Iv</span>
<span id="cb5-16"><a href="#cb5-16" tabindex="-1"></a>         </span>
<span id="cb5-17"><a href="#cb5-17" tabindex="-1"></a>         <span class="fu">list</span>(<span class="fu">c</span>(dSh, dIh, dRh, dSv, dEv, dIv))</span>
<span id="cb5-18"><a href="#cb5-18" tabindex="-1"></a>       }</span>
<span id="cb5-19"><a href="#cb5-19" tabindex="-1"></a>  )</span>
<span id="cb5-20"><a href="#cb5-20" tabindex="-1"></a>}</span></code></pre>
</div>
</div>
</div>
</div>

<center>
<p><a href="https://epiverse-trace.github.io/epitkit/Banco_errores.html" class="external-link"><img src="fig/dudas.png" width="100" class="figure"></a></p>
</center>
</section><section><h2 class="section-heading" id="resolviendo-el-sistema">6.4 Resolviendo el Sistema<a class="anchor" aria-label="anchor" href="#resolviendo-el-sistema"></a>
</h2>
<hr class="half-width">
<p>Para resolver el sistema es necesario crear los tres argumentos
faltantes (<strong>times</strong>, <strong>parms</strong> y
<strong>y</strong>) para usar la función <code>ode</code>.</p>
<div id="desafío-4" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="desafío-4" class="callout-inner">
<h3 class="callout-title">Desafío 4</h3>
<div class="callout-content">
<p><strong>Instrucción:</strong> Para <code>times</code> y
<code>parms</code>, copie el código que se encuentra a continuación y
ejecútelo.</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Secuencia temporal (times)</span></span>
<span><span class="va">tiempo</span> <span class="op">&lt;-</span> <span class="fu">seq</span><span class="op">(</span><span class="fl">1</span>, <span class="fl">365</span> <span class="op">*</span> <span class="va">TIME</span> , by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co"># Los parámetros (parms)</span></span>
<span><span class="va">params</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span></span>
<span>  muv      <span class="op">=</span> <span class="va">muv</span>,     </span>
<span>  muh      <span class="op">=</span> <span class="va">muh</span>, </span>
<span>  alphav   <span class="op">=</span> <span class="va">alphav</span>,</span>
<span>  alphah   <span class="op">=</span> <span class="va">alphah</span>,</span>
<span>  gamma    <span class="op">=</span> <span class="va">gamma</span>,   </span>
<span>  delta    <span class="op">=</span> <span class="va">delta</span>,   </span>
<span>  betav    <span class="op">=</span> <span class="va">betav</span>,       </span>
<span>  betah    <span class="op">=</span> <span class="va">betah</span>,   </span>
<span>  Nh       <span class="op">=</span> <span class="va">Nh</span>,      </span>
<span>  Nv       <span class="op">=</span> <span class="va">Nv</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
<p>En el código que ejecutó se creó tiempo (<strong>times)</strong> y
parametros (<strong>params)</strong>. Aún nos falta crear el argumento
<strong>y</strong>, el cual desarrollaremos en la siguiente sección.</p>
<div class="section level3">
<h3 id="condiciones-iniciales-del-sistema-y">6.4.1. <strong>Condiciones iniciales del sistema (y)</strong>
<a class="anchor" aria-label="anchor" href="#condiciones-iniciales-del-sistema-y"></a>
</h3>
<p>Para definir las condiciones iniciales, recuerde que el escenario a
modelar en este ejercicio es para una fecha <strong>antes del reporte
del primer caso</strong>.  Por lo tanto estos valores deben reflejar ese
contexto.  </p>
<div id="discussion5" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Discusión</h3>
<div class="callout-content">
<p><strong>Reflexión:</strong> ¿Qué condiciones iniciales tendrían cada
uno de los compartimientos?</p>
</div>
</div>
</div>
<div id="desafío-5" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="desafío-5" class="callout-inner">
<h3 class="callout-title">Desafío 5</h3>
<div class="callout-content">
<p><strong>Instrucción:</strong> Complete los espacios según lo
aprendido en el tutorial.</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="co"># Condiciones iniciales del sistema (y)</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>inicio <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">Sh =</span> _______ ,        <span class="co"># COMPLETE Y COMENTE</span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a>            <span class="at">Ih =</span> _______ ,        <span class="co"># COMPLETE Y COMENTE</span></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a>            <span class="at">Rh =</span> _______ ,        <span class="co"># COMPLETE Y COMENTE</span></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a>            <span class="at">Sv =</span> _______ ,        <span class="co"># COMPLETE Y COMENTE</span></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a>            <span class="at">Ev =</span> _______ ,        <span class="co"># COMPLETE Y COMENTE</span></span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a>            <span class="at">Iv =</span> _______ )        <span class="co"># COMPLETE Y COMENTE</span></span></code></pre>
</div>
</div>
</div>
</div>

<center>
<p><a href="https://epiverse-trace.github.io/epitkit/Banco_errores.html" class="external-link"><img src="fig/dudas.png" width="100" class="figure"></a></p>
</center>
</div>
<div class="section level3">
<h3 id="función-ode">6.4.2 Función ode<a class="anchor" aria-label="anchor" href="#funci%C3%B3n-ode"></a>
</h3>
<p>Una vez creados todos los argumentos necesarios, es hora de
ingresarlos a ode.  Recordemos los cuatro argumentos de ode y a que
corresponden a:</p>
<ul>
<li><p><strong>y</strong>:<strong>inicio</strong>. Vector creado con las
condiciones iniciales de los seis compartimentos.</p></li>
<li><p><strong>times</strong>:<strong>tiempo</strong>. Vector con la
secuencia temporal</p></li>
<li><p><strong>fun:modelo_zika</strong>. Función que contiene las
ecuaciones necesarias para simular el modelo.</p></li>
<li><p><strong>parms:parametros.</strong> Vector en el cual se
recopilaron los parámetros necesarios para simular el modelo.</p></li>
</ul>
<div id="desafío-6" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="desafío-6" class="callout-inner">
<h3 class="callout-title">Desafío 6</h3>
<div class="callout-content">
<p><strong>Instrucción</strong>: Complete los espacios en blanco según
lo trabajado hasta el momento.</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="co"># Resuelva las ecuaciones</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a>salida <span class="ot">&lt;-</span> <span class="fu">ode</span>(<span class="at">y      =</span>   _______ , <span class="co"># COMPLETE Y COMENTE</span></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a>              <span class="at">times  =</span> _______ ,   <span class="co"># COMPLETE Y COMENTE</span></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a>              <span class="at">fun    =</span> _______ ,   <span class="co"># COMPLETE Y COMENTE</span></span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a>              <span class="at">parms  =</span> _______  <span class="co"># COMPLETE Y COMENTE</span></span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="co"># Convertir a data frame</span></span></code></pre>
</div>
</div>
</div>
</div>

<center>
<p><a href="https://epiverse-trace.github.io/epitkit/Banco_errores.html" class="external-link"><img src="fig/dudas.png" width="100" class="figure"></a></p>
</center>
</div>
<div class="section level3">
<h3 id="introduciendo-el-primer-caso">6.4.3 <strong>Introduciendo el primer caso</strong>
<a class="anchor" aria-label="anchor" href="#introduciendo-el-primer-caso"></a>
</h3>
<p>Ahora que tenemos todos los compartimentos definidos, es hora de
ingresar al modelo un individuo infeccioso para iniciar la
epidemia. </p>
<div id="discussion8" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Discusión</h3>
<div class="callout-content">
<p><strong>Reflexión:</strong> ¿Qué cree que es más probable, que a una
población (en otro país) ingrese un humano infeccioso o un mosquito
infeccioso?</p>
</div>
</div>
</div>
<p>Para nuestro caso hipotético, vamos a suponer que una persona se
infectó en Brasil mientras estaba de turismo y regresó posteriormente a
la ciudad ______________ (la ciudad que usted definió al comienzo del
ejercicio) siendo el primer sujeto infeccioso en esta población. En este
contexto, el compartimento de humanos infecciosos tendrá entonces un
individuo, <strong>Ih</strong> = 1 y el compartimento de humanos
susceptibles tendrá  un individuo menos, <strong>Sh</strong> =
<strong>Nh</strong> - 1.</p>
<div id="discussion9" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Desafío</h3>
<div class="callout-content">
<p><strong>Pista:</strong> Cambie en R las condiciones iniciales
(inicio) de forma que Ih = 1 y Sh = Nh - 1.</p>
</div>
</div>
</div>

<center>
<p><a href="https://epiverse-trace.github.io/epitkit/Banco_errores.html" class="external-link"><img src="fig/dudas.png" width="100" class="figure"></a></p>
</center>
</div>
</section><section><h2 class="section-heading" id="ahora-ejecutaremos-el-modelo">6.5 <strong>¡Ahora ejecutaremos el modelo!</strong>
<a class="anchor" aria-label="anchor" href="#ahora-ejecutaremos-el-modelo"></a>
</h2>
<hr class="half-width">
<p><strong>Hasta este punto, usted ha completado toda la información
faltante en el script  para poder ejecutar el modelo.</strong></p>
<div id="callout2" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Aviso</h3>
<div class="callout-content">
<p><strong>Instrucción:</strong> Ejecute cada conjunto de las líneas del
script vistas anteriormente, es decir, ejecute las secciones: Lista de
parámetros, la sección Modelo determinístico simple (donde construyó el
modelo), las secciones Secuencia temporal (tiempo (times)),  Los
parámetros (parametros (parms)), la sección Condiciones iniciales del
sistema (inicio (y)) y la sección final Resuelva las ecuaciones.</p>
<p><strong>Instrucción:</strong> Verifique que no aparezca ningún error.
En caso de error por favor verifique la escritura del código y que no
haya quedado en el código otros caracteres que no corresponden como por
ejemplo “_____” los guiones de los espacios para completar.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="visualizando-los-resultados">6.6 <strong>Visualizando los resultados</strong>
<a class="anchor" aria-label="anchor" href="#visualizando-los-resultados"></a>
</h2>
<hr class="half-width">
<p><strong>En nuestro curso usaremos ggplot para la visualización de
datos. Es importante que repase la Unidad 4. Visualización de datos en
ggplot</strong></p>
<p>Hay que recordar que la unidad de tiempo del modelo de Zika está ya
definida desde los parámetros como  <strong>días</strong>.  </p>
<p>Sin embargo, si usted quisiera visualizar los resultados en semanas,
meses o años puede hacerlo a partir de los resultados del modelo
(<code>salida$time</code>). Para hacerlo, puede usar el siguiente
código.</p>
<div id="desafío-7" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="desafío-7" class="callout-inner">
<h3 class="callout-title">Desafío 7</h3>
<div class="callout-content">
<p>Para tener una visualización más significativa de los resultados,
convierta las unidades de tiempo de <em>días</em> a <em>años</em> y a
<em>semanas</em>.</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Cree las opciones de tiempo para años y semanas </span></span>
<span><span class="va">salida</span><span class="op">$</span><span class="va">años</span> <span class="op">&lt;-</span> <span class="va">salida</span><span class="op">$</span><span class="va">time</span><span class="op">/</span><span class="fl">365</span></span>
<span><span class="va">salida</span><span class="op">$</span><span class="va">semanas</span> <span class="op">&lt;-</span> <span class="va">salida</span><span class="op">$</span><span class="va">time</span><span class="op">/</span><span class="fl">7</span></span></code></pre>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="visualice-y-analice-la-primer-epidemia">6.7 <strong>Visualice y analice la primer epidemia</strong>
<a class="anchor" aria-label="anchor" href="#visualice-y-analice-la-primer-epidemia"></a>
</h2>
<hr class="half-width">
<p>Empecemos realizando una visualización de la primera epidemia. Dado
que es un periodo de un año visualicemos las gráficas en semanas. </p>
<p>Instrucción: Ejecute el código a continuación y analice las gráficas
resultantes. </p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Revise la primera epidemia</span></span>
<span><span class="va">p1e</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">salida</span>, <span class="fu">aes</span><span class="op">(</span>y <span class="op">=</span> <span class="va">Ih</span>, x <span class="op">=</span> <span class="va">semanas</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span>color <span class="op">=</span> <span class="st">'firebrick'</span>, linewidth <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggtitle</span><span class="op">(</span><span class="st">'Población de humanos infecciosos'</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_bw</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu">ylab</span><span class="op">(</span><span class="st">'Número'</span><span class="op">)</span> <span class="op">+</span> <span class="fu">xlab</span><span class="op">(</span><span class="st">'Semanas'</span><span class="op">)</span> <span class="op">+</span></span>
<span> <span class="fu">coord_cartesian</span><span class="op">(</span>ylim <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">0</span>,<span class="fl">10000</span><span class="op">)</span><span class="op">)</span> <span class="co">#creamos gráfico de población humana infecciosa</span></span>
<span><span class="va">p2e</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">salida</span>, <span class="fu">aes</span><span class="op">(</span>y <span class="op">=</span> <span class="va">Rh</span>, x <span class="op">=</span> <span class="va">semanas</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span>color <span class="op">=</span> <span class="st">'olivedrab'</span>, linewidth <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggtitle</span><span class="op">(</span><span class="st">'Población humana recuperada'</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_bw</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu">ylab</span><span class="op">(</span><span class="st">'Número'</span><span class="op">)</span> <span class="op">+</span> <span class="fu">xlab</span><span class="op">(</span><span class="st">'Semanas'</span><span class="op">)</span> <span class="op">+</span></span>
<span> <span class="fu">coord_cartesian</span><span class="op">(</span>ylim <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">0</span>,<span class="fl">100000</span><span class="op">)</span><span class="op">)</span>  <span class="co">#creamos gráfico de población humana recuperada</span></span>
<span></span>
<span></span>
<span><span class="fu">plot_grid</span><span class="op">(</span><span class="va">p1e</span>, <span class="va">p2e</span><span class="op">)</span> <span class="co">#creamos gráfico comparativo de la gráfica de población humana infecciosa y población humana recuperada</span></span></code></pre>
</div>
<figure><img src="fig/zika-rendered-p1-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><div id="discussion11" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Discusión</h3>
<div class="callout-content">
<p><strong>Reflexión:</strong> ¿Qué puede observar en la gráfica?
Observe bien el eje Y. ¿Qué proporción de humanos son infecciosos al
mismo tiempo? </p>
</div>
</div>
</div>
<p>Para tener mayor claridad de esto podemos crear gráficas de las
proporciones:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Revise la primera epidemia con proporciones</span></span>
<span><span class="va">p1p</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">salida</span>, <span class="fu">aes</span><span class="op">(</span>y <span class="op">=</span> <span class="va">Ih</span><span class="op">/</span><span class="op">(</span><span class="va">Sh</span><span class="op">+</span><span class="va">Ih</span><span class="op">+</span><span class="va">Rh</span><span class="op">)</span>, x <span class="op">=</span> <span class="va">semanas</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span>color <span class="op">=</span> <span class="st">'firebrick'</span>, linewidth <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggtitle</span><span class="op">(</span><span class="st">'Población de humanos infecciosos'</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_bw</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu">ylab</span><span class="op">(</span><span class="st">'Proporción'</span><span class="op">)</span> <span class="op">+</span> <span class="fu">xlab</span><span class="op">(</span><span class="st">'Semanas'</span><span class="op">)</span> <span class="op">+</span></span>
<span> <span class="fu">coord_cartesian</span><span class="op">(</span>ylim <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="co">#creamos gráfico de población humana infecciosa</span></span>
<span><span class="va">p2p</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">salida</span>, <span class="fu">aes</span><span class="op">(</span>y <span class="op">=</span> <span class="va">Rh</span><span class="op">/</span><span class="op">(</span><span class="va">Sh</span><span class="op">+</span><span class="va">Ih</span><span class="op">+</span><span class="va">Rh</span><span class="op">)</span>, x <span class="op">=</span> <span class="va">semanas</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span>color <span class="op">=</span> <span class="st">'olivedrab'</span>, linewidth <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggtitle</span><span class="op">(</span><span class="st">'Población humana recuperada'</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_bw</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu">ylab</span><span class="op">(</span><span class="st">'Proporción'</span><span class="op">)</span> <span class="op">+</span> <span class="fu">xlab</span><span class="op">(</span><span class="st">'Semanas'</span><span class="op">)</span> <span class="op">+</span></span>
<span> <span class="fu">coord_cartesian</span><span class="op">(</span>ylim <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span>  <span class="co">#creamos gráfico de población humana recuperada</span></span>
<span></span>
<span></span>
<span><span class="fu">plot_grid</span><span class="op">(</span><span class="va">p1p</span>, <span class="va">p2p</span><span class="op">)</span> <span class="co">#creamos gráfico comparativo de la gráfica de población humana infecciosa y población humana recuperada</span></span></code></pre>
</div>
<figure><img src="fig/zika-rendered-p3-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p><strong>Comportamiento general (Población humana)</strong></p>
<p>Ya observamos la primera epidemia es momento de proyectar la epidemia
a un tiempo superior. </p>
<p><strong>Instrucción:</strong> Regrese a los parámetros y modifique el
parámetro TIME a 100 años. Ejecute el siguiente bloque de código y
observe cuántos brotes se producen en la población humana y el tamaño de
cada brote.</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># # Revise el comportamiento general del modelo para 100 años</span></span>
<span><span class="va">p1h</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">salida</span>, <span class="fu">aes</span><span class="op">(</span>y <span class="op">=</span> <span class="op">(</span><span class="va">Rh</span> <span class="op">+</span> <span class="va">Ih</span> <span class="op">+</span> <span class="va">Sh</span><span class="op">)</span>, x <span class="op">=</span> <span class="va">años</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span>color <span class="op">=</span> <span class="st">'grey68'</span>, linewidth <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggtitle</span><span class="op">(</span><span class="st">'Población humana total'</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_bw</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu">ylab</span><span class="op">(</span><span class="st">'Número'</span><span class="op">)</span> <span class="op">+</span> <span class="fu">xlab</span><span class="op">(</span><span class="st">'Años'</span><span class="op">)</span></span>
<span><span class="va">p2h</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">salida</span>, <span class="fu">aes</span><span class="op">(</span>y <span class="op">=</span> <span class="va">Sh</span>, x <span class="op">=</span> <span class="va">años</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span>color <span class="op">=</span> <span class="st">'royalblue'</span>, linewidth <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggtitle</span><span class="op">(</span><span class="st">'Población humana susceptible'</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_bw</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu">ylab</span><span class="op">(</span><span class="st">'Número'</span><span class="op">)</span> <span class="op">+</span> <span class="fu">xlab</span><span class="op">(</span><span class="st">'Años'</span><span class="op">)</span></span>
<span><span class="va">p3h</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">salida</span>, <span class="fu">aes</span><span class="op">(</span>y <span class="op">=</span> <span class="va">Ih</span>, x <span class="op">=</span> <span class="va">años</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span>color <span class="op">=</span> <span class="st">'firebrick'</span>, linewidth <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggtitle</span><span class="op">(</span><span class="st">'Población humana infecciosa'</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_bw</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu">ylab</span><span class="op">(</span><span class="st">'Número'</span><span class="op">)</span> <span class="op">+</span> <span class="fu">xlab</span><span class="op">(</span><span class="st">'Años'</span><span class="op">)</span></span>
<span><span class="va">p4h</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">salida</span>, <span class="fu">aes</span><span class="op">(</span>y <span class="op">=</span> <span class="va">Rh</span>, x <span class="op">=</span> <span class="va">años</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span>color <span class="op">=</span> <span class="st">'olivedrab'</span>, linewidth <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggtitle</span><span class="op">(</span><span class="st">'Población humana recuperada'</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_bw</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu">ylab</span><span class="op">(</span><span class="st">'Número'</span><span class="op">)</span> <span class="op">+</span> <span class="fu">xlab</span><span class="op">(</span><span class="st">'Años'</span><span class="op">)</span></span>
<span><span class="fu">plot_grid</span><span class="op">(</span><span class="va">p1h</span>, <span class="va">p2h</span>, <span class="va">p3h</span>, <span class="va">p4h</span>, ncol <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/zika-rendered-p4-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p><strong>Comportamiento General (Población de mosquitos)</strong></p>
<p><strong>Instrucción:</strong> Ejecute el siguiente bloque de código y
observe cuántos brotes se producen en la población de mosquitos y el
tamaño de cada brote. Compare las gráficas con las gráficas de la
población humana.</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Revise el comportamiento general del modelo</span></span>
<span><span class="va">p1v</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">salida</span>, <span class="fu">aes</span><span class="op">(</span>y <span class="op">=</span> <span class="op">(</span><span class="va">Sv</span> <span class="op">+</span> <span class="va">Ev</span> <span class="op">+</span> <span class="va">Iv</span><span class="op">)</span>, x <span class="op">=</span> <span class="va">años</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span>color <span class="op">=</span> <span class="st">'grey68'</span>, linewidth <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggtitle</span><span class="op">(</span><span class="st">'Población total de mosquitos'</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_bw</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu">ylab</span><span class="op">(</span><span class="st">'Número'</span><span class="op">)</span> <span class="op">+</span> <span class="fu">xlab</span><span class="op">(</span><span class="st">'Años'</span><span class="op">)</span></span>
<span><span class="va">p2v</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">salida</span>, <span class="fu">aes</span><span class="op">(</span>y <span class="op">=</span> <span class="va">Sv</span>, x <span class="op">=</span> <span class="va">años</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span>color <span class="op">=</span> <span class="st">'royalblue'</span>, linewidth <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggtitle</span><span class="op">(</span><span class="st">'Población susceptible de mosquitos'</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_bw</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu">ylab</span><span class="op">(</span><span class="st">'Número'</span><span class="op">)</span> <span class="op">+</span> <span class="fu">xlab</span><span class="op">(</span><span class="st">'Años'</span><span class="op">)</span></span>
<span><span class="va">p3v</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">salida</span>, <span class="fu">aes</span><span class="op">(</span>y <span class="op">=</span> <span class="va">Ev</span>, x <span class="op">=</span> <span class="va">años</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span>color <span class="op">=</span> <span class="st">'orchid'</span>, linewidth <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggtitle</span><span class="op">(</span><span class="st">'Población expuesta de mosquitos'</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_bw</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu">ylab</span><span class="op">(</span><span class="st">'Número'</span><span class="op">)</span> <span class="op">+</span> <span class="fu">xlab</span><span class="op">(</span><span class="st">'Años'</span><span class="op">)</span></span>
<span><span class="va">p4v</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">salida</span>, <span class="fu">aes</span><span class="op">(</span>y <span class="op">=</span> <span class="va">Iv</span>, x <span class="op">=</span> <span class="va">años</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span>color <span class="op">=</span> <span class="st">'firebrick'</span>, linewidth <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggtitle</span><span class="op">(</span><span class="st">'Población infecciosa de mosquitos'</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_bw</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu">ylab</span><span class="op">(</span><span class="st">'Número'</span><span class="op">)</span> <span class="op">+</span> <span class="fu">xlab</span><span class="op">(</span><span class="st">'Años'</span><span class="op">)</span></span>
<span><span class="fu">plot_grid</span><span class="op">(</span><span class="va">p1v</span>, <span class="va">p2v</span>, <span class="va">p3v</span>, <span class="va">p4v</span>, ncol <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/zika-rendered-unnamed-chunk-15-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p><strong>Proporción</strong></p>
<p><strong>Instrucción:</strong> Ejecute el siguiente bloque de código y
compárelo con las gráficas generadas para la población humana. </p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p1</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">salida</span>, <span class="fu">aes</span><span class="op">(</span>y <span class="op">=</span> <span class="va">Sh</span><span class="op">/</span><span class="op">(</span><span class="va">Sh</span><span class="op">+</span><span class="va">Ih</span><span class="op">+</span><span class="va">Rh</span><span class="op">)</span>, x <span class="op">=</span> <span class="va">años</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span>color <span class="op">=</span> <span class="st">'royalblue'</span>, linewidth <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggtitle</span><span class="op">(</span><span class="st">'Población humana susceptible'</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_bw</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu">ylab</span><span class="op">(</span><span class="st">'Proporción'</span><span class="op">)</span> <span class="op">+</span> <span class="fu">xlab</span><span class="op">(</span><span class="st">'Años'</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">coord_cartesian</span><span class="op">(</span>ylim <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">p2</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">salida</span>, <span class="fu">aes</span><span class="op">(</span>y <span class="op">=</span> <span class="va">Ih</span><span class="op">/</span><span class="op">(</span><span class="va">Sh</span><span class="op">+</span><span class="va">Ih</span><span class="op">+</span><span class="va">Rh</span><span class="op">)</span>, x <span class="op">=</span> <span class="va">años</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span>color <span class="op">=</span> <span class="st">'firebrick'</span>, linewidth <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggtitle</span><span class="op">(</span><span class="st">'Población humana infecciosa'</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_bw</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu">ylab</span><span class="op">(</span><span class="st">'Proporción'</span><span class="op">)</span> <span class="op">+</span> <span class="fu">xlab</span><span class="op">(</span><span class="st">'Años'</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">coord_cartesian</span><span class="op">(</span>ylim <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">p3</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">salida</span>, <span class="fu">aes</span><span class="op">(</span>y <span class="op">=</span> <span class="va">Rh</span><span class="op">/</span><span class="op">(</span><span class="va">Sh</span><span class="op">+</span><span class="va">Ih</span><span class="op">+</span><span class="va">Rh</span><span class="op">)</span>, x <span class="op">=</span> <span class="va">años</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span>color <span class="op">=</span> <span class="st">'olivedrab'</span>, linewidth <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggtitle</span><span class="op">(</span><span class="st">'Población humana recuperada'</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_bw</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu">ylab</span><span class="op">(</span><span class="st">'Proporción'</span><span class="op">)</span> <span class="op">+</span> <span class="fu">xlab</span><span class="op">(</span><span class="st">'Años'</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">coord_cartesian</span><span class="op">(</span>ylim <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">plot_grid</span><span class="op">(</span><span class="va">p1</span>, <span class="va">p2</span>, <span class="va">p3</span>, ncol <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>  </span></code></pre>
</div>
<figure><img src="fig/zika-rendered-unnamed-chunk-16-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><center>
<p><a href="https://epiverse-trace.github.io/epitkit/Banco_errores.html" class="external-link"><img src="fig/dudas.png" width="100" class="figure"></a></p>
</center>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Puntos Clave</h3>
<div class="callout-content">
<p>Revise si al final de esta lección adquirió estas competencias:</p>
<ul>
<li>Aplicar conceptos como parámetros, <span class="math inline">\(R_0\)</span> e inmunidad de rebaño, aprendidos en
la sesión A del taller</li>
<li>Traducir fórmulas matemáticas de las interacciones entre los
parámetros del modelo a código de R</li>
<li>Realizar un modelo simple en R para una enfermedad transmitida por
vector</li>
<li>Discutir cambios en las proyecciones del modelo cuando se instauran
diferentes estrategias de control de la infección</li>
</ul>
</div>
</div>
</div>
<div class="section level3">
<h3 id="contribuciones">Contribuciones<a class="anchor" aria-label="anchor" href="#contribuciones"></a>
</h3>
<ul>
<li>Zulma Cucunuba &amp; Pierre Nouvellet: Versión inicial</li>
<li>Kelly Charinga &amp; Zhian N. Kamvar: Edición</li>
<li>José M. Velasco-España: Traducción de Inglés a Español y
Edición</li>
<li>Andree Valle-Campos: Ediciones menores</li>
</ul>
</div>
<div class="section level3">
<h3 id="asuntos-legales">Asuntos legales<a class="anchor" aria-label="anchor" href="#asuntos-legales"></a>
</h3>
<p><strong>Copyright</strong>: Zulma Cucunuba &amp; Pierre Nouvellet,
2017</p>
</div>
<div class="section level3">
<h3 id="referencias">Referencias<a class="anchor" aria-label="anchor" href="#referencias"></a>
</h3>
<p>de Carvalho, S. S., Rodovalho, C. M., Gaviraghi, A., Mota, M. B. S.,
Jablonka, W., Rocha-Santos, C., Nunes, R. D., Sá-Guimarães, T. da E.,
Oliveira, D. S., Melo, A. C. A., Moreira, M. F., Fampa, P., Oliveira, M.
F., da Silva-Neto, M. A. C., Mesquita, R. D., &amp; Atella, G. C.
(2021). Aedes aegypti post-emergence transcriptome: Unveiling the
molecular basis for the hematophagic and gonotrophic capacitation. PLoS
Neglected Tropical Diseases, 15(1), 1–32. <a href="https://doi.org/10.1371/journal.pntd.0008915" class="external-link uri">https://doi.org/10.1371/journal.pntd.0008915</a></p>
<p>Chang, C., Ortiz, K., Ansari, A., &amp; Gershwin, M. E. (2016). The
Zika outbreak of the 21st century. Journal of Autoimmunity, 68, 1–13. <a href="https://doi.org/10.1016/j.jaut.2016.02.006" class="external-link uri">https://doi.org/10.1016/j.jaut.2016.02.006</a></p>
<p>Cori, A., Ferguson, N. M., Fraser, C., &amp; Cauchemez, S. (2013). A
new framework and software to estimate time-varying reproduction numbers
during epidemics. American Journal of Epidemiology, 178(9), 1505–1512.
<a href="https://doi.org/10.1093/aje/kwt133" class="external-link uri">https://doi.org/10.1093/aje/kwt133</a></p>
<p>Duffy, M. R., Chen, T.-H., Hancock, W. T., Powers, A. M., Kool, J.
L., Lanciotti, R. S., Pretrick, M., Marfel, M., Holzbauer, S., Dubray,
C., Guillaumot, L., Griggs, A., Bel, M., Lambert, A. J., Laven, J.,
Kosoy, O., Panella, A., Biggerstaff, B. J., Fischer, M., &amp; Hayes, E.
B. (2009). Zika Virus Outbreak on Yap Island, Federated States of
Micronesia. New England Journal of Medicine, 360(24), 2536–2543. <a href="https://doi.org/10.1056/nejmoa0805715" class="external-link uri">https://doi.org/10.1056/nejmoa0805715</a></p>
<p>Ferguson, N. M., Cucunubá, Z. M., Dorigatti, I., Nedjati-Gilani, G.
L., Donnelly, C. A., Basáñez, M. G., Nouvellet, P., &amp; Lessler, J.
(2016). Countering the Zika epidemic in Latin America. Science,
353(6297). <a href="https://doi.org/10.1126/science.aag0219" class="external-link uri">https://doi.org/10.1126/science.aag0219</a></p>
<p>Heesterbeek, J. A. P. (2002). A brief history of R0 and a recipe for
its calculation. Acta Biotheoretica, 50(3). <a href="https://doi.org/10.1023/A:1016599411804" class="external-link uri">https://doi.org/10.1023/A:1016599411804</a></p>
<p>Lee, E. K., Liu, Y., &amp; Pietz, F. H. (2016). A Compartmental Model
for Zika Virus with Dynamic Human and Vector Populations. AMIA … Annual
Symposium Proceedings. AMIA Symposium, 2016, 743–752.</p>
<p>Pettersson, J. H. O., Eldholm, V., Seligman, S. J., Lundkvist, Å.,
Falconar, A. K., Gaunt, M. W., Musso, D., Nougairède, A., Charrel, R.,
Gould, E. A., &amp; de Lamballerie, X. (2016). How did zika virus emerge
in the Pacific Islands and Latin America? MBio, 7(5). <a href="https://doi.org/10.1128/mBio.01239-16" class="external-link uri">https://doi.org/10.1128/mBio.01239-16</a></p>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div>
</section></section><section id="aio-estadistica"><p>Content from <a href="estadistica.html">Statistics and Probability Unit</a></p>
<hr>
<p>Última actualización: 2025-06-06 |

        <a href="https://github.com/epiverse-trace/epitkit/edit/main/episodes/estadistica.Rmd" class="external-link">Mejora esta página <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Mostrar todas las soluciones " data-collapse="Cerrar todas las soluciones "> Mostrar todas las soluciones <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Hoja de ruta</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Preguntas</h3>
<ul>
<li>How can statistics and probability be used to solve questions in
infectious disease epidemiology?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objetivos</h3>
<p><strong>At the end of this workshop you will be able to:</strong></p>
<ul>
<li><p>Understand the role of statistics in the study of infectious
diseases.</p></li>
<li><p>Understand and use statistical measures to summarize and analyze
information.</p></li>
<li><p>Become familiar with the concept of a random variable and
recognize common probability distributions.</p></li>
<li><p>Learn how to approach a statistical problem as an inference
problem from a sample.</p></li>
<li><p>Understand the concept of confidence intervals for estimating
epidemiological parameters.</p></li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="prereq1" class="callout prereq">
<div class="callout-square">
<i class="callout-icon" data-feather="check"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Pre requisito</h3>
<div class="callout-content">
<p>This unit is a supplement to the <strong><em>Introduction to
Infectious Disease Modelling for Public Health Course</em></strong></p>
</div>
</div>
</div>
<div id="table-of-contents" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="table-of-contents" class="callout-inner">
<h3 class="callout-title"><strong>Table of contents</strong></h3>
<div class="callout-content">
<table style="width:88%;" class="table">
<colgroup><col width="87%"></colgroup>
<tbody><tr class="odd">
<td>
<p>Topic 1: Introduction to Statistical Thinking (See in course
platform)</p>
<p>Topic 2: Descriptive Statistics (See complement on the course
platform)</p>
<p>Topic 3: Probability (See course platform add-on)</p>
<p>Topic 4: Principal Probability Distributions (See supplement on the
course platform)</p>
<p>Topic 5: Introduction to Statistical Inference (See complement on the
course platform)</p>
</td>
</tr></tbody>
</table>
</div>
</div>
</div>
<section><h2 class="section-heading" id="before-you-start">Before you start<a class="anchor" aria-label="anchor" href="#before-you-start"></a>
</h2>
<hr class="half-width">
<p>Please check that you have installed the following libraries
<code>tidyverse, pak, epiparameter e infer</code> in case they are not
installed, run the code below according to your need:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># To install the tidyverse package if you don't have it (or are unsure if you have it), run the following code</span></span>
<span></span>
<span><span class="kw">if</span><span class="op">(</span><span class="op">!</span><span class="kw">require</span><span class="op">(</span><span class="st">"tidyverse"</span><span class="op">)</span><span class="op">)</span> <span class="fu">install.packages</span><span class="op">(</span><span class="st">"tidyverse"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># To install the epiparameter package if you don't have it (or are unsure if you have it), run the following code</span></span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw">require</span><span class="op">(</span><span class="st">"epiparameter"</span><span class="op">)</span><span class="op">)</span> <span class="fu">install.packages</span><span class="op">(</span><span class="st">"epiparameter"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># To install the epitools package if you don't have it (or are unsure if you have it), run the following code</span></span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw">require</span><span class="op">(</span><span class="va">epitools</span><span class="op">)</span><span class="op">)</span> <span class="fu">install.packages</span><span class="op">(</span><span class="st">"epitools"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># To install the infer package if you don't have it (or are unsure if you have it), run the following code</span></span>
<span></span>
<span><span class="kw">if</span><span class="op">(</span><span class="op">!</span><span class="kw">require</span><span class="op">(</span><span class="st">"infer"</span><span class="op">)</span><span class="op">)</span> <span class="fu">install.packages</span><span class="op">(</span><span class="st">"infer"</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># To install the cfr package if you don't have it (or are unsure if you have it), run the following code</span></span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw">require</span><span class="op">(</span><span class="st">"cfr"</span><span class="op">)</span><span class="op">)</span> <span class="fu">install.packages</span><span class="op">(</span><span class="st">"cfr"</span><span class="op">)</span></span>
<span></span>
<span></span>
<span></span>
<span><span class="co">#Before start and eveytime that you start a session in R charge this libraries </span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">ggplot2</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">dplyr</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">epiparameter</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">epitools</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">infer</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">cfr</span><span class="op">)</span></span></code></pre>
</div>
<center>
<p><a href="https://epiverse-trace.github.io/epiverse-trace/Error_bank.html" class="external-link"><img src="fig/dudas.png" width="100" class="figure"></a></p>
</center>
</section><section><h2 class="section-heading" id="topic-2-descriptive-statistics">
<strong>Topic 2: Descriptive Statistics</strong><a class="anchor" aria-label="anchor" href="#topic-2-descriptive-statistics"></a>
</h2>
<hr class="half-width">
<p><strong>Exercise: Visualising and Analysing Data in R</strong></p>
<p>There are many graphs according to the type of scale of the variable
you want to analyse. Here are some examples to help you understand these
concepts.</p>
<ul>
<li><p>Please take into account that you have previously completed the
introductory unit on R and the data visualisation unit. The data table
for this exercise can be found in: <a href="https://raw.githubusercontent.com/epiverse-trace/translation-epitkit/refs/heads/main/data/sample_data.RDS" class="external-link uri">https://raw.githubusercontent.com/epiverse-trace/translation-epitkit/refs/heads/main/data/sample_data.RDS</a></p></li>
<li><p>Once you have the data downloaded to your computer and in the
data folder of your project you can execute the following
command:</p></li>
</ul>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sample_data</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="fu">readRDS</span><span class="op">(</span><span class="st">"data/sample_data.RDS"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ADVERTENCIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="warning" tabindex="0"><code>Warning in gzfile(file, "rb"): cannot open compressed file
'data/sample_data.RDS', probable reason 'No such file or directory'</code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in gzfile(file, "rb"): cannot open the connection</code></pre>
</div>
<p><strong>Histogram and Boxplot</strong></p>
<p>The two most common types of graphs for visualising the distribution
of quantitative variables are histograms and boxplots.</p>
<p>The <strong>histograms</strong> allow you to visually describe the
distribution of data by grouping the data into intervals on the x-axis,
which are generally of equal size, and then for each interval describe
the absolute frequency, relative frequency or density on the y-axis. A
density histogram adjusts the relative frequency of each interval
according to the width of the interval. In R it can be constructed as
follows:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Histogram with absolute frequency</span></span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="va">sample_data</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">age</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>   </span>
<span>  <span class="fu">geom_histogram</span><span class="op">(</span>color<span class="op">=</span><span class="st">"darkblue"</span>, fill<span class="op">=</span><span class="st">"lightblue"</span><span class="op">)</span> <span class="op">+</span>  </span>
<span>  <span class="fu">labs</span><span class="op">(</span>y <span class="op">=</span> <span class="st">"Absolute Frequency"</span>, x <span class="op">=</span> <span class="st">"Age in years"</span>,</span>
<span>     title <span class="op">=</span> <span class="st">"Age Distribution"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in ggplot(sample_data, aes(x = age)): could not find function "ggplot"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Histogram with density</span></span>
<span></span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="va">sample_data</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">age</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>   </span>
<span>  <span class="fu">geom_histogram</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>y <span class="op">=</span> <span class="fu">after_stat</span><span class="op">(</span><span class="va">density</span><span class="op">)</span><span class="op">)</span>, </span>
<span>                 color <span class="op">=</span> <span class="st">"darkblue"</span>, fill <span class="op">=</span> <span class="st">"lightblue"</span><span class="op">)</span> <span class="op">+</span>  </span>
<span>  <span class="fu">labs</span><span class="op">(</span>y <span class="op">=</span> <span class="st">"Density"</span>, x <span class="op">=</span> <span class="st">"Age in years"</span>, </span>
<span>       title <span class="op">=</span> <span class="st">"Age Distribution"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in ggplot(sample_data, aes(x = age)): could not find function "ggplot"</code></pre>
</div>
<p>The <strong>Boxplot</strong> are constructed by displaying the
following statistics horizontally or vertically:</p>
<ul>
<li><p>First quartile Q1 (25th percentile): Value below the 25th
percentile of the data. “First Line”.</p></li>
<li><p>Second quartile Q2 (50th percentile or median): Value that leaves
by below 50% of the data. “middle line”.</p></li>
<li>
<p>Third quartile Q3 (50th percentile or median): Value that leaves
by below 75% of the data. “Third Line”.</p>
<figure><img src="fig/boxplot.png" class="figure mx-auto d-block"></figure>
</li>
</ul>
<p>Additionally, these graphs are useful for detecting outliers by
setting a lower bound (Q1-1.5×RIQ) and an upper bound (Q3+1.5×RIQ) based
on RIQ=Q3-Q1. Data outside these limits are categorised as unusual and
should be reviewed. In the presence of outliers, the lines or whiskers
go to the lower or upper bounds, otherwise they go to the minimum and
maximum value, respectively.</p>
<p>Another usefulness of the <strong>boxplot</strong> and
<strong>histograms</strong> is that they help to know the shape of the
distribution in order to decide on the best indicator of central
tendency. In this way, a distribution can be symmetric or asymmetric
positive/negative. When symmetry exists, it is recommended to use the
mean accompanied by the standard deviation and otherwise the median and
the interquartile range because the mean can be influenced by the
extreme data of the distribution. Remember that an indicator of central
tendency must always be accompanied by a judge, i.e. its respective
indicator of variability.</p>
<figure><img src="fig/distribucion.png" class="figure mx-auto d-block"></figure><ul>
<li><p><strong>Explanatory legend A:</strong> In a symmetric
distribution, the mean, the mean, mode and median take the same value
and the data are found to be evenly distributed around the central
value. For this type of distributions, it is recommended to describe the
data series with mean and standard deviation.</p></li>
<li><p><strong>Explanatory legend B:</strong> Positive asymmetric
distribution or skewed to the right. This type of distribution is
characterised by a higher concentration of data towards the right.
minimum of the distribution, but some values are concentrated towards
the right. the maximum value of the distribution. The expected behaviour
is that the mean&gt;median&gt;moda, since the mean is influenced by the
positive extreme values of the distribution. It is recommended that to
describe the data by means of median and range. interquartile
range.</p></li>
<li><p><strong>Explanatory legend C:</strong> Negative skewed
distribution or skewed to the left. This type of distribution is
characterised by a higher concentration of data towards the left.
maximum of the distribution, but some values are concentrated towards
the minimum value of the distribution (values towards the left). The
expected behaviour is that the mode&gt;mean&gt;median&gt;median given
that this latter is influenced by the extreme values of the side
left-hand side. It is recommended to describe the data by median and
interquartile range.</p></li>
</ul>
<p>Next, we will visualise the age of the COVID-19 cases using a
boxplot.</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Boxplot</span></span>
<span></span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="va">sample_data</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="st">" "</span>, y <span class="op">=</span> <span class="va">age</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_boxplot</span><span class="op">(</span>outlier.shape <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ylab</span><span class="op">(</span><span class="st">"Age (in years)"</span><span class="op">)</span> <span class="op">+</span> <span class="fu">xlab</span><span class="op">(</span><span class="st">" "</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in ggplot(sample_data, aes(x = " ", y = age)): could not find function "ggplot"</code></pre>
</div>
<p>According to the boxplot of the age of the sample of COVID-19 cases
it is possible to conclude that the distribution of the data is
positively skewed, since there is a greater closeness between the values
of Q1 and the median, so it is advisable to describe the behaviour of
the data by means of the median and interquartile range, this in R can
be found as follows using the functions highlighted in blue:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Descriptive Statistics Quantitative Variables   </span></span>
<span></span>
<span><span class="va">sample_data</span> <span class="op">%&gt;%</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">summarise</span><span class="op">(</span></span>
<span>  n <span class="op">=</span> <span class="fu">n</span> <span class="op">(</span><span class="op">)</span>, <span class="co"># Number of observations</span></span>
<span>  Mean <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">age</span><span class="op">)</span>, <span class="co"># Mean</span></span>
<span>  SD <span class="op">=</span> <span class="fu">sd</span><span class="op">(</span><span class="va">age</span><span class="op">)</span>, <span class="co"># Standard deviation</span></span>
<span>  median <span class="op">=</span> <span class="fu">quantile</span><span class="op">(</span><span class="va">age</span>, <span class="fl">0.50</span><span class="op">)</span>, <span class="co"># median-50th percentile</span></span>
<span>  P25 <span class="op">=</span> <span class="fu">quantile</span><span class="op">(</span><span class="va">age</span>, <span class="fl">0.25</span><span class="op">)</span>, <span class="co"># 25th percentile</span></span>
<span>  P75 <span class="op">=</span> <span class="fu">quantile</span><span class="op">(</span><span class="va">age</span>, <span class="fl">0.75</span><span class="op">)</span><span class="op">)</span> <span class="co"># 75th percentile</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in sample_data %&gt;% dplyr::summarise(n = n(), Mean = mean(age), SD = sd(age), : could not find function "%&gt;%"</code></pre>
</div>
<p>Finally, for the variable age it can be concluded that half of the
patients with covid-19 are aged between 27 and 52 years (“RIQ”) with a
median of 38 years, indicating that half of the cases have an age below
this value. It is important to note that, due to the skewness of the
distribution, the mean and median do not coincide, which is expected in
skewed distributions.</p>
<center>
<p><a href="https://epiverse-trace.github.io/epiverse-trace/Error_bank.html" class="external-link"><img src="fig/dudas.png" width="100" class="figure"></a></p>
</center>
<p><strong>Bar Graphs and Frequency Tables</strong></p>
<p>Qualitative variables are recommended to be represented by bar
charts. Generally, these are constructed by indicating on the X axis the
categories of the variables and on the Y axis the value of the absolute,
relative or percentage frequencies according to the needs, i.e. it is
always necessary to first evaluate the frequency table of the variable.
Let us suppose that we want to know the type of infection of COVID-19.
This can be done in R using the following command:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Frequency Tables</span></span>
<span></span>
<span><span class="va">table</span> <span class="op">&lt;-</span> <span class="va">sample_data</span> <span class="op">%&gt;%</span> <span class="co"># Frequency Table Created</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">count</span><span class="op">(</span><span class="va">type_of_contagion</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="co"># Frequency count for the state variable</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">mutate</span><span class="op">(</span>prop <span class="op">=</span> <span class="fu">base</span><span class="fu">::</span><span class="fu">prop.table</span><span class="op">(</span><span class="va">n</span><span class="op">)</span>, <span class="co"># Proportion</span></span>
<span>                perc <span class="op">=</span> <span class="fu">base</span><span class="fu">::</span><span class="fu">prop.table</span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span><span class="op">)</span> <span class="co"># Percentage</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in sample_data %&gt;% dplyr::count(type_of_contagion) %&gt;% dplyr::mutate(prop = base::prop.table(n), : could not find function "%&gt;%"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">table</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>function (..., exclude = if (useNA == "no") c(NA, NaN), useNA = c("no",
    "ifany", "always"), dnn = list.names(...), deparse.level = 1)
{
    list.names &lt;- function(...) {
        l &lt;- as.list(substitute(list(...)))[-1L]
        if (length(l) == 1L &amp;&amp; is.list(..1) &amp;&amp; !is.null(nm &lt;- names(..1)))
            return(nm)
        nm &lt;- names(l)
        fixup &lt;- if (is.null(nm))
            seq_along(l)
        else nm == ""
        dep &lt;- vapply(l[fixup], function(x) switch(deparse.level +
            1, "", if (is.symbol(x)) as.character(x) else "",
            deparse(x, nlines = 1)[1L]), "")
        if (is.null(nm))
            dep
        else {
            nm[fixup] &lt;- dep
            nm
        }
    }
    miss.use &lt;- missing(useNA)
    miss.exc &lt;- missing(exclude)
    useNA &lt;- if (miss.use &amp;&amp; !miss.exc &amp;&amp; !match(NA, exclude,
        nomatch = 0L))
        "ifany"
    else match.arg(useNA)
    doNA &lt;- useNA != "no"
    if (!miss.use &amp;&amp; !miss.exc &amp;&amp; doNA &amp;&amp; match(NA, exclude,
        nomatch = 0L))
        warning("'exclude' containing NA and 'useNA' != \"no\"' are a bit contradicting")
    args &lt;- list(...)
    if (length(args) == 1L &amp;&amp; is.list(args[[1L]])) {
        args &lt;- args[[1L]]
        if (length(dnn) != length(args))
            dnn &lt;- paste(dnn[1L], seq_along(args), sep = ".")
    }
    if (!length(args))
        stop("nothing to tabulate")
    bin &lt;- 0L
    lens &lt;- NULL
    dims &lt;- integer()
    pd &lt;- 1L
    dn &lt;- NULL
    for (a in args) {
        if (is.null(lens))
            lens &lt;- length(a)
        else if (length(a) != lens)
            stop("all arguments must have the same length")
        fact.a &lt;- is.factor(a)
        if (doNA)
            aNA &lt;- anyNA(a)
        if (!fact.a) {
            a0 &lt;- a
            op &lt;- options(warn = 2)
            on.exit(options(op))
            a &lt;- factor(a, exclude = exclude)
            options(op)
        }
        add.na &lt;- doNA
        if (add.na) {
            ifany &lt;- (useNA == "ifany")
            anNAc &lt;- anyNA(a)
            add.na &lt;- if (!ifany || anNAc) {
                ll &lt;- levels(a)
                if (add.ll &lt;- !anyNA(ll)) {
                  ll &lt;- c(ll, NA)
                  TRUE
                }
                else if (!ifany &amp;&amp; !anNAc)
                  FALSE
                else TRUE
            }
            else FALSE
        }
        if (add.na)
            a &lt;- factor(a, levels = ll, exclude = NULL)
        else ll &lt;- levels(a)
        a &lt;- as.integer(a)
        if (fact.a &amp;&amp; !miss.exc) {
            ll &lt;- ll[keep &lt;- which(match(ll, exclude, nomatch = 0L) ==
                0L)]
            a &lt;- match(a, keep)
        }
        else if (!fact.a &amp;&amp; add.na) {
            if (ifany &amp;&amp; !aNA &amp;&amp; add.ll) {
                ll &lt;- ll[!is.na(ll)]
                is.na(a) &lt;- match(a0, c(exclude, NA), nomatch = 0L) &gt;
                  0L
            }
            else {
                is.na(a) &lt;- match(a0, exclude, nomatch = 0L) &gt;
                  0L
            }
        }
        nl &lt;- length(ll)
        dims &lt;- c(dims, nl)
        if (prod(dims) &gt; .Machine$integer.max)
            stop("attempt to make a table with &gt;= 2^31 elements")
        dn &lt;- c(dn, list(ll))
        bin &lt;- bin + pd * (a - 1L)
        pd &lt;- pd * nl
    }
    names(dn) &lt;- dnn
    bin &lt;- bin[!is.na(bin)]
    if (length(bin))
        bin &lt;- bin + 1L
    y &lt;- array(tabulate(bin, pd), dims, dimnames = dn)
    class(y) &lt;- "table"
    y
}
&lt;bytecode: 0x5592f38ae3e0&gt;
&lt;environment: namespace:base&gt;</code></pre>
</div>
<p>With this information it can be concluded that 70% of the covid-19
cases were from the community and only 0.06% were imported from
elsewhere. This can be visualised by means of a bar chart:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Bar Graphs</span></span>
<span></span>
<span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">table</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">type_of_contagion</span>, y <span class="op">=</span> <span class="va">perc</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span>stat<span class="op">=</span><span class="st">"identity"</span>, color<span class="op">=</span><span class="st">"darkblue"</span>, fill<span class="op">=</span><span class="st">"lightblue"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>y <span class="op">=</span> <span class="st">"%"</span>, x <span class="op">=</span> <span class="st">" "</span>, title <span class="op">=</span> <span class="st">"Type of Contagion"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in ggplot(data = table, aes(x = type_of_contagion, y = perc)): could not find function "ggplot"</code></pre>
</div>
<center>
<p><a href="https://epiverse-trace.github.io/epiverse-trace/Error_bank.html" class="external-link"><img src="fig/dudas.png" width="100" class="figure"></a></p>
</center>
</section><section><h2 class="section-heading" id="topic-3-probability">
<strong>Topic 3: Probability</strong><a class="anchor" aria-label="anchor" href="#topic-3-probability"></a>
</h2>
<hr class="half-width">
<p>In a study published in the NEJM in 2014 entitled “Ebola Virus
Disease in West Africa- The First 9 Months of the Epidemic and Forward
Projections” (<a href="https://www.nejm.org/doi/full/10.1056/NEJMoa1411100" class="external-link"><strong>DOI:
10.1056/NEJMoa1411100</strong></a>), described the clinical and
epidemiological characteristics of Ebola cases reported during the
epidemic that affected the countries of Guinea, Liberia, Nigeria and
Sierra Leone since December 2013. The study found that those over 44
years of age were more likely to die from the disease. Similar to the
referenced article, a comparable conclusion is reached if we perform an
equivalent calculation using measures of association seen in the General
Epidemiology Unit applied to infectious diseases, such as Relative Risks
(RR) of the Risk Ratio or Relative Risk (RR). For this, a 2x2 table can
be reconstructed, where the RR can be measured by the ratio between the
CFR of a group A (e.g., cases aged 45 years or older) and a group B
(e.g., cases aged 44 years or younger), where the CFR is the case
fatality risk (CFR).</p>
<p>Thus, we obtain that the risk of death in cases aged 45 years or
older is 1.20 times the risk of death in cases aged 44 years or younger,
with a 95% confidence interval of 1.13 to 1.27, and a p-value of less
than 0.01. To reproduce this calculation you can use
the<strong>epitools</strong> library as shown below.</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load the epitools package</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">epitools</span><span class="op">)</span>  </span>
<span></span>
<span><span class="co"># Create a 2x2 contingency table with the given values</span></span>
<span><span class="va">table2x2</span> <span class="op">&lt;-</span> <span class="fu">matrix</span><span class="op">(</span><span class="fu">c</span><span class="op">(</span><span class="fl">311</span>, <span class="fl">51</span>, <span class="fl">768</span>, <span class="fl">299</span><span class="op">)</span>, nrow <span class="op">=</span> <span class="fl">2</span>, ncol <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>  </span>
<span></span>
<span><span class="co"># Calculate the risk ratio using the contingency table</span></span>
<span><span class="fu">epitools</span><span class="fu">::</span><span class="fu">riskratio</span><span class="op">(</span><span class="va">table2x2</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>$data
          Outcome
Predictor  Disease1 Disease2 Total
  Exposed1      311      768  1079
  Exposed2       51      299   350
  Total         362     1067  1429

$measure
          risk ratio with 95% C.I.
Predictor  estimate    lower    upper
  Exposed1 1.000000       NA       NA
  Exposed2 1.200227 1.133086 1.271346

$p.value
          two-sided
Predictor    midp.exact fisher.exact   chi.square
  Exposed1           NA           NA           NA
  Exposed2 3.179312e-08 4.200177e-08 9.982161e-08

$correction
[1] FALSE

attr(,"method")
[1] "Unconditional MLE &amp; normal approximation (Wald) CI"</code></pre>
</div>
<p>An introduction to statistical inference and confidence intervals can
be found in Topic 5 of this Unit.</p>
<center>
<p><a href="https://epiverse-trace.github.io/epiverse-trace/Error_bank.html" class="external-link"><img src="fig/dudas.png" width="100" class="figure"></a></p>
</center>
</section><section><h2 class="section-heading" id="topic-4-principal-probability-distributions">
<strong>Topic 4: Principal probability distributions</strong><a class="anchor" aria-label="anchor" href="#topic-4-principal-probability-distributions"></a>
</h2>
<hr class="half-width">
<p>As described in Topic 3, probability studies the behaviour of random
phenomena “events”. In this process, the following are observed
<strong>random variables (v.a),</strong> usually denoted as
<strong>X</strong> which aim to assign a real number to each event that
can happen in the sample space.</p>
<p>For the explanation and examples of the main distributions, it is
important that you install and load the packages
<strong>epiparameter</strong> packages from Epiverse.</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># If you haven't loaded it yet, load the epiparameter library</span></span>
<span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">epiparameter</span><span class="op">)</span></span></code></pre>
</div>
<p><strong>Discrete Models</strong></p>
<p>The binomial distribution allows describing the probability of
occurrence of an event with two possible outcomes, success (p) or
failure (1-p), in a given number of independent trials n with constant
probability of success p. The random variable under study corresponds
to:</p>
<p>X: Number of successes in n trials</p>
<p>The binomial model can be useful to know the probability of observing
a given number of events (e.g. cases, deaths, re-infections) in a
population of size n under the assumption that the probability of the
event is constant. The binomial distribution depends on two parameters:
the probability of success p and the number of independent trials n.</p>
<p>If X has a binomial distribution then it is represented as follows:
X~Bin(n,p)</p>
<p>And its density function, mean, expectation and variance correspond
to:</p>
<p><span class="math inline">\(f(x)=P(X=x)=(n x )\)</span></p>
<p><span class="math inline">\(p^x (1-p)^{(n-x)}\)</span></p>
<p><span class="math inline">\(E(x)=np\)</span></p>
<p><span class="math inline">\(Var(x)=np(1-p)\)</span></p>
<p>Example: If a virus with an attack rate of 60% is introduced into a
community of 20 individuals, what is the probability that 10 or fewer
individuals are infected in this community?</p>
<p>Be <span class="math inline">\(X~Bin(n=20,p=0.60)\)</span> then the
following expression needs to be calculated:</p>
<p><span class="math inline">\(P(X≤10)=∑_(x=0)^10 (20 x ) 〖0.60〗^x
(1-0.60)^(20-x)\)</span></p>
<p>In R this can be calculated as follows:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Define the probability of success</span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fl">0.60</span>  </span>
<span></span>
<span><span class="co"># Define the number of trials</span></span>
<span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">20</span>  </span>
<span></span>
<span><span class="co"># Define the number of successes we are analyzing</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">10</span>  </span>
<span></span>
<span><span class="co"># Compute the cumulative probability of getting at most 'x' successes</span></span>
<span><span class="fu">pbinom</span><span class="op">(</span><span class="va">x</span>, <span class="va">n</span>, <span class="va">p</span>, lower.tail <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 0.2446628</code></pre>
</div>
<p>Therefore, the probability of a maximum of 10 individuals becoming
infected is 24.5%.</p>
<p>On <a href="https://ben18785.shinyapps.io/distribution-zoo/" class="external-link">distribution-zoo</a>
you can view the complete distribution of the variable</p>
<p><span class="math inline">\(X~Bin(n=20,p=0.60)\)</span>. Thus, it can
be concluded that on average one would expect to find 12 infected in a
community of 20 individuals based on an attack rate of 60%.</p>
<figure><img src="fig/distribution-zoo.png" class="figure mx-auto d-block"></figure><p><strong>Poisson distribution</strong></p>
<p>The distribution of <em>Poisson distribution</em> distribution models
the behaviour of random variables describing the number of events,
“counts”, occurring in a fixed observation interval, e.g. time (number
of infections occurring in an hour, day, week, year, etc.), or area
(number of infections occurring in a municipality, hospital, etc.).</p>
<p>This distribution has a parameter called lambda (<span class="math inline">\(λ\)</span>), <span class="math inline">\(λ&gt;0\)</span> which describes the average number
of events occurring in the fixed observation interval. If <span class="math inline">\(X\)</span> has a Poisson distribution, then it is
represented as follows:</p>
<p><span class="math inline">\(X\)</span>~<span class="math inline">\(Poisson(λ)\)</span></p>
<p>Its density, expectation, mean and variance function corresponds
to:</p>
<p><span class="math inline">\(fx=P(X=x)=\frac{e^{-λ}λ^x}{x!},
x=0,1,2,..,\)</span></p>
<p><span class="math inline">\(E(x)=λ Var(x)=λ\)</span></p>
<p>In infectious diseases, the Poisson distribution can be used to model
the number of secondary cases generated by a primary case. In this
context, the parameter is a function of the effective number of
replication <strong>R</strong> which represents the average number of
secondary infections caused by each primary case over time in a
population composed of susceptible and non-susceptible individuals.</p>
<p>:::: challenge <span class="math display">\[**Example**\]</span>{.underline}</p>
<p>Suppose one wishes to study the propagation of an outbreak based on a
Poisson model as days (t) elapse. The random variable of interest
is:</p>
<p><span class="math inline">\(X_{(t )}\)</span> Number of secondary
cases caused by each primary case on day t</p>
<p>This is a Poisson model since there is a fixed observation interval
“each primary case” and one wishes to study the number of observed
secondary cases “events”. Thus, the following model could be
constructed:</p>
<p><span class="math inline">\(X_{(t )}∼Poisson (λ= R
X_{(t-1)})\)</span></p>
<p>The above expresses that the average number of secondary cases on day
t depends on the number of reproduction <span class="math inline">\(R\)</span> and the number of observed cases <span class="math inline">\(X\)</span> on the previous day <span class="math inline">\((t-1)\)</span>. However, R is difficult to know in
real life and it may be of interest to approximate its value based on
data observed during the outbreak in order to generate control
strategies.</p>
<p>Let us assume that on day 1 of the outbreak <span class="math inline">\((t=1)\)</span> a total of 5 new cases occurred on
day 1 of the outbreak and that on the following day <span class="math inline">\((t=2)\)</span> 10 new cases occurred on the
following day. With the above information we are interested in studying
the number of secondary cases on day 2, which is equivalent to:</p>
<p><span class="math inline">\(X_{(2 )}\)</span> Number of secondary
cases caused by each primary case on Day 2</p>
<p>Which has the following distribution:</p>
<p><span class="math inline">\(X_{(2 )}∼Poisson (λ= R *5)\)</span></p>
<p>From this, we could estimate the value of <span class="math inline">\(R\)</span> by finding out which value maximises
the probability of observing this specific number of secondary cases on
day 2, i.e:</p>
<p><span class="math inline">\(P(X_{(2 )}=10)=\frac{e^{-(R *5)} (R
*5)^{10}}{10!}\)</span></p>
<p><strong>In R we could find this out by varying different values of
the number of reproduction number (R) as follows:</strong></p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Poisson probability calculation function</span></span>
<span><span class="va">poisson_probability</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x1</span>, <span class="va">x2</span>, <span class="va">r</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">dpois</span><span class="op">(</span><span class="va">x2</span>, <span class="va">r</span> <span class="op">*</span> <span class="va">x1</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span></span>
<span><span class="co"># Input values</span></span>
<span><span class="va">x1</span> <span class="op">&lt;-</span> <span class="fl">5</span></span>
<span><span class="va">x2</span> <span class="op">&lt;-</span> <span class="fl">10</span></span>
<span><span class="va">reproduction_numbers</span> <span class="op">&lt;-</span> <span class="fu">seq</span><span class="op">(</span><span class="fl">0</span>, <span class="fl">5</span>, <span class="fl">0.01</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># Calculate probabilities</span></span>
<span><span class="va">poisson_results</span> <span class="op">&lt;-</span> <span class="fu">poisson_probability</span><span class="op">(</span><span class="va">x1</span>, <span class="va">x2</span>, <span class="va">reproduction_numbers</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># Create dataframe for ggplot</span></span>
<span><span class="va">results_data</span> <span class="op">&lt;-</span> <span class="fu">data.frame</span><span class="op">(</span><span class="va">reproduction_numbers</span>, <span class="va">poisson_results</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># Find the most probable reproduction number</span></span>
<span><span class="va">most_probable_number</span> <span class="op">&lt;-</span> <span class="va">results_data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">poisson_results</span> <span class="op">==</span> <span class="fu">max</span><span class="op">(</span><span class="va">poisson_results</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">pull</span><span class="op">(</span><span class="va">reproduction_numbers</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in results_data %&gt;% filter(poisson_results == max(poisson_results)) %&gt;% : could not find function "%&gt;%"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create the plot with ggplot2</span></span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="va">results_data</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">reproduction_numbers</span>, y <span class="op">=</span> <span class="va">poisson_results</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_vline</span><span class="op">(</span>xintercept <span class="op">=</span> <span class="va">most_probable_number</span>, color <span class="op">=</span> <span class="st">"red"</span>, size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>y <span class="op">=</span> <span class="st">"Probability"</span>, x <span class="op">=</span> <span class="st">"Reproduction Number (R)"</span>, title <span class="op">=</span> <span class="st">"Poisson Model"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in ggplot(results_data, aes(x = reproduction_numbers, y = poisson_results)): could not find function "ggplot"</code></pre>
</div>
<p>Therefore, if the number of secondary cases behaves according to a
Poisson distribution, there is a high probability that the number of new
cases observed on day 2 were generated with a reproduction number of
R=2. This implies that the average number of secondary cases per primary
case is 2. However, this simple model assumes that the number of
secondary cases generated by each primary case have equal mean and
variance, implying that all primary cases generate on average a similar
number of secondary cases. This assumption may be difficult to make for
some infectious diseases especially when they follow a pattern of
overdispersion (20% of cases cause 80% of transmission) so the Poisson
model has limitations in its application. :::</p>
<p><strong>Negative Binomial Distribution</strong></p>
<p>Like the Poisson distribution, the negative binomial distribution
allows one to model the number of events that occur “counts”. If <span class="math inline">\(X\)</span> has a Negative Binomial distribution,
then it is represented as follows.</p>
<p>$X <span class="math inline">\(~\)</span> BN(μ,k)$</p>
<p>where, <span class="math inline">\(μ\)</span> represents the mean of
the distribution and <span class="math inline">\(k\)</span> is the
dispersion parameter that allows the mean and variance of the events not
to be equal. This parameter <span class="math inline">\(k\)</span>
allows the degree of dispersion in how events are generated to be
introduced to the model. Thus, <span class="math inline">\(k\)</span>
inversely measures the degree of variation of the events that occur
given that the mean and variance of the distribution correspond to:</p>
<p><span class="math inline">\(E(x)=μ\)</span></p>
<p><span class="math inline">\(Var(x)=μ(1+\frac{μ}{k})\)</span></p>
<p>With density function:</p>
<p><span class="math inline">\(f(x)=\frac{Γ(x+k)}{Γ(k)Γ(x+1)}
(\frac{μ}{μ+k})^x (\frac{k}{μ+k})^k,x=0,1,2...\)</span></p>
<div id="discussion1" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Desafío</h3>
<div class="callout-content">
<p><span class="math display">\[**Example**\]</span>{.underline}</p>
<p>In the study of infectious diseases, the negative binomial
distribution plays a relevant role since it allows modelling the
distribution of the number of secondary cases generated by a primary
case, i.e. it allows knowing the distribution of the basic reproduction
number R_0. In this context, the mean of the distribution corresponds to
<span class="math inline">\(R_0\)</span>(Number of secondary cases in a
fully susceptible population) and the parameter <span class="math inline">\(k\)</span> controls for the variation among
primary cases. Thus, small values of k suggest that secondary cases are
generated by a small group of primary cases, while large values suggest
that the spread of the virus is high. Thus, being <span class="math inline">\(X\)</span> the number of secondary cases, then</p>
<p><span class="math inline">\(X \sim Bn(R_0,k)\)</span></p>
<p><span class="math inline">\(E(x)=R_0\)</span></p>
<p><span class="math inline">\(Var(x)=R_0 (\frac{1+R_0}{k})\)</span></p>
<p>The paper by Lloyd-Smith et al. shows how the negative binomial
distribution allows modelling the distribution of secondary cases of
various pathogens. Based on the cases reported during the SARS outbreak
in Singapore in 2023, they estimated the parameters of the negative
binomial distribution and found a <span class="math inline">\(R_0=1.630\)</span> y <span class="math inline">\(k=0.160\)</span>. These estimates are available in
the <code>epiparameter</code> which is a package available at
<code>R</code> which compiles the main estimates for several
epidemiological parameters of interest in the study of infectious
diseases.</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Retrieve epidemiological parameter data for SARS</span></span>
<span><span class="va">SARS_R</span> <span class="op">&lt;-</span> <span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">epiparameter_db</span><span class="op">(</span>  </span>
<span>    disease <span class="op">=</span> <span class="st">"SARS"</span>,  <span class="co"># Specify the disease as SARS</span></span>
<span>    epi_name <span class="op">=</span> <span class="st">"offspring distribution"</span>,  <span class="co"># Select the epidemiological parameter: offspring distribution</span></span>
<span>    single_epiparameter <span class="op">=</span> <span class="cn">TRUE</span>  <span class="co"># Request a single epidemiological parameter</span></span>
<span><span class="op">)</span>  </span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Using Lloyd-Smith J, Schreiber S, Kopp P, Getz W (2005). "Superspreading and
the effect of individual variation on disease emergence." _Nature_.
doi:10.1038/nature04153 &lt;https://doi.org/10.1038/nature04153&gt;..
To retrieve the citation use the 'get_citation' function</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Display the retrieved data</span></span>
<span><span class="va">SARS_R</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Disease: SARS
Pathogen: SARS-Cov-1
Epi Parameter: offspring distribution
Study: Lloyd-Smith J, Schreiber S, Kopp P, Getz W (2005). "Superspreading and
the effect of individual variation on disease emergence." _Nature_.
doi:10.1038/nature04153 &lt;https://doi.org/10.1038/nature04153&gt;.
Distribution: nbinom (No units)
Parameters:
  mean: 1.630
  dispersion: 0.160</code></pre>
</div>
<p>With these results it would be possible to plot the distribution of
the number of secondary SARS cases in order to suggest control measures.
This is also available in the <code>epiparameter</code> with the
function <code>plot</code>.</p>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Plot the retrieved epidemiological parameter for SARS</span></span>
<span><span class="fu">plot</span><span class="op">(</span><span class="va">SARS_R</span><span class="op">)</span>  </span></code></pre>
</div>
<figure><img src="fig/estadistica-rendered-unnamed-chunk-14-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Finally, it is possible to conclude that most cases infected with
SARS do not spread the disease since the mode of the distribution is
<span class="math inline">\(0\)</span>. This result is expected given
that <span class="math inline">\(k&lt;1\)</span> indicating that the
secondary cases are generated by a small group of infected people and
that the estimated value of <span class="math inline">\(R_0\)</span>
varies for the cases.</p>
</div>
</div>
</div>
<p><strong>Geometric distribution</strong></p>
<p>Another discrete distribution of interest that can be used to model
counts or number of events is the geometric distribution. In infectious
diseases its main use arises when the dispersion parameter of the
negative distribution is equal to 1. This distribution depends on the
probability of occurrence of the event of interest and is represented as
follows.</p>
<p><span class="math inline">\(X \sim Geom(p)\)</span></p>
<p>where p represents the probability of success or the probability of
occurrence of the event of interest with mean equal to:</p>
<p><span class="math inline">\(E(x)=\frac{1}{p}\)</span></p>
<div id="discussion2" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Desafío</h3>
<div class="callout-content">
<p><strong>Example</strong></p>
<p>If in the case of the SARS outbreak in Singapore in the year 2023,
the estimated value of <span class="math inline">\(k\)</span> would have
been <span class="math inline">\(1\)</span> then the distribution of
secondary cases could be modelled with a geometric distribution such
that its mean is equal to the <span class="math inline">\(R_0\)</span>
estimate, i.e. it must be satisfied that:</p>
<p><span class="math inline">\(E(x)=\frac{1}{p}=1.630\)</span> and
therefore, <span class="math inline">\(p=\frac{1}{1.630}\)</span></p>
<p>So the distribution of the number of secondary contacts could be
written as:</p>
<p><span class="math inline">\(X \sim Geom(p=0.613)\)</span></p>
<p>In R we could simulate the behaviour of the number of secondary cases
with the following code:</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Geometric Distribution</span></span>
<span></span>
<span><span class="co"># Create a sequence of values from 0 to 20 representing different R values</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">seq</span><span class="op">(</span><span class="fl">0</span>, <span class="fl">20</span>, <span class="fl">1</span><span class="op">)</span>  </span>
<span></span>
<span><span class="co"># Define the probability parameter for the geometric distribution</span></span>
<span><span class="va">prob</span> <span class="op">&lt;-</span> <span class="fl">1</span> <span class="op">/</span> <span class="fl">1.630</span>  </span>
<span></span>
<span><span class="co"># Create a data frame with the values of x and their corresponding geometric probabilities</span></span>
<span><span class="va">data_geom</span> <span class="op">&lt;-</span> <span class="fu">data.frame</span><span class="op">(</span><span class="va">x</span>, probg <span class="op">=</span> <span class="fu">dgeom</span><span class="op">(</span><span class="va">x</span>, <span class="va">prob</span><span class="op">)</span><span class="op">)</span>  </span>
<span></span>
<span><span class="co"># Plot the geometric distribution using ggplot2</span></span>
<span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">data_geom</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">probg</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>  </span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span><span class="op">)</span> <span class="op">+</span>  <span class="co"># Use a bar plot to visualize the probability distribution</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>y <span class="op">=</span> <span class="st">"Probability"</span>, x <span class="op">=</span> <span class="st">"Secondary cases"</span>, title <span class="op">=</span> <span class="st">"Geometric Distribution"</span><span class="op">)</span>  <span class="co"># Add labels and title</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in ggplot(data = data_geom, aes(x = x, y = probg)): could not find function "ggplot"</code></pre>
</div>
<p>Under the geometric distribution, then there is a higher probability
that a primary case can transmit the virus since the probability of a
primary case generating 1,2, or more secondary cases is higher with this
model than estimated with the negative binomial model.</p>
</div>
</div>
</div>
<p><strong>Continuous Models</strong></p>
<p><strong>Uniform Distribution</strong></p>
<p>The uniform distribution models a continuous variable that takes
values within an interval. $ [a,b] $ with equal probability. This
distribution is often used in the simulation of random numbers. If <span class="math inline">\(X\)</span> follows a uniform distribution, this
can be represented by:</p>
<p><span class="math inline">\(X ∼U(a,b)\)</span></p>
<p>Its parameters a and b, represent the minimum and maximum value that
the variable can take, respectively. Its density function is determined
by:</p>
<p><span class="math inline">\(f(x)=\frac{1}{b-a}\)</span>,with <span class="math inline">\(a&lt;x&lt;b\)</span></p>
<p>The mean and variance is determined by:</p>
<p><span class="math inline">\(E(x)=\frac{a+b}{2}\)</span> y <span class="math inline">\(V(x)=\frac{(b-a)^2}{12}\)</span></p>
<div id="discussion3" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Desafío</h3>
<div class="callout-content">
<p><strong>Example</strong></p>
<p>A researcher wants to simulate the behaviour of COVID-19 and needs to
randomly generate the value that the basic reproduction number can take.
<span class="math inline">\(R_0\)</span> and then use it within his
propagation model. For this, he assumes that the <span class="math inline">\(R_0\)</span> of COVID-19 follows a uniform
distribution between 2 and 5:</p>
<p>$R0∼U [2,5] $</p>
<p>For your simulation you need to generate five possible values of
<span class="math inline">\(R_0\)</span> with equal probability, this in
<code>R</code> is solved using the following code:</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Generation of random numbers with a uniform distribution</span></span>
<span></span>
<span><span class="co"># Define the number of random values to generate</span></span>
<span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">5</span>  </span>
<span></span>
<span><span class="co"># Set the lower and upper bounds of the uniform distribution</span></span>
<span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fl">2</span>  </span>
<span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fl">5</span>  </span>
<span></span>
<span><span class="co"># Generate 'n' random numbers uniformly distributed between 'a' and 'b'</span></span>
<span><span class="fu">runif</span><span class="op">(</span><span class="va">n</span>, <span class="va">a</span>, <span class="va">b</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 3.031104 2.735529 3.672220 2.138861 3.071192</code></pre>
</div>
</div>
</div>
</div>
<p><strong>Normal Distribution</strong></p>
<p>The normal distribution is undoubtedly the most important
probabilistic model in statistical theory because of its ability to
model many real-life problems and its relevant role in the field of
inference. This distribution attempts to model random variables that can
be influenced by multiple factors, whose effects when added together
make the values of the distribution tend towards the centre (mean). For
example, body temperature may follow a normal distribution because it is
influenced by multiple biological and environmental factors, which when
added together cause most individuals to lie around a central value.</p>
<p>To express mathematically that a continuous variable has a normal
distribution, we write:</p>
<p><span class="math inline">\(X ∼N(μ,σ)\)</span></p>
<p>Which will have the following probability density function associated
with it:</p>
<p>$f(x)=exp [-frac{1}{2 σ<sup>2}(x-u)</sup>2] $</p>
<p>Where <span class="math inline">\(μ\)</span> y <span class="math inline">\(σ\)</span> are the parameters of the distribution
and represent respectively the mean and the standard deviation of the
random variable, i.e. the central value and the dispersion of the data
with respect to it. These parameters correspond to the values that would
be obtained if the entire population rather than a sample of the
population could be studied.</p>
<p>When <span class="math inline">\(μ=0\)</span> y <span class="math inline">\(σ=1\)</span> is called <strong>normal distribution
standard</strong>. However, there are many normal distributions
according to the values taken by their parameters, but regardless of the
value of the parameters, the shape of the distribution is always
<strong>symmetric</strong> and can always be transformed to a standard
normal distribution by means of a standardisation procedure applying the
following formula:</p>
<p><span class="math inline">\(Z=\frac{X-μ}{σ}∼N(0,1)\)</span></p>
<div id="discussion4" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Desafío</h3>
<div class="callout-content">
<p><strong>Example</strong>,</p>
<p>If it is known that in a community the age of the cases that died
from COVID-19 has a normal distribution with mean 67.8 and standard
deviation 15.4 years. What is the probability that a deceased is younger
than 40 years old?</p>
<p>First, we define the variable to be studied, which has a normal
distribution.</p>
<p><span class="math inline">\(X∼N(67.8,15.4)\)</span></p>
<p><span class="math inline">\(X\)</span> Age of deceased COVID-19
cases</p>
<p>In R, we can use the function <code>pnorm()</code> function as
follows to find:</p>
<p><span class="math inline">\(P(X&lt;40)=?\)</span></p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Define the mean of the normal distribution</span></span>
<span><span class="va">mu</span> <span class="op">&lt;-</span> <span class="fl">67.8</span></span>
<span><span class="co"># Define the standard deviation of the normal distribution</span></span>
<span><span class="va">sigma</span> <span class="op">&lt;-</span> <span class="fl">15.4</span></span>
<span><span class="co"># Define the value for which we want to compute the cumulative probability</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">40</span></span>
<span><span class="co"># Compute the cumulative probability </span></span>
<span><span class="fu">pnorm</span><span class="op">(</span><span class="va">x</span>, mean <span class="op">=</span> <span class="va">mu</span>, sd <span class="op">=</span> <span class="va">sigma</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 0.0355221</code></pre>
</div>
<p>Therefore, the probability of a COVID-19 fatality being under the age
of 40 is 3.5%.</p>
</div>
</div>
</div>
<p><strong>Log-normal distribution</strong></p>
<p>The log-normal distribution arises when considering continuous random
variables that do not take the value of zero or negative numbers whose
distribution has an asymmetric shape and whose variation is generated by
multiple factors whose effects are not symmetric. If an a.v. follows a
lognormal distribution, its transformation by applying the logarithm
function will generate a normal variable and hence its name. In the
field of infectious diseases, the log-normal distribution is very useful
for modelling incubation periods (time from infection to onset of
symptoms).</p>
<p>If <span class="math inline">\(X ∼LogN(μ,σ)\)</span> then it holds
that <span class="math inline">\(Y=log (X) ∼N(μ,σ)\)</span> and the
density function of <span class="math inline">\(X\)</span> is given
by:</p>
<p><span class="math inline">\(f(x)=\frac{1}{
xσ\sqrt{2\pi}}e^{-\frac{1}{2}(\frac{ln(x)-u}{σ})^2}\)</span></p>
<p>Unlike the normal distribution, in the log-normal distribution the
parameter μ plays the role of a scaling parameter since it increases the
dispersion of the data by increasing its degree of amplitude and the
parameter σ controls the shape, i.e. the degree of skewness.</p>
<div id="discussion5" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Desafío</h3>
<div class="callout-content">
<p><strong>Example</strong></p>
<p>In the 2009 paper by Lessler et al. the incubation periods of several
pathogens were modelled based on a lognormal distribution. The main
interest was to estimate the parameters of <span class="math inline">\((μ,σ)\)</span>. For example, in the case of SARS,
an estimate was found of <span class="math inline">\(μ=0.660\)</span>, y
<span class="math inline">\(σ=1.205\)</span> which implies that on
average an infected case develops symptoms in 0.7 days. This information
can be obtained in the epiparameter package with the following
command:</p>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Retrieve epidemiological parameter data for the incubation period of SARS</span></span>
<span><span class="va">SARS_incubation</span> <span class="op">&lt;-</span> <span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">epiparameter_db</span><span class="op">(</span>  </span>
<span>  disease <span class="op">=</span> <span class="st">"SARS"</span>,  <span class="co"># Specify the disease as SARS</span></span>
<span>  epi_name <span class="op">=</span> <span class="st">"incubation period"</span>,  <span class="co"># Select the epidemiological parameter: incubation period</span></span>
<span>  single_epiparameter <span class="op">=</span> <span class="cn">TRUE</span>  <span class="co"># Request a single epidemiological parameter</span></span>
<span><span class="op">)</span>  </span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Using Lessler J, Reich N, Brookmeyer R, Perl T, Nelson K, Cummings D (2009).
"Incubation periods of acute respiratory viral infections: a systematic
review." _The Lancet Infectious Diseases_.
doi:10.1016/S1473-3099(09)70069-8
&lt;https://doi.org/10.1016/S1473-3099%2809%2970069-8&gt;..
To retrieve the citation use the 'get_citation' function</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Display the retrieved incubation period data</span></span>
<span><span class="va">SARS_incubation</span>  </span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Disease: SARS
Pathogen: SARS-Cov-1
Epi Parameter: incubation period
Study: Lessler J, Reich N, Brookmeyer R, Perl T, Nelson K, Cummings D (2009).
"Incubation periods of acute respiratory viral infections: a systematic
review." _The Lancet Infectious Diseases_.
doi:10.1016/S1473-3099(09)70069-8
&lt;https://doi.org/10.1016/S1473-3099%2809%2970069-8&gt;.
Distribution: lnorm (days)
Parameters:
  meanlog: 1.386
  sdlog: 0.593</code></pre>
</div>
<p>The complete incubation period distribution for SARS can be plotted
by means of:</p>
<div class="codewrapper sourceCode" id="cb43">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Plot the retrieved epidemiological parameter for SARS</span></span>
<span><span class="fu">plot</span><span class="op">(</span><span class="va">SARS_incubation</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/estadistica-rendered-unnamed-chunk-19-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>The above is useful for answering questions such as: What is the
probability that a SARS case will develop symptoms two days after
infection?</p>
<div class="codewrapper sourceCode" id="cb44">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Compute the complementary cumulative probability (P(X &gt; 2)) for a lognormal distribution</span></span>
<span></span>
<span><span class="fu">stats</span><span class="fu">::</span><span class="fu">plnorm</span><span class="op">(</span><span class="fl">2</span>, meanlog <span class="op">=</span> <span class="fl">0.660</span>, sdlog <span class="op">=</span> <span class="fl">1.205</span>, lower.tail <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 0.4890273</code></pre>
</div>
</div>
</div>
</div>
<p><strong>Gamma distribution</strong></p>
<p>When we are studying Poisson random variables, we are usually
interested in studying the number of events that occur with mean <span class="math inline">\(λ\)</span> for a defined time interval. The Gamma
distribution focuses on studying the v.a <span class="math inline">\(X\)</span>: the time it takes for a given number
of events to occur. <span class="math inline">\(α^th\)</span>. For
example, if we are evaluating the number of infections per hour and we
want to study how much time can elapse until we find α infections,
graphically <span class="math inline">\(X\)</span> corresponds to:</p>
<figure><img src="fig/gamma.png" class="figure mx-auto d-block"></figure><p>The Gamma distribution is widely used in survival analysis due to its
flexibility given by its shape parameters. <span class="math inline">\(α\)</span> and scale <span class="math inline">\(θ\)</span> which determine its density function,
which has an asymmetric behaviour. Here, <span class="math inline">\(θ\)</span> represent the average waiting time
until the first event occurs, and <span class="math inline">\(α\)</span>
is the number of events expected to occur. This distribution is denoted
as follows:</p>
<p><span class="math inline">\(X ∼Gamma(α,θ)\)</span></p>
<p><span class="math inline">\(f(x)=\frac{1}{(α-1)!θ^α}e^{\frac{-x}{θ}}
x^{α-1}\)</span></p>
<p><span class="math inline">\(E(x)=αθ\)</span></p>
<p><span class="math inline">\(Var(x)=αθ^2\)</span></p>
<p>When <span class="math inline">\(θ\)</span> value increases, the
concentration of the probability shifts to the right, the same is true
when expecting a higher number of events. <span class="math inline">\(α\)</span> given that the waiting time <span class="math inline">\(X\)</span> can be longer.</p>
<p>:::: challenge <strong>Example</strong></p>
<p>One possible application of the Gamma distribution is in modelling
the serial interval of infectious diseases. The serial interval (s) is
defined as the time between the onset of symptoms of the primary case
and the onset of symptoms of the secondary case. In the study by Ghani
et al. the serial interval distribution of influenza was described as
follows <em>Influenza-A-H1N1Pdm</em> by means of the gamma distribution
and found the following parameters:</p>
<p><span class="math inline">\(s ∼Gamma( α=2.622,θ=0.957)\)</span></p>
<p>This information can also be obtained from the package
<code>epiparameter</code> with the following command:</p>
<div class="codewrapper sourceCode" id="cb46">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Retrieve epidemiological parameter data for the serial interval of Influenza</span></span>
<span><span class="va">influenza_s</span> <span class="op">&lt;-</span> <span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">epiparameter_db</span><span class="op">(</span>  </span>
<span>  disease <span class="op">=</span> <span class="st">"Influenza"</span>,  <span class="co"># Specify the disease as Influenza</span></span>
<span>  epi_name <span class="op">=</span> <span class="st">"serial_interval"</span>,  <span class="co"># Select the epidemiological parameter: serial interval</span></span>
<span>  single_epiparameter <span class="op">=</span> <span class="cn">TRUE</span>  <span class="co"># Request a single epidemiological parameter</span></span>
<span><span class="op">)</span>  </span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Using Ghani A, Baguelin M, Griffin J, Flasche S, van Hoek A, Cauchemez S,
Donnelly C, Robertson C, White M, Truscott J, Fraser C, Garske T, White
P, Leach S, Hall I, Jenkins H, Ferguson N, Cooper B (2009). "The Early
Transmission Dynamics of H1N1pdm Influenza in the United Kingdom."
_PLoS Currents_. doi:10.1371/currents.RRN1130
&lt;https://doi.org/10.1371/currents.RRN1130&gt;..
To retrieve the citation use the 'get_citation' function</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb48">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Display the retrieved serial interval data</span></span>
<span><span class="va">influenza_s</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Disease: Influenza
Pathogen: Influenza-A-H1N1Pdm
Epi Parameter: serial interval
Study: Ghani A, Baguelin M, Griffin J, Flasche S, van Hoek A, Cauchemez S,
Donnelly C, Robertson C, White M, Truscott J, Fraser C, Garske T, White
P, Leach S, Hall I, Jenkins H, Ferguson N, Cooper B (2009). "The Early
Transmission Dynamics of H1N1pdm Influenza in the United Kingdom."
_PLoS Currents_. doi:10.1371/currents.RRN1130
&lt;https://doi.org/10.1371/currents.RRN1130&gt;.
Distribution: gamma (days)
Parameters:
  shape: 2.622
  scale: 0.957</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb50">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Plot the retrieved epidemiological parameter for influenza</span></span>
<span><span class="fu">plot</span><span class="op">(</span><span class="va">influenza_s</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/estadistica-rendered-unnamed-chunk-22-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>With this information the mean and standard deviation of the
distribution could be found based on the application of the gamma
distribution:</p>
<div class="codewrapper sourceCode" id="cb51">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Define the shape and scale parameters</span></span>
<span><span class="va">shape</span> <span class="op">&lt;-</span> <span class="fl">2.622</span>  </span>
<span><span class="va">scale</span> <span class="op">&lt;-</span> <span class="fl">0.957</span>  </span>
<span></span>
<span><span class="co"># Calculate the mean of the distribution</span></span>
<span><span class="va">mean</span> <span class="op">&lt;-</span> <span class="va">shape</span> <span class="op">*</span> <span class="va">scale</span>  </span>
<span></span>
<span><span class="co"># Calculate the standard deviation of the distribution</span></span>
<span><span class="va">sd</span> <span class="op">&lt;-</span> <span class="fu">sqrt</span><span class="op">(</span><span class="va">shape</span> <span class="op">*</span> <span class="va">scale</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span>  </span>
<span></span>
<span><span class="co"># Print the computed mean and standard deviation</span></span>
<span><span class="fu">print</span><span class="op">(</span><span class="fu">c</span><span class="op">(</span><span class="va">mean</span>, <span class="va">sd</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 2.509254 1.549631</code></pre>
</div>
<p>Therefore, the mean of the influenza serial interval is 5.51 days
with a standard deviation of 1.55 days. :::</p>
<p><strong>Weibull distribution</strong></p>
<p>Like the Gamma distribution, the Weibull distribution is useful in
the analysis of v.a.s representing waiting times until a particular
event is observed. The Weibull distribution has two parameters and its
density function is defined by:</p>
<p><span class="math inline">\(f(x)=
\frac{β}{η}(\frac{x}{η})^{β-1}{e^{-(x/η)}}^β\)</span></p>
<p>Here, <span class="math inline">\(η\)</span> is the scale parameter
and <span class="math inline">\(β\)</span> the shape parameter. The
shape parameter <span class="math inline">\(β\)</span> is also known as
slope and attempts to model the relationship between probability and
lead times. Thus when <span class="math inline">\(β&gt;1\)</span> the
rate of occurrence of events increases over time, while if <span class="math inline">\(β&lt;1\)</span> describes that the risk of the
event decreases over time. The scale parameter handles the degree of
variability of the distribution and is found in the same units of <span class="math inline">\(X\)</span>.</p>
<p>:::: challenge <strong>Example</strong></p>
<p>The study by Virlogeux et al. described the distribution of the
incubation time of influenza using the Weibull distribution and found
the following parameters:</p>
<p><span class="math inline">\(x∼Gamma( β=2.101,η=3.839)\)</span></p>
<p>This information can also be obtained in the epiparameter package
with the following command:</p>
<div class="codewrapper sourceCode" id="cb53">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Retrieve epidemiological parameter data for the incubation period of Influenza</span></span>
<span><span class="va">influenza_incubation</span> <span class="op">&lt;-</span> <span class="fu">epiparameter</span><span class="fu">::</span><span class="fu">epiparameter_db</span><span class="op">(</span>  </span>
<span>  disease <span class="op">=</span> <span class="st">"Influenza"</span>,  <span class="co"># Specify the disease as Influenza</span></span>
<span>  epi_name <span class="op">=</span> <span class="st">"incubation period"</span>,  <span class="co"># Select the epidemiological parameter: incubation period</span></span>
<span>  single_epiparameter <span class="op">=</span> <span class="cn">TRUE</span>  <span class="co"># Request a single epidemiological parameter</span></span>
<span><span class="op">)</span>  </span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Using Virlogeux V, Li M, Tsang T, Feng L, Fang V, Jiang H, Wu P, Zheng J, Lau
E, Cao Y, Qin Y, Liao Q, Yu H, Cowling B (2015). "Estimating the
Distribution of the Incubation Periods of Human Avian Influenza A(H7N9)
Virus Infections." _American Journal of Epidemiology_.
doi:10.1093/aje/kwv115 &lt;https://doi.org/10.1093/aje/kwv115&gt;..
To retrieve the citation use the 'get_citation' function</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb55">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Display the retrieved incubation period data</span></span>
<span><span class="va">influenza_incubation</span>  </span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Disease: Influenza
Pathogen: Influenza-A-H7N9
Epi Parameter: incubation period
Study: Virlogeux V, Li M, Tsang T, Feng L, Fang V, Jiang H, Wu P, Zheng J, Lau
E, Cao Y, Qin Y, Liao Q, Yu H, Cowling B (2015). "Estimating the
Distribution of the Incubation Periods of Human Avian Influenza A(H7N9)
Virus Infections." _American Journal of Epidemiology_.
doi:10.1093/aje/kwv115 &lt;https://doi.org/10.1093/aje/kwv115&gt;.
Distribution: weibull (days)
Parameters:
  shape: 2.101
  scale: 3.839</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb57">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Plot the retrieved incubation period data</span></span>
<span><span class="fu">plot</span><span class="op">(</span><span class="va">influenza_incubacion</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'influenza_incubacion' not found</code></pre>
</div>
<p>:::</p>
<center>
<p><a href="https://epiverse-trace.github.io/epiverse-trace/Error_bank.html" class="external-link"><img src="fig/dudas.png" width="100" class="figure"></a></p>
</center>
</section><section><h2 class="section-heading" id="topic-5-introduction-to-statistical-inference">
<strong>Topic 5: Introduction to Statistical Inference</strong><a class="anchor" aria-label="anchor" href="#topic-5-introduction-to-statistical-inference"></a>
</h2>
<hr class="half-width">
<p>Statistics can be divided into two main branches: descriptive and
inferential. As we saw in previous units, the former commonly seeks to
summarise and explore data that have been collected from a selected
sample of a population. In contrast, the second aims to make
generalisations and conclusions about the whole population based on the
information or data from a sample.</p>
<p>By the nature of the inferential process, which is based on taking
random samples from the population, an estimator can take multiple
values since it depends on the units that were selected in the sample.
This variation due to chance, called<strong>variation sampling
variation</strong> must be involved in the inference process as we will
see below.</p>
<p>It is important to stress that sampling variation will depend on the
sample size. For example, if we take samples of size 10 and calculate
the CFR in each of them, these estimates will be more similar to each
other compared to those obtained when only 5 individuals per sample are
selected. This can be tested by running a simulation in R and selecting
1000 samples of size 5 and 10, respectively. As can be seen in the
figure below, the estimated CFRs when increasing the sample size from 5
to 10 were more similar with a lower RIQ.</p>
<div class="codewrapper sourceCode" id="cb59">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Set the random seed for reproducibility</span></span>
<span><span class="fu">set.seed</span><span class="op">(</span><span class="fl">200</span><span class="op">)</span>  </span>
<span></span>
<span><span class="co"># Create the population data frame with death indicators (1 = dead, 0 = alive)</span></span>
<span><span class="va">population</span> <span class="op">&lt;-</span> <span class="fu">data.frame</span><span class="op">(</span>dead <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fu">rep</span><span class="op">(</span><span class="fl">1</span>, <span class="fl">40</span><span class="op">)</span>, <span class="fu">rep</span><span class="op">(</span><span class="fl">0</span>, <span class="fl">160</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>  </span>
<span></span>
<span><span class="co"># Sample with size 5: Draw 100 random samples of size 5 (without replacement)</span></span>
<span><span class="va">samples_n5</span> <span class="op">&lt;-</span> <span class="va">population</span> <span class="op">%&gt;%</span>  </span>
<span>  <span class="fu">rep_sample_n</span><span class="op">(</span>size <span class="op">=</span> <span class="fl">5</span>, reps <span class="op">=</span> <span class="fl">100</span>, replace <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>  </span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in population %&gt;% rep_sample_n(size = 5, reps = 100, replace = FALSE): could not find function "%&gt;%"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb61">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Compute the Case Fatality Ratio (CFR) for each replicate in the sample size 5</span></span>
<span><span class="va">cfr_n5</span> <span class="op">&lt;-</span> <span class="va">samples_n5</span> <span class="op">%&gt;%</span>  </span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">replicate</span><span class="op">)</span> <span class="op">%&gt;%</span>  </span>
<span>  <span class="fu">summarise</span><span class="op">(</span>cfr <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">dead</span><span class="op">)</span><span class="op">)</span>  </span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in samples_n5 %&gt;% group_by(replicate) %&gt;% summarise(cfr = mean(dead)): could not find function "%&gt;%"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb63">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Sample with size 10: Draw 100 random samples of size 10 (without replacement)</span></span>
<span><span class="va">samples_n10</span> <span class="op">&lt;-</span> <span class="va">population</span> <span class="op">%&gt;%</span>  </span>
<span>  <span class="fu">rep_sample_n</span><span class="op">(</span>size <span class="op">=</span> <span class="fl">10</span>, reps <span class="op">=</span> <span class="fl">100</span>, replace <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>  </span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in population %&gt;% rep_sample_n(size = 10, reps = 100, replace = FALSE): could not find function "%&gt;%"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb65">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Compute the Case Fatality Ratio (CFR) for each replicate in the sample size 10</span></span>
<span><span class="va">cfr_n10</span> <span class="op">&lt;-</span> <span class="va">samples_n10</span> <span class="op">%&gt;%</span>  </span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">replicate</span><span class="op">)</span> <span class="op">%&gt;%</span>  </span>
<span>  <span class="fu">summarise</span><span class="op">(</span>cfr <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">dead</span><span class="op">)</span><span class="op">)</span>  </span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in samples_n10 %&gt;% group_by(replicate) %&gt;% summarise(cfr = mean(dead)): could not find function "%&gt;%"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb67">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Combine the results from both sample sizes (5 and 10)</span></span>
<span><span class="va">cfr</span> <span class="op">&lt;-</span> <span class="fu">bind_rows</span><span class="op">(</span><span class="va">cfr_n5</span>, <span class="va">cfr_n10</span><span class="op">)</span> <span class="op">%&gt;%</span>  </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>size <span class="op">=</span> <span class="fu">factor</span><span class="op">(</span><span class="fu">c</span><span class="op">(</span><span class="fu">rep</span><span class="op">(</span><span class="fl">5</span>, <span class="fl">100</span><span class="op">)</span>, <span class="fu">rep</span><span class="op">(</span><span class="fl">10</span>, <span class="fl">100</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>  </span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in bind_rows(cfr_n5, cfr_n10) %&gt;% mutate(size = factor(c(rep(5, : could not find function "%&gt;%"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb69">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Plot the sampling distribution of CFR estimates using a boxplot</span></span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="va">cfr</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">size</span>, y <span class="op">=</span> <span class="va">cfr</span>, fill <span class="op">=</span> <span class="va">size</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>  </span>
<span>  <span class="fu">geom_boxplot</span><span class="op">(</span>show.legend <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span>  <span class="co"># Create a boxplot without legend</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Sample size"</span>, y <span class="op">=</span> <span class="st">"CFR estimate"</span>,  </span>
<span>       title <span class="op">=</span> <span class="st">"Sampling Distribution of CFR Estimates"</span><span class="op">)</span> <span class="op">+</span>  <span class="co"># Add labels and title</span></span>
<span>  <span class="fu">scale_fill_brewer</span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"Blues"</span><span class="op">)</span>  <span class="co"># Use a blue color palette for visualization</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in ggplot(cfr, aes(x = size, y = cfr, fill = size)): could not find function "ggplot"</code></pre>
</div>
<p>If we calculate the mean and standard deviation of the estimated
values of the CFR with the samples of size 5 and size 10, we see that
indeed the standard deviation of the estimates is smaller with
increasing sample size, but in both cases on average the samples were
closer to the true parameter value of 0.20.</p>
<div class="codewrapper sourceCode" id="cb71">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Summarize CFR estimates by sample size</span></span>
<span></span>
<span><span class="va">cfr</span> <span class="op">%&gt;%</span>  </span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">size</span><span class="op">)</span> <span class="op">%&gt;%</span>  <span class="co"># Group data by sample size  </span></span>
<span>  <span class="fu">summarise</span><span class="op">(</span>  </span>
<span>    media <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">cfr</span><span class="op">)</span>,  <span class="co"># mean CFR  </span></span>
<span>    sd <span class="op">=</span> <span class="fu">sd</span><span class="op">(</span><span class="va">cfr</span><span class="op">)</span>,  <span class="co"># standard deviation of CFR  </span></span>
<span>    mediana <span class="op">=</span> <span class="fu">median</span><span class="op">(</span><span class="va">cfr</span><span class="op">)</span>,  <span class="co"># median CFR  </span></span>
<span>    P25 <span class="op">=</span> <span class="fu">quantile</span><span class="op">(</span><span class="va">cfr</span>, <span class="fl">0.25</span><span class="op">)</span>,  <span class="co"># 25th percentile (lower quartile)  </span></span>
<span>    P75 <span class="op">=</span> <span class="fu">quantile</span><span class="op">(</span><span class="va">cfr</span>, <span class="fl">0.75</span><span class="op">)</span>  <span class="co"># 75th percentile (upper quartile)  </span></span>
<span>  <span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in cfr %&gt;% group_by(size) %&gt;% summarise(media = mean(cfr), sd = sd(cfr), : could not find function "%&gt;%"</code></pre>
</div>
<p>But, if in real life we can only take a random sample, this means
that we will only have a single chance to calculate a statistic which
will be the <strong>point estimator</strong>of the parameter. However,
this single value will not be able to provide information on the
variability embedded in the random selection of the sample. In addition,
as we saw in the previous example, there is a high probability that many
of the possible sample configurations will give estimates that are far
from the true value of the parameter. Therefore, we must try to involve
sampling variability in the estimation process.</p>
<p><strong>Confidence interval estimation</strong></p>
<p>The objective of confidence interval estimation is to provide a range
of values, a lower and upper bound (a; b), which with a high probability
“…” (a; b), is the most likely to be used in the estimation of a
confidence interval.<strong>confidence</strong>”contains the true value
of the parameter to be estimated. Although each random sample that may
be selected would yield different bounds, this procedure ensures that a
<span class="math inline">\((1-α) %\)</span> of the intervals
constructed will contain the true value of the parameter. This also
implies that a <span class="math inline">\(α%\)</span> of the intervals
will not contain the true value. The symbol α is known as the
significance level.</p>
<p>In general, a confidence interval is constructed with the following
ingredients:</p>
<p><span class="math inline">\(\text{Estimador} ±(\text{coeficiente de
confiabilidad})*(\text{error estándar})\)</span></p>
<div id="discussion6" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Desafío</h3>
<div class="callout-content">
<p><strong>Example</strong></p>
<p>In the CFR package of the Epiverse-TRACE initiative, information is
available on an Ebola outbreak that occurred in 1976 in Zaire, now
called the Republic of Congo, documenting the number of cases and deaths
over 73 days. Ultimately, 245 cases of Ebola were reported and 234 of
these were fatal cases. If the interest is to perform a 95% CFR interval
estimate. What should the procedure be?</p>
<p>● <span class="math display">\[**Step
1-Estimator**\]</span>{.underline}: one should start by finding the
estimate in the observed sample:</p>
<p><span class="math inline">\(\hat{p} = \widehat{\text{CFR}} =
\frac{234}{245}= 0.955\)</span></p>
<p>So the estimated CFR was 95.5%.</p>
<p>● <span class="math display">\[**Step 2-Reliability
coefficient**\]</span>{.underline} based on the normal distribution for
95% confidence would correspond to 1.96</p>
<p>● <span class="math display">\[**Step 3-Standard
error:**\]</span>{.underline}</p>
<p><span class="math inline">\(\sqrt{\frac{\hat{p}(1-\hat{p})}{n}}=\sqrt{\frac{0.955
(1-0.955)}{245}}\)</span></p>
<p>● <span class="math display">\[**Step 4-Gather the
ingredients**\]</span>{.underline}</p>
<p>As you have noticed so far this step-by-step can become cumbersome
because of the calculations, but in R we can get everything in a faster
and more efficient way as follows:</p>
<p>$ = $</p>
<p>As you have noticed so far, this step-by-step can become cumbersome
because of the calculations, but in R we can obtain everything in a
faster and more efficient way in the following way:</p>
<div class="codewrapper sourceCode" id="cb73">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Download the Ebola data from 1976</span></span>
<span><span class="fu">data</span><span class="op">(</span><span class="va">ebola1976</span><span class="op">)</span>  </span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ADVERTENCIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="warning" tabindex="0"><code>Warning in data(ebola1976): data set 'ebola1976' not found</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb75">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculate key statistics related to the Case Fatality Ratio (CFR)</span></span>
<span><span class="va">cfr_summary</span> <span class="op">&lt;-</span> <span class="va">ebola1976</span> <span class="op">%&gt;%</span>  </span>
<span>  <span class="fu">summarise</span><span class="op">(</span>  </span>
<span>    n <span class="op">=</span> <span class="fu">sum</span><span class="op">(</span><span class="va">cases</span><span class="op">)</span>,  <span class="co"># Total number of cases  </span></span>
<span>    deaths <span class="op">=</span> <span class="fu">sum</span><span class="op">(</span><span class="va">deaths</span><span class="op">)</span>,  <span class="co"># Total number of deaths  </span></span>
<span>    cfr_est <span class="op">=</span> <span class="va">deaths</span> <span class="op">/</span> <span class="va">n</span>,  <span class="co"># Estimate of the Case Fatality Ratio (CFR)  </span></span>
<span>    error <span class="op">=</span> <span class="fu">sqrt</span><span class="op">(</span><span class="op">(</span><span class="va">cfr_est</span> <span class="op">*</span> <span class="op">(</span><span class="fl">1</span> <span class="op">-</span> <span class="va">cfr_est</span><span class="op">)</span><span class="op">)</span> <span class="op">/</span> <span class="va">n</span><span class="op">)</span>,  <span class="co"># Standard error calculation  </span></span>
<span>    lim_inf <span class="op">=</span> <span class="va">cfr_est</span> <span class="op">-</span> <span class="fl">1.96</span> <span class="op">*</span> <span class="va">error</span>,  <span class="co"># Lower bound of the 95% confidence interval  </span></span>
<span>    lim_sup <span class="op">=</span> <span class="va">cfr_est</span> <span class="op">+</span> <span class="fl">1.96</span> <span class="op">*</span> <span class="va">error</span>  <span class="co"># Upper bound of the 95% confidence interval  </span></span>
<span>  <span class="op">)</span>  </span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in ebola1976 %&gt;% summarise(n = sum(cases), deaths = sum(deaths), : could not find function "%&gt;%"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb77">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Print the result</span></span>
<span><span class="fu">print</span><span class="op">(</span><span class="va">cfr_summary</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'cfr_summary' not found</code></pre>
</div>
</div>
</div>
</div>
<p>Finally, we can conclude that with 95% confidence, the CFR of Ebola
in the 1976 epidemic in the Democratic Republic of Congo is contained in
the interval between 92.9% and 98.1%.</p>
<p>The CFR package also has a built-in function to automatically
estimate with its respective 95% interval the CFR during an epidemic by
means of the function:</p>
<div class="codewrapper sourceCode" id="cb79">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Compute a static Case Fatality Ratio (CFR) using the cfr package</span></span>
<span><span class="fu">cfr</span><span class="fu">::</span><span class="fu">cfr_static</span><span class="op">(</span>data <span class="op">=</span> <span class="va">ebola1976</span><span class="op">)</span>  </span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'ebola1976' not found</code></pre>
</div>
<p>As you can see there are slight differences between the CI
constructed step by step and the one reported by the function.
<code>cfr_static</code>. This is because the CFR package performs the
construction of the CI by the method based on maximum likelihood and
different statistical distributions according to the total number of
cases, but the interpretation does not change.</p>
<center>
<p><a href="https://epiverse-trace.github.io/epiverse-trace/Error_bank.html" class="external-link"><img src="fig/dudas.png" width="100" class="figure"></a></p>
</center>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Puntos Clave</h3>
<div class="callout-content">
<p><strong>At the end of the session, check if you achieved the
objectives:</strong></p>
<ul>
<li><p>Understand the role of statistics in the study of infectious
diseases.</p></li>
<li><p>Understand and use statistical measures to summarize and analyze
information.</p></li>
<li><p>Become familiar with the concept of a random variable and
recognize common probability distributions.</p></li>
<li><p>Learn how to approach a statistical problem as an inference
problem from a sample.</p></li>
<li><p>Understand the concept of confidence intervals for estimating
epidemiological parameters.</p></li>
</ul>
</div>
</div>
</div>
<div class="section level3">
<h3 id="contributions">Contributions<a class="anchor" aria-label="anchor" href="#contributions"></a>
</h3>
<ul>
<li>Erika Cantor: Initial version</li>
<li>Zulma M. Cucunuba: Editing</li>
<li>Laura Gómez-Bermeo: Editing</li>
<li>Andree Valle-Campo: Minor edits</li>
<li>José M. Velasco-Spain: Minor Editions</li>
<li>Hugo Gruson: Translation to english</li>
</ul>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div>
</section></section><section id="aio-Banco_errores"><p>Content from <a href="Banco_errores.html">Banco de preguntas y errores frecuentes</a></p>
<hr>
<p>Última actualización: 2025-06-06 |

        <a href="https://github.com/epiverse-trace/epitkit/edit/main/episodes/Banco_errores.Rmd" class="external-link">Mejora esta página <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Mostrar todas las soluciones " data-collapse="Cerrar todas las soluciones "> Mostrar todas las soluciones <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Hoja de ruta</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Preguntas</h3>
<ul>
<li>¿Tiene algunas dificultades con el código en R?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objetivos</h3>
<ul>
<li>En este documento usted podrá encontrar algunas de las preguntas y
errores frecuentes de la ejecución del código en R.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="banco-de-preguntas">Banco de preguntas<a class="anchor" aria-label="anchor" href="#banco-de-preguntas"></a>
</h2>
<hr class="half-width">
<div class="section level3">
<h3 id="es-necesario-rtools">¿Es necesario RTools?<a class="anchor" aria-label="anchor" href="#es-necesario-rtools"></a>
</h3>
<p>Hay varios problemas comunes en R que pueden requerir la instalación
de Rtools.</p>
<ol style="list-style-type: decimal">
<li><p>Instalación de paquetes que requieren compilación: Algunos
paquetes de R necesitan ser compilados desde el código fuente, lo cual
requiere herramientas de compilación que Rtools proporciona.</p></li>
<li><p>Dependencias de C, C++ o Fortran: Si desea instalar paquetes que
dependen de código escrito en C, C++ o Fortran, necesitará Rtools para
compilar estos componentes.</p></li>
<li><p>Errores de compilación: Si encuentra errores durante la
instalación de paquetes que mencionan problemas de compilación, Rtools
puede resolver estos problemas al proporcionar las herramientas
necesarias.</p></li>
<li><p>Desarrollo de paquetes personalizados: Si está desarrollando su
propio paquete de R y necesita compilar código fuente, Rtools es
esencial para este proceso.</p></li>
</ol>
</div>
<div class="section level3">
<h3 id="cómo-instalar-rtools">¿Cómo instalar RTools?<a class="anchor" aria-label="anchor" href="#c%C3%B3mo-instalar-rtools"></a>
</h3>
<p><em>Antes de empezar por favor revise que cuenta con permisos de
administrador en el computador o laptop.</em></p>
<p>Instalación de Rtools</p>
<p>La instalación de Rtools depende del sistema operativo que este
utilizando</p>
</div>
<div class="section level3">
<h3 id="windows">Windows<a class="anchor" aria-label="anchor" href="#windows"></a>
</h3>
<p>1.      Verifique que versión de R tiene:<br>
En la consola de R escriba y ejecute este comando: <strong><br></strong></p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">sessionInfo</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>R version 4.5.0 (2025-04-11)
Platform: x86_64-pc-linux-gnu
Running under: Ubuntu 22.04.5 LTS

Matrix products: default
BLAS:   /usr/lib/x86_64-linux-gnu/blas/libblas.so.3.10.0
LAPACK: /usr/lib/x86_64-linux-gnu/lapack/liblapack.so.3.10.0  LAPACK version 3.10.0

locale:
 [1] LC_CTYPE=C.UTF-8       LC_NUMERIC=C           LC_TIME=C.UTF-8
 [4] LC_COLLATE=C.UTF-8     LC_MONETARY=C.UTF-8    LC_MESSAGES=C.UTF-8
 [7] LC_PAPER=C.UTF-8       LC_NAME=C              LC_ADDRESS=C
[10] LC_TELEPHONE=C         LC_MEASUREMENT=C.UTF-8 LC_IDENTIFICATION=C

time zone: UTC
tzcode source: system (glibc)

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
[1] compiler_4.5.0 tools_4.5.0    yaml_2.3.10    knitr_1.49     xfun_0.51
[6] renv_1.1.4     evaluate_1.0.3</code></pre>
</div>
<p><strong>Obtendrá una información similar a esta. En este caso la
versión es 4.4.1</strong></p>
<p>2.      Visite la página de RTools en CRAN en el navegador de su
preferencia: <a href="https://cran.r-project.org/bin/windows/Rtools/" class="external-link uri">https://cran.r-project.org/bin/windows/Rtools/</a> y
seleccione la versión de Rtools que se ajuste a la versión actual de R
que tiene en su máquina y a la arquitectura de su computador. O de click
en alguno de los siguientes enlaces para descargar el instalador:<br><br></p>
<table class="table">
<colgroup>
<col width="50%">
<col width="50%">
</colgroup>
<thead><tr class="header">
<th>Para versiones de R…</th>
<th>Installar:</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Desde 4.4.0</td>
<td><a href="https://cran.r-project.org/bin/windows/Rtools/rtools44/rtools.html" class="external-link">RTools
4.4</a></td>
</tr>
<tr class="even">
<td>Desde 4.3.0</td>
<td><a href="https://cran.r-project.org/bin/windows/Rtools/rtools43/rtools.html" class="external-link">RTools
4.3</a></td>
</tr>
<tr class="odd">
<td>Que empiezan por 4.2.</td>
<td><a href="https://cran.r-project.org/bin/windows/Rtools/rtools42/rtools.html" class="external-link">RTools
4.2</a></td>
</tr>
<tr class="even">
<td>Entre 4.0.0 a 4.1.3</td>
<td><a href="https://cran.r-project.org/bin/windows/Rtools/rtools40.html" class="external-link">RTools
4.0</a></td>
</tr>
<tr class="odd">
<td>Anteriores a 4.0.0</td>
<td><a href="https://cran.r-project.org/bin/windows/Rtools/history.html" class="external-link">versiones
antiguas RTools</a></td>
</tr>
</tbody>
</table>
<p>3.      En la página de descarga, busque la frase: "<strong><em>may
be installed from the"</em></strong>  y de clic en <strong><a href="https://cran.r-project.org/bin/windows/Rtools/rtools44/files/rtools44-6335-6327.exe" class="external-link"><em>Rtools44
installer</em></a></strong> o en la versión que haya seleccionado
<strong>anteriormente <em>RtoolsXX installer</em></strong>.<br><br><img src="fig/rtools.png" class="figure"></p>
<p>4.      Espere a que finalice la descarga y ejecute el archivo.</p>
<p>5.      Haga clic en "N<em>ext"</em> o "<em>Siguiente"</em> para
todas las opciones que se muestran en pantalla.</p>
</div>
<div class="section level3">
<h3 id="mac">Mac<a class="anchor" aria-label="anchor" href="#mac"></a>
</h3>
<p>En Mac, solamente necesita instalar Xcode Command Line Tools.</p>
<p>1.      Haga clic en Búsqueda de Spotlight en la parte superior
derecha de la pantalla, luego busque “Terminal”.</p>
<p>2.      Abra una terminal o línea de comandos en su máquina.</p>
<p>3.      En la terminal copie y pegue el siguiente comando:
<code>xcode-select –install</code></p>
<p>4.      Probablemente necesite proporcionar su contraseña para
instalar el software.</p>
<p>5.      Siga las instrucciones que aparecen en la terminal y espere
hasta que finalice la instalación.</p>
<p>También puede hacerlo directamente desde R como explican en este
video: <a href="https://www.youtube.com/watch?v=_fckF0fefXQ&amp;t=5s" class="external-link">Instalación
usando R</a></p>
</div>
<div class="section level3">
<h3 id="cómo-instalar-un-paquete-o-librería-en-r">
<span id="instr">¿Cómo instalar un paquete o “librería” en
R?</span><a class="anchor" aria-label="anchor" href="#c%C3%B3mo-instalar-un-paquete-o-librer%C3%ADa-en-r"></a>
</h3>
<p>Para instalar un paquete en R puede hacerlo a través de:</p>
<ul>
<li>Le recomendamos que lo haga a través de la función:</li>
</ul>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">install.packages</span><span class="op">(</span><span class="st">"paquete"</span><span class="op">)</span></span></code></pre>
</div>
<p>Algunos paquetes que están en su fase de desarrollo pueden ser
instalados desde la última versión en github u otras ubicaciones
utilizando los paquetes remotes o pak.</p>
<ul>
<li>Otra opción es usar la función require:</li>
</ul>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw">require</span><span class="op">(</span><span class="st">"paquete"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">install.packages</span><span class="op">(</span><span class="st">"paquete"</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre>
</div>
<p>Esta opción es útil porque instala el paquete si no está previamente
instalado. Se puede combinar con remotes o pak</p>
<ul>
<li>
<p>Usar la interfaz de RStudio:</p>
<ol style="list-style-type: decimal">
<li><p>Haga click en la ventana <code>Packages</code></p></li>
<li><p>Presione el botón <code>Install</code></p></li>
<li><p>Escriba el nombre del (de los) paquete(s) a instalar</p></li>
<li><p>Presione botón <code>Install</code>.</p></li>
</ol>
</li>
</ul>
</div>
<div class="section level3">
<h3 id="cómo-usar-una-función">
<span id="funcr">¿Cómo usar una función?</span><a class="anchor" aria-label="anchor" href="#c%C3%B3mo-usar-una-funci%C3%B3n"></a>
</h3>
<p>          Si la función pertenece a un paquete de R, puede hacerse de
dos formas:</p>
<ul>
<li>Llamar el nombre del paquete de R y poner dos veces dos puntos
<code>(::)</code> y en seguida llamar el nombre de la función. Ahora
debe diligenciar los argumentos</li>
</ul>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">paquete</span><span class="fu">::</span><span class="fu">nombre_de_la_funcion</span><span class="op">(</span><span class="va">argumentos</span><span class="op">)</span></span></code></pre>
</div>
<ul>
<li>Cargar el paquete de R con <code>library</code>:</li>
</ul>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="st">"paquete"</span><span class="op">)</span></span></code></pre>
</div>
<p>y una vez cargada. Llamar el nombre de la función y diligenciar los
argumentos</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">nombre_de_la_funcion</span><span class="op">(</span><span class="va">argumentos</span><span class="op">)</span></span></code></pre>
</div>
<p>Es importante tener previamente el paquete instalado. Si tiene dudas
vaya a <a href="instr">¿Cómo instalar un paquete en R?</a></p>
<ul>
<li>          Si la función fue creada por usted y se encuentra en el
ambiente global:</li>
</ul>
<p>Simplemente llame la función por su nombre y proporcione los
argumentos necesarios:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">nombre_de_su_funcion</span><span class="op">(</span><span class="va">argumentos</span><span class="op">)</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="cómo-cargar-un-paquete-o-librería">¿Cómo cargar un paquete o “librería”?<a class="anchor" aria-label="anchor" href="#c%C3%B3mo-cargar-un-paquete-o-librer%C3%ADa"></a>
</h3>
<p>Algunas opciones para cargar un paquete son:</p>
<ul>
<li>La recomendada es utilizar la función library:</li>
</ul>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="st">"paquete"</span><span class="op">)</span></span></code></pre>
</div>
<ul>
<li>
<p>Utilizando la interfaz de RStudio:</p>
<ol style="list-style-type: decimal">
<li><p>Vaya a la sección derecha inferior a la pestaña
<code>Packages</code></p></li>
<li><p>De click en el cuadro frente a cada función, esto activará la
función <code>library</code>.</p></li>
</ol>
</li>
</ul>
</div>
<div class="section level3">
<h3 id="si-cargo-las-librerías-debo-cargarlas-cada-vez-que-vaya-a-usar-la-función">¿Si cargo las librerías debo cargarlas cada vez que vaya a usar la
función?<a class="anchor" aria-label="anchor" href="#si-cargo-las-librer%C3%ADas-debo-cargarlas-cada-vez-que-vaya-a-usar-la-funci%C3%B3n"></a>
</h3>
<p>No, solo es necesario cargarlas una vez por sesión de R. Sin embargo,
si cerro su RStudio o abrió un nuevo proyecto, cuenta como una nueva
sesión y, por lo tanto, debe cargarlas de nuevo para poder trabajar.</p>
</div>
<div class="section level3">
<h3 id="puedo-desactivar-una-librería-que-ya-cargué-sin-reiniciar-r">¿Puedo desactivar una librería que ya cargué sin reiniciar R?<a class="anchor" aria-label="anchor" href="#puedo-desactivar-una-librer%C3%ADa-que-ya-cargu%C3%A9-sin-reiniciar-r"></a>
</h3>
<p>Si, es posible mediante dos opciones:</p>
<ul>
<li>Utilice la función <code>detach</code>
</li>
</ul>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">detach</span><span class="op">(</span><span class="st">"package:paquete"</span>, unload <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
</div>
<ul>
<li>
<p>Utilizando la interfaz de RStudio:</p>
<ol style="list-style-type: decimal">
<li><p>Vaya a la sección derecha inferior a la pestaña
<code>Packages</code></p></li>
<li><p>De click en el cuadro frente a cada función (si el cuadro tiene
un visto, el paquete está cargado; si el cuadro está vacío, el paquete
no está cargado), esto activará la función <code>detach</code>.
<strong><em>Advertencia</em>: Si presiona el simbolo de x al lado del
paquete lo desinstalará.</strong></p></li>
</ol>
</li>
</ul>
</div>
<div class="section level3">
<h3 id="no-se-creó-el-objeto-o-función">No se creó el objeto o función<a class="anchor" aria-label="anchor" href="#no-se-cre%C3%B3-el-objeto-o-funci%C3%B3n"></a>
</h3>
<p>Esto puede ocurrir por varios motivos:</p>
<ul>
<li>
<strong>Ejecución incompleta del código</strong>: El motivo más
frecuente es que no se haya ejecutado el código parcial o totalmente.
Asegúrese de ejecutar el script completo para que todas las líneas de
código se ejecuten en el orden correcto. Para crear el objeto, asegúrese
de haber realizado una de estas dos acciones:</li>
</ul>
<ol style="list-style-type: decimal">
<li><p>escriba el código en la consola y ejecute (presionando
<code>Enter</code>)</p></li>
<li><p>o que en el script o Chunck de RMarkdown presione
<code>Control</code> + <code>Enter</code> en Windows o
<code>Command</code> + <code>Enter</code> en Mac.</p></li>
</ol>
<p>Si el objeto o función se creó correctamente, aparecerá en el
ambiente global (<em>Enviroment</em>) ubicado en la zona superior
lateral derecha.</p>
<ul>
<li><p>Falta algún paquete necesario: Revise que todas los paquetes o
librerías necesarios estén cargados al inicio del script.</p></li>
<li><p>Errores en el código: Verifique que no haya errores que impidan
que el código se ejecute correctamente. Al ejecutar el código en la
consola, aparecerán algunas alertas de errores que pueda tener el
código.</p></li>
</ul>
<div id="recomendación" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="recomendación" class="callout-inner">
<h3 class="callout-title">Recomendación</h3>
<div class="callout-content">
<p>Siempre observe la consola (console) para verificar si:</p>
<ol style="list-style-type: decimal">
<li>El código se ejecutó correctamente. En caso de que no se haya
ejecutado, puede volver a ejecutarlo.<br>
</li>
<li>Si aún se está ejecutando algún comando y aparece el símbolo rojo de
<strong>stop</strong>. En este caso, espere a que R termine el proceso
antes de ejecutar otros comandos.<br>
</li>
<li>Si ha ocurrido algún error. Revise los errores o advertencias, ya
que esto puede darle pistas sobre cómo solucionar el problema.<br>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="no-veo-el-resultado-de-mi-código">No veo el resultado de mi código<a class="anchor" aria-label="anchor" href="#no-veo-el-resultado-de-mi-c%C3%B3digo"></a>
</h3>
<p>Esto puede ocurrir por varios motivos:</p>
<ul>
<li>
<p>Si guardo el resultado usando el símbolo de asignación (ej.
<code>nombre &lt;- "Laura"</code>). Este aparecerá en el ambiente global
(zona superior lateral derecha) y no se ejecutará en la consola a menos
que se llame el objeto, es decir,</p>
<ol style="list-style-type: decimal">
<li><p>se ponga el nombre del objeto en la consola y se ejecute
(presionando <code>Enter</code>)</p></li>
<li><p>o que en el script o Chunck de RMarkdown se presione
<code>Control + Enter</code> en Windows o <code>Command + Enter</code>
en Mac.</p></li>
</ol>
</li>
<li><p>Falta alguna librería necesaria. Revise que todas las librerías
necesarias estén cargadas al inicio del script.</p></li>
<li><p>Hay errores en el código. Verifique que no haya errores que
impidan que el código se ejecute correctamente. Al ejecutar el código en
la consola le aparecerán algunas alertas de errores que pueda tener el
código.</p></li>
<li><p>El script no se ha ejecutado completamente. Asegúrese de ejecutar
el script completo para que todas las líneas de código se ejecuten en el
orden correcto.</p></li>
</ul>
</div>
<div class="section level3">
<h3 id="errores-frecuentes-al-usar-ggplot">Errores frecuentes al usar <code>ggplot</code>
<a class="anchor" aria-label="anchor" href="#errores-frecuentes-al-usar-ggplot"></a>
</h3>
<ul>
<li>
<p>Sintaxis incorrecta:</p>
<ol style="list-style-type: decimal">
<li><p>Usar <code>++</code> en lugar de <code>+</code> para concatenar
funciones.</p></li>
<li><p>También puede ocurrir que el <code>+</code> queda en la línea de
abajo, es importante destacar que para concatenar funciones debe estar
al terminar la línea anterior a la que se quiere concadenar.</p></li>
</ol>
</li>
</ul>
<figure><img src="fig/bpggplot.png" class="figure mx-auto d-block"></figure><ul>
<li>
<p>No especificar estéticas (aesthetics):</p>
<ol style="list-style-type: decimal">
<li>No incluir <code>aes()</code>.</li>
<li>No definir <code>aes()</code> correctamente, por ejemplo, no indicar
x o y.</li>
<li>Si bien aes en algunos casos puede ir en la parte inicial, la
geometría o estar dividido en secciones, es fundamental que siempre este
presente.</li>
</ol>
</li>
<li><p>Datos no presentes:</p></li>
</ul>
<p>La columna mencionada en aes() no existe en el conjunto de datos.
Usar el nombre incorrecto, recuerde que R es sensible a mayúsculas y
minúsculas por los tanto <code>VariableX</code> es diferente a
<code>variableX</code> o a <code>variablex</code>.</p>
<ul>
<li>Falta de librerías:</li>
</ul>
<p>Antes de trabajar con <code>ggplot</code> siempre recuerde cargar la
librería con <code>library</code>:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">ggplot2</span><span class="op">)</span></span></code></pre>
</div>
<ul>
<li>Errores en <code>geom</code>:</li>
</ul>
<pre><code>Seleccionar la geom incorrecta para el tipo de datos que se desea representar.

### `filter` no funciona

Esto puede ocurrir por varios motivos:</code></pre>
<ul>
<li><p>El paquete <code>dplyr</code> no está cargada. Aseguresé de
incluir <code><a href="https://dplyr.tidyverse.org" class="external-link">library(dplyr)</a></code> o <code><a href="https://tidyverse.tidyverse.org" class="external-link">library(tidyverse)</a></code> en
su script, y ejecutarlo cada nueva sesión.</p></li>
<li><p>Hay conflictos de nombres de funciones con otros paquetes. Use
<code>dplyr::filter()</code> para especificar qué quiere utilizar la
función <code>filter</code> de <code>dplyr</code>.</p></li>
<li><p>Los datos pueden no estar en el formato esperado. Verifique que
la columna que está filtrando existe y tiene los valores
adecuados.</p></li>
</ul>
<p><code>filter</code> acepta condiciones lógicas para seleccionar
filas. Veamos unos ejemplos:</p>
<p>-          Valores específicos:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid19</span> <span class="op">%&gt;%</span> <span class="fu">filter</span><span class="op">(</span><span class="va">estado</span> <span class="op">==</span> <span class="st">"Fallecido"</span><span class="op">)</span></span></code></pre>
</div>
<p>-          Rangos de valores:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid19</span> <span class="op">%&gt;%</span> <span class="fu">filter</span><span class="op">(</span><span class="va">fecha_de_notificacion</span> <span class="op">&gt;=</span> <span class="st">"2020-01-01"</span> <span class="op">&amp;</span> <span class="va">fecha_de_notificacion</span> <span class="op">&lt;=</span> <span class="st">"2020-12-31"</span><span class="op">)</span></span></code></pre>
</div>
<p>-          Condiciones múltiples:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid19</span> <span class="op">%&gt;%</span> <span class="fu">filter</span><span class="op">(</span><span class="va">estado</span> <span class="op">==</span> <span class="st">"Fallecido"</span> <span class="op">&amp;</span> <span class="va">nombre_del_pais</span> <span class="op">==</span> <span class="st">"Colombia"</span><span class="op">)</span></span></code></pre>
</div>
<p>-          Condiciones con funciones:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid19</span> <span class="op">%&gt;%</span> <span class="fu">filter</span><span class="op">(</span><span class="fu">grepl</span><span class="op">(</span><span class="st">"Colombia"</span>, <span class="va">nombre_del_pais</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>Para saber más sobre filter consulte la <a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">documentación</a>.</p>
</div>
<div class="section level3">
<h3 id="dónde-está-el-objeto-que-cree">¿Dónde está el objeto que cree?<a class="anchor" aria-label="anchor" href="#d%C3%B3nde-est%C3%A1-el-objeto-que-cree"></a>
</h3>
<p>Cuando se crea un objeto este se almacena en el ambiente global.
Podemos ver el ambiente global en la interfaz de R ubicado en la parte
superior lateral derecha.</p>
</div>
<div class="section level3">
<h3 id="no-funciona-el-pipe">No funciona el pipe <code>%&gt;%</code>
<a class="anchor" aria-label="anchor" href="#no-funciona-el-pipe"></a>
</h3>
<p>Recuerde los siguientes puntos:</p>
<ul>
<li>Es importante cargar previamente una librería que contenga el pipe.
Por ejemplo: <code>magrittr</code>, <code>dplyr</code>,
<code>tidyr</code> o <code>purrr</code>.</li>
<li>El pipe debe ir al final de la línea que se va a conectar. No al
inicio de la línea conectada:</li>
</ul>
<figure><img src="fig/bp_pipe.png" width="300" class="figure mx-auto d-block"></figure>
</div>
<div class="section level3">
<h3 id="prevencion">¿Cómo evitar accidentes?<a class="anchor" aria-label="anchor" href="#prevencion"></a>
</h3>
<p>Cuando se va a almacenar cambios en el objeto donde esta almacenado
el dataframe, es recomendable tener algunas precauciones para evitar
perder información:</p>
<ul>
<li>Crear un respaldo de los datos en objetos:</li>
</ul>
<p>o   Hacer copias de seguridad regularmente durante el proceso. Se
recomienda hacer una copia inicial para evitar cargar la base de nuevo.
Tras hacer algunos procesos, en especial, aquellos que consumen tiempo
se recomienda crear respaldos. Puede crear tanto como considere
convenientes. Se recomienda crear notas para identificar cada
proceso</p>
<figure><img src="fig/bpaccidentes.png" class="figure mx-auto d-block"></figure><ul>
<li>Crear un respaldo de los datos en archivos:</li>
</ul>
<p>o   Al igual que guardar en objetos, es buena idea guardar los datos
que ya han pasado algunos procesos en el disco del computador. Esto
evita que si se bloquea la sesión o se apaga el computador los datos
procesados estén resguardados. Cada cuanto se deben almacenar depende de
quién realiza el procesamiento.</p>
<figure><img src="fig/bpaccidentes1.png" class="figure mx-auto d-block"></figure><ul>
<li>Pruebas antes de almacenar:</li>
</ul>
<p>o   Realizar pruebas de los cambios deseados antes de guardarlos
definitivamente.</p>
<p>o   Ejemplo: Si se quiere transformar una variable a numérica, antes
de almacernarla y terminar teniendo <code>NAs</code> no deseados en los
datos, es recomendable hacer una prueba antes de si se originaran esos
<code>NAs</code></p>
<figure><img src="fig/bpaccidentes2.png" class="figure mx-auto d-block"></figure><ul>
<li>Crear variables de respaldo:</li>
</ul>
<p>o   Algunas veces cuando vamos a transformar una variable es mejor
crear una nueva que almacene el contenido de la transformación. Esto
evita el riesgo de pérdida de información al transformar una
variable.</p>
<figure><img src="fig/bpaccidentes3.png" class="figure mx-auto d-block"></figure><ul>
<li>Cuidado al almacenar:</li>
</ul>
<p>o   No almacenar tablas u objetos transformados accidentalmente.</p>
<p>o   Ej. si creamos una tabla para ver si la variable cambio como se
deseaba y luego reutilizamos el código y añadimos la asignación
adelante, almacenaríamos la tabla y perderíamos la información que tenía
el objeto</p>
<figure><img src="fig/bpaccidentes4.png" class="figure mx-auto d-block"></figure>
</div>
<div class="section level3">
<h3 id="mi-dataframe-cambió-inesperadamente">Mi dataframe cambió inesperadamente<a class="anchor" aria-label="anchor" href="#mi-dataframe-cambi%C3%B3-inesperadamente"></a>
</h3>
<p>Cuando tenemos accidentes con nuestros datos algunas opciones
son:</p>
<p>-          Revisar cual es el daño y ver si es reparable. Por
ejemplo, se cambió el carácter incorrecto en una cadena de texto.</p>
<p>-          Cargar los datos a partir de un respaldo. Si hemos creado
respaldos del proceso podemos evitarnos tiempos largo de procesamiento.
Entre estos respaldos están las variables de respaldo o los objetos de
respaldo (ver <a href="Banco_errores.html#prevencion">¿Cómo evitar
accidentes?</a>).</p>
</div>
<div class="section level3">
<h3 id="uso-de-la-función-rename">Uso de la función <code>rename</code>
<a class="anchor" aria-label="anchor" href="#uso-de-la-funci%C3%B3n-rename"></a>
</h3>
<p>1.      Llame la base de datos</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos</span></span></code></pre>
</div>
<p>2.      Use el pipe<code>%&gt;%</code> para enlazarlo a la función
rename</p>
<p>3.      Llame la función <code>rename</code> y escriba primero el
nuevo nombre de la columna y después el nombre de la columna
preexistente a la que quiere cambiar el nombre</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op">%&gt;%</span> <span class="fu">rename</span><span class="op">(</span>nombrenuevo <span class="op">=</span> <span class="va">nombreantiguo</span><span class="op">)</span></span></code></pre>
</div>
<p>n.      Seleccionar algunas filas de un grupo de datos</p>
<p>1.      Llame la base de datos</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos</span></span></code></pre>
</div>
<p>2.      Use el pipe <code>%&gt;%</code> para enlazarlo a la función
<code>group_by</code></p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos</span> <span class="op">%&gt;%</span> <span class="fu">group_by</span><span class="op">(</span><span class="va">variable_grupo</span><span class="op">)</span></span></code></pre>
</div>
<p>La función <code>group_by</code> creará grupos de datos según una
variable determinada en los cuales puede realizar otras acciones como
por ejemplo seleccionar los datos en el encabezado de cada grupo.</p>
<p>4.      Enseguida use la función como en este ejemplo podríamos usar
<code>head</code> solo para los datos del encabezado de cada grupo.</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op">%&gt;%</span> <span class="fu">group_by</span><span class="op">(</span><span class="va">variabledeinteres</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">head</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="cómo-usar-summarise">¿Cómo usar <code>summarise</code>?<a class="anchor" aria-label="anchor" href="#c%C3%B3mo-usar-summarise"></a>
</h3>
<p>1.      Llame la base de datos</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos</span></span></code></pre>
</div>
<p>2.      Use el pipe<code>%&gt;%</code>para enlazarlo a la función
<code>summarise</code></p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos</span> <span class="op">%&gt;%</span> <span class="fu">summarise</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p>La función summarise no puede utilizarse de forma directa, por lo
tanto, debe usarse junto a un argumento adentro, por ejemplo:</p>
<p>a.      Obtener el promedio</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">summarise</span><span class="op">(</span>mean <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">variabledeinteres</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>b.      Obtener la desviación estandar</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">summarise</span><span class="op">(</span>sd <span class="op">=</span> <span class="fu">sd</span><span class="op">(</span><span class="va">variabledeinteres</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>Esta función puede usarse con agrupación previa
(<code>group_by</code>) para obtener estos valores por cada grupo, por
ejemplo,</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos</span> <span class="op">%&gt;%</span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">pais</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">summarise</span><span class="op">(</span></span>
<span>    mean <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">variabledeinteres</span><span class="op">)</span>, </span>
<span>    sd <span class="op">=</span> <span class="fu">sd</span><span class="op">(</span><span class="va">variabledeinteres</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="errores-relacionados-a-grupos-group_by-y-ungroup">Errores relacionados a grupos (group_by y ungroup)<a class="anchor" aria-label="anchor" href="#errores-relacionados-a-grupos-group_by-y-ungroup"></a>
</h3>
<ul>
<li>Un error muy frecuente es que se almacena el objeto agrupado
(<code>group_by</code>), dado que no se realizó la acción de desagrupar
al final. Esto puede generar errores como cálculos incorrectos,
resúmenes por grupo en lugar de sobre la totalidad de los datos, y
problemas al realizar operaciones subsecuentes en el conjunto de datos.
Por ello, recomendamos siempre emplear (<code>ungroup</code>) antes de
almacenar. Para usar <code>ungroup()</code> basta con ponerlo al
final.</li>
</ul>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">categoria</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">procesamiento_de_datos</span><span class="op">(</span><span class="va">...</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">ungroup</span><span class="op">(</span><span class="op">)</span> </span></code></pre>
</div>
<p>Veamos un ejemplo de un error que puede ocurrir por no
desagrupar:</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="st">"tidyverse"</span><span class="op">)</span></span>
<span><span class="fu">set.seed</span><span class="op">(</span><span class="fl">123</span><span class="op">)</span> <span class="co"># Para reproducibilidad</span></span>
<span><span class="co">#dataframe de ejemplo</span></span>
<span><span class="va">tipo_sanguineo</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"O"</span>,<span class="st">"AB"</span><span class="op">)</span></span>
<span><span class="va">rh</span> <span class="op">&lt;-</span> <span class="fu">sample</span><span class="op">(</span><span class="fu">c</span><span class="op">(</span><span class="st">"+"</span>, <span class="st">"-"</span><span class="op">)</span>, <span class="fl">10</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">dia</span> <span class="op">&lt;-</span><span class="fu">c</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span></span>
<span><span class="va">f_latidos</span> <span class="op">&lt;-</span> <span class="fu">sample</span><span class="op">(</span><span class="fl">60</span><span class="op">:</span><span class="fl">100</span>, <span class="fl">200</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">f_respiratoria</span> <span class="op">&lt;-</span> <span class="fu">sample</span><span class="op">(</span><span class="fl">12</span><span class="op">:</span><span class="fl">20</span>, <span class="fl">200</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">data.frame</span><span class="op">(</span><span class="va">tipo_sanguineo</span>, <span class="va">rh</span>, <span class="va">dia</span>, <span class="va">f_latidos</span>, <span class="va">f_respiratoria</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#resumen por columnas</span></span>
<span><span class="va">por_dia</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">tipo_sanguineo</span>,<span class="va">rh</span>, <span class="va">dia</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">summarize</span><span class="op">(</span></span>
<span>    f_l <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">f_latidos</span><span class="op">)</span>, </span>
<span>    f_r <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">f_respiratoria</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre>
</div>
<p>Creemos una variable que contenga id únicos por cada fila</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">por_dia</span> <span class="op">%&gt;%</span> <span class="fu">mutate</span><span class="op">(</span>id <span class="op">=</span> <span class="fu">row_number</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 20 × 6
# Groups:   tipo_sanguineo, rh [8]
   tipo_sanguineo rh      dia   f_l   f_r    id
   &lt;chr&gt;          &lt;chr&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;
 1 A              +         1  76.3  15.2     1
 2 A              +         3  81.5  16.6     2
 3 A              +         4  81.2  15.6     3
 4 A              +         5  81    15.9     4
 5 A              -         2  78.3  16.2     1
 6 AB             +         2  79.3  16       1
 7 AB             +         5  73.1  17.4     2
 8 AB             -         1  83    16.6     1
 9 AB             -         3  79.8  15       2
10 AB             -         4  84.8  17.4     3
11 B              +         2  77.8  16.4     1
12 B              +         5  83.8  14.6     2
13 B              -         1  74.5  14.9     1
14 B              -         3  85.1  16.2     2
15 B              -         4  83.3  16.6     3
16 O              +         1  80.3  15       1
17 O              +         3  78.9  14.8     2
18 O              +         4  81.2  14.9     3
19 O              +         5  84.9  15       4
20 O              -         2  80.7  16.1     1</code></pre>
</div>
<p>Cómo puede observar en la columna id en lugar de identificadores
únicos tenemos id que se repiten. ¿Por qué sucedió si cada fila es
diferente?</p>
<p>La razón a este problema subyace en que los datos siguen agrupados.
Aún si no aplicamos directamente el <code>ungroup</code> como se explico
antes, todavía podemos solucionarlo.</p>
<p>Veamos como no se solucionaría primero. Un error frecuente al tratar
de solucionar este problema es aplicar la función ungroup sin almacenar
el resultado.</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># aplicación equivocada de ungroup</span></span>
<span><span class="va">por_dia</span> <span class="op">%&gt;%</span> <span class="fu">ungroup</span><span class="op">(</span><span class="op">)</span> </span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 20 × 5
   tipo_sanguineo rh      dia   f_l   f_r
   &lt;chr&gt;          &lt;chr&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 A              +         1  76.3  15.2
 2 A              +         3  81.5  16.6
 3 A              +         4  81.2  15.6
 4 A              +         5  81    15.9
 5 A              -         2  78.3  16.2
 6 AB             +         2  79.3  16
 7 AB             +         5  73.1  17.4
 8 AB             -         1  83    16.6
 9 AB             -         3  79.8  15
10 AB             -         4  84.8  17.4
11 B              +         2  77.8  16.4
12 B              +         5  83.8  14.6
13 B              -         1  74.5  14.9
14 B              -         3  85.1  16.2
15 B              -         4  83.3  16.6
16 O              +         1  80.3  15
17 O              +         3  78.9  14.8
18 O              +         4  81.2  14.9
19 O              +         5  84.9  15
20 O              -         2  80.7  16.1</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># si bien desagrupa el objeto para imprimirlo, </span></span>
<span><span class="co"># mientras no se almacene  el objeto serguirá agrupado</span></span>
<span><span class="va">por_dia</span> <span class="op">%&gt;%</span> <span class="fu">mutate</span><span class="op">(</span>id <span class="op">=</span> <span class="fu">row_number</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 20 × 6
# Groups:   tipo_sanguineo, rh [8]
   tipo_sanguineo rh      dia   f_l   f_r    id
   &lt;chr&gt;          &lt;chr&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;
 1 A              +         1  76.3  15.2     1
 2 A              +         3  81.5  16.6     2
 3 A              +         4  81.2  15.6     3
 4 A              +         5  81    15.9     4
 5 A              -         2  78.3  16.2     1
 6 AB             +         2  79.3  16       1
 7 AB             +         5  73.1  17.4     2
 8 AB             -         1  83    16.6     1
 9 AB             -         3  79.8  15       2
10 AB             -         4  84.8  17.4     3
11 B              +         2  77.8  16.4     1
12 B              +         5  83.8  14.6     2
13 B              -         1  74.5  14.9     1
14 B              -         3  85.1  16.2     2
15 B              -         4  83.3  16.6     3
16 O              +         1  80.3  15       1
17 O              +         3  78.9  14.8     2
18 O              +         4  81.2  14.9     3
19 O              +         5  84.9  15       4
20 O              -         2  80.7  16.1     1</code></pre>
</div>
<p>Como puede observar el problema no se ha corregido.</p>
<p>Para corregirlo podemos o incluir el <code>ungroup</code> desde el
inicio cuando creamos el objeto <code>por_dia</code>, o aplicar el
cambio y guardarlo en el objeto:</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#ahora estamos almacenando el desagrupamiento</span></span>
<span><span class="va">por_dia_sin_grupo</span> <span class="op">&lt;-</span> <span class="va">por_dia</span> <span class="op">%&gt;%</span> <span class="fu">ungroup</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">por_dia_sin_grupo</span> <span class="op">%&gt;%</span> <span class="fu">mutate</span><span class="op">(</span>id <span class="op">=</span> <span class="fu">row_number</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 20 × 6
   tipo_sanguineo rh      dia   f_l   f_r    id
   &lt;chr&gt;          &lt;chr&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;
 1 A              +         1  76.3  15.2     1
 2 A              +         3  81.5  16.6     2
 3 A              +         4  81.2  15.6     3
 4 A              +         5  81    15.9     4
 5 A              -         2  78.3  16.2     5
 6 AB             +         2  79.3  16       6
 7 AB             +         5  73.1  17.4     7
 8 AB             -         1  83    16.6     8
 9 AB             -         3  79.8  15       9
10 AB             -         4  84.8  17.4    10
11 B              +         2  77.8  16.4    11
12 B              +         5  83.8  14.6    12
13 B              -         1  74.5  14.9    13
14 B              -         3  85.1  16.2    14
15 B              -         4  83.3  16.6    15
16 O              +         1  80.3  15      16
17 O              +         3  78.9  14.8    17
18 O              +         4  81.2  14.9    18
19 O              +         5  84.9  15      19
20 O              -         2  80.7  16.1    20</code></pre>
</div>
<p>Como puede observar ahora si tenemos cada fila con su propio id.</p>
<p>Advertencia: Es importante aclarar que el desagrupamiento en los
escenarios anteriores iría después de la operación, sin embargo, en este
caso iría antes de la operación.</p>
</div>
<div class="section level3">
<h3 id="cuando-trato-de-crear-un-pdf-en-rmarkdown-me-sale-error">Cuando trato de crear un pdf en RMarkdown me sale error<a class="anchor" aria-label="anchor" href="#cuando-trato-de-crear-un-pdf-en-rmarkdown-me-sale-error"></a>
</h3>
<p>Si el archivo sale correctamente en otros formatos a excepción de
pdf. Una de las situaciones más frecuentes es que falte la instalación
de LaTeX: RMarkdown necesita LaTeX para generar PDFs. Asegúrese de tener
LaTeX instalado en su sistema.</p>
<p>Para instalar LaTeX desde RStudio, puede usar el paquete TinyTeX:</p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">install.packages</span><span class="op">(</span><span class="st">"tinytex"</span><span class="op">)</span></span>
<span><span class="fu">tinytex</span><span class="fu">::</span><span class="fu">install_tinytex</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p>Configure RStudio:</p>
<p>Vaya a Tools &gt; Global Options &gt; Sweave.</p>
<p>Asegúrese de que la opción “Typeset PDF” esté configurada para usar
TinyTeX.</p>
</div>
<div class="section level3">
<h3 id="material-adicional-que-puede-aportar-a-su-aprendizaje">Material adicional que puede aportar a su aprendizaje:<a class="anchor" aria-label="anchor" href="#material-adicional-que-puede-aportar-a-su-aprendizaje"></a>
</h3>
<p><strong>Manejo de datos con Tidyverse y R:</strong></p>
<p><a href="https://www.youtube.com/watch?v=6STcQVX8Hk0" class="external-link uri">https://www.youtube.com/watch?v=6STcQVX8Hk0</a></p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Puntos Clave</h3>
<div class="callout-content">
<p>Si después de buscar en esta guía sus preguntas no encontro respuesta
por favor diligencie el siguiente formulario <a href="https://forms.office.com/pages/responsepage.aspx?id=Dpn32j-KnECbdipUdQmAAMjWJqHZ8P1DkQQdb07M30RUOEY5N1U1UDFYMExGMzFHRkRKT1BTRTFRWS4u&amp;route=shorturl&amp;sid=6a94f23c-049c-4f54-9732-fc25789059b3" class="external-link uri">Dudas por resolver</a></p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="contribuciones">Contribuciones<a class="anchor" aria-label="anchor" href="#contribuciones"></a>
</h2>
<hr class="half-width">
<ul>
<li><p>José M. Velasco-España: Versión inicial</p></li>
<li><p>Andree Valle-Campos: Ediciones menores</p></li>
<li><p>Laura Gómez-Bermeo: Ediciones menores</p></li>
<li><p>Geraldine Gomez: Ediciones menores</p></li>
</ul>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 --></section></section>
</div>
    </main>
</div>
<!-- END  : inst/pkgdown/templates/content-extra.html -->

      </div>
<!--/div.row-->
      		<footer class="row footer mx-md-3"><hr>
<div class="col-md-6">
        <p>Esta lección está sujeta al <a href="CODE_OF_CONDUCT.html">Código de Conducta</a></p>
        <p>

        <a href="https://github.com/epiverse-trace/epitkit/edit/main/README.md" class="external-link">Editar en GitHub</a>

	
        | <a href="https://github.com/epiverse-trace/epitkit/blob/main/CONTRIBUTING.md" class="external-link">Contribuir</a>
        | <a href="https://github.com/epiverse-trace/epitkit/" class="external-link">Fuente</a></p>
				<p><a href="https://github.com/epiverse-trace/epitkit/blob/main/CITATION.cff" class="external-link">Cita</a> | <a href="mailto:gomezblaura@javeriana.edu.co">Contacto</a> | <a href="https://carpentries.org/about/" class="external-link">Acerca de</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Plantilla compartida bajo <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> por <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Construido con <a href="https://github.com/epiverse-trace/sandpaper/tree/patch-renv-github-bug" class="external-link">sandpaper (0.16.13.9000)</a>, <a href="https://github.com/carpentries/pegboard/tree/5e0d711121a581777d83cf270e298c933f112d52" class="external-link">pegboard (0.7.9)</a> y <a href="https://github.com/epiverse-trace/varnish/tree/epiversetheme" class="external-link">varnish (1.0.7.9000)</a></p>
			</div>
		</footer>
</div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Volver al inicio"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Volver</span> al inicio
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "LearningResource",
  "@id": "https://epiverse-trace.github.io/epitkit/aio.html",
  "inLanguage": "es",
  "dct:conformsTo": "https://bioschemas.org/profiles/LearningResource/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "Todo en una sola página",
  "creativeWorkStatus": "active",
  "url": "https://epiverse-trace.github.io/epitkit/aio.html",
  "identifier": "https://epiverse-trace.github.io/epitkit/aio.html",
  "dateCreated": "2024-09-09",
  "dateModified": "2025-06-06",
  "datePublished": "2025-06-06"
}

  </script><script>
		feather.replace();
	</script>
</body>
</html><!-- END:   inst/pkgdown/templates/layout.html-->

